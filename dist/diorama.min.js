var Diorama=function(){"use strict";function e(e){return new Promise(function(t,r){if(o.models[e])return t(o.models[e]);if(/\.gltf$/i.test(e))if(THREE.glTFLoader){var n=new THREE.glTFLoader;n.load(e,function(r){return o.models[e]=r.scene.children[0].children[0],t(o.models[e])})}else if(THREE.GLTFLoader){var i=new THREE.GLTFLoader;i.load(e,function(r){return o.models[e]=r.scene.children[0],o.models[e].matrixAutoUpdate=!0,t(o.models[e])},function(){},r)}else console.error('glTF loader not found. "'+e+'" not loaded.'),r();else if(/\.dae$/i.test(e))if(THREE.ColladaLoader){var s=new THREE.ColladaLoader;s.load(e,function(r){return o.models[e]=r.scene.children[0],t(r.scene.children[0])},null,r)}else console.error('Collada loader not found. "'+e+'" not loaded.'),r()})}function t(e){return new Promise(function(t,r){if(o.textures[e])return t(o.textures[e]);var n=new THREE.TextureLoader;n.load(e,function(r){return o.textures[e]=r,t(r)},null,r)})}function r(e){return new Promise(function(r,n){return o.posters[e]?r(o.posters[e]):new t(e).then(function(t){var n,i=t.image.width/t.image.height,s=new THREE.MeshBasicMaterial({map:t,side:THREE.DoubleSide});return n=i>1?new THREE.PlaneGeometry(1,1/i):new THREE.PlaneGeometry(i,1),o.posters[e]=new THREE.Mesh(n,s),r(o.posters[e])})})}var o={models:{},textures:{},posters:{}},n=function(e){function t(t,r,o){e.call(this,-1,1,1,-1,.1,400);var n=window.localStorage.getItem("dioramaViewSettings");n&&(n=JSON.parse(n),t||(t=(new THREE.Vector3).fromArray(n.focus)),r||(r=n.viewSize),o||(o=(new THREE.Vector3).fromArray(n.lookDirection))),this._viewSize=r||40,this._focus=t||new THREE.Vector3,this._lookDirection=o||new THREE.Vector3(0,-1,0),this.gridHelper=new THREE.GridHelper(300,1),this.gridHelper.userData={altspace:{collider:{enabled:!1}}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={viewSize:{},focus:{},lookDirection:{}};return r.viewSize.get=function(){return this._viewSize},r.viewSize.set=function(e){this._viewSize=e,this.recomputeViewport()},r.focus.get=function(){return this._focus},r.focus.set=function(e){this._focus.copy(e),this.recomputeViewport()},r.lookDirection.get=function(){return this._lookDirection},r.lookDirection.set=function(e){this._lookDirection.copy(e),this.recomputeViewport()},t.prototype.registerHooks=function(e){var t=this;t.renderer=e,document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var r=document.createElement("p");r.innerHTML=["Middle click and drag to pan","Mouse wheel to zoom","Arrow keys to rotate"].join("<br/>"),Object.assign(r.style,{position:"fixed",top:"10px",left:"10px",margin:0}),document.body.appendChild(r),window.addEventListener("resize",function(e){return t.recomputeViewport()}),t.recomputeViewport();var o=null,n=null;window.addEventListener("mousedown",function(e){1===e.button&&(o={x:e.clientX,y:e.clientY},n=t._focus.clone())}),window.addEventListener("mouseup",function(e){1===e.button&&(o=null,n=null)}),window.addEventListener("mousemove",function(e){if(o){var r=document.body,i=r.clientWidth,s=r.clientHeight,a=Math.sqrt(i*i+s*s)/t._viewSize,c=e.clientX-o.x,l=e.clientY-o.y,u=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._focus.copy(n).add(t.up.clone().multiplyScalar(l/a)).add(u.multiplyScalar(-c/a)),t.recomputeViewport()}}),window.addEventListener("wheel",function(e){e.deltaY<0?(t._viewSize*=.9,t.recomputeViewport()):e.deltaY>0&&(t._viewSize*=1.1,t.recomputeViewport())}),window.addEventListener("keydown",function(e){if("ArrowDown"===e.key){var r=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(r,Math.PI/2),t.recomputeViewport()}else if("ArrowUp"===e.key){var o=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(o,-Math.PI/2),t.recomputeViewport()}else"ArrowLeft"===e.key?(t._lookDirection.applyAxisAngle(t.up,-Math.PI/2),t.recomputeViewport()):"ArrowRight"===e.key&&(t._lookDirection.applyAxisAngle(t.up,Math.PI/2),t.recomputeViewport())})},t.prototype.recomputeViewport=function(){var e=document.body,t=e.clientWidth,r=e.clientHeight;this.renderer.setSize(t,r);var o=t/r,n=Math.sqrt(this._viewSize*this._viewSize/(o*o+1)),i=o*n;this.left=-i/2,this.right=i/2,this.top=n/2,this.bottom=-n/2,this.updateProjectionMatrix(),this.position.copy(this._focus).sub(this._lookDirection.clone().multiplyScalar(200)),1===Math.abs(this._lookDirection.normalize().dot(new THREE.Vector3(0,-1,0)))?this.up.set(0,0,1):this.up.set(0,1,0),this.lookAt(this._focus),window.localStorage.setItem("dioramaViewSettings",JSON.stringify({focus:this._focus.toArray(),viewSize:this._viewSize,lookDirection:this._lookDirection.toArray()}))},Object.defineProperties(t.prototype,r),t}(THREE.OrthographicCamera),i=function(e){void 0===e&&(e={});var t=e.bgColor;void 0===t&&(t=11184810);var r=e.gridOffset;void 0===r&&(r=[0,0,0]);var i=e.fullspace;void 0===i&&(i=!1);var s=this;s._cache=o,s.scene=new THREE.Scene,altspace.inClient?(s.renderer=altspace.getThreeJSRenderer(),s._envPromise=Promise.all([altspace.getEnclosure(),altspace.getSpace()]).then(function(e){function t(){s.scene.scale.setScalar(r.pixelsPerMeter),s.env=Object.assign({},r,o)}var r=e[0],o=e[1];t(),i?(s._fsPromise=r.requestFullspace().catch(function(e){return console.warn("Request for fullspace denied")}),r.addEventListener("fullspacechange",t)):s._fsPromise=Promise.resolve()})):(s.renderer=new THREE.WebGLRenderer,s.renderer.setSize(document.body.clientWidth,document.body.clientHeight),s.renderer.setClearColor(t),document.body.appendChild(s.renderer.domElement),s.previewCamera=new n,s.previewCamera.gridHelper.position.fromArray(r),s.scene.add(s.previewCamera,s.previewCamera.gridHelper),s.previewCamera.registerHooks(s.renderer),altspace.utilities.shims.cursor.init(s.scene,s.previewCamera,{renderer:s.renderer}),s.env={innerWidth:1024,innerHeight:1024,innerDepth:1024,pixelsPerMeter:i?1:1024/3,sid:"browser",name:"browser",templateSid:"browser"},s._envPromise=Promise.resolve(),s._fsPromise=Promise.resolve())};return i.prototype.start=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this,o={};e.forEach(function(e){function t(e){void 0===o[e]?o[e]=!0:o[e]===!0&&(o[e]=!1)}Object.keys(e.assets.textures||{}).map(function(t){return e.assets.textures[t]}).forEach(t),Object.keys(e.assets.models||{}).map(function(t){return e.assets.models[t]}).forEach(t),Object.keys(e.assets.posters||{}).map(function(t){return e.assets.posters[t]}).forEach(t)});var n=e.reduce(function(e,t){return e||t.needsSkeleton},!1);n&&altspace.inClient?r._skelPromise=altspace.getThreeJSTrackingSkeleton().then(function(e){r.scene.add(e),r.env.skel=e,r.env=Object.freeze(r.env)}):(r.env=Object.freeze(r.env),r._skelPromise=Promise.resolve()),Promise.all([r._envPromise,r._fsPromise,r._skelPromise]).then(function(){e.forEach(function(e){var t=null;if(e instanceof THREE.Object3D?t=e:(t=new THREE.Object3D,e.transform?(t.matrix.fromArray(e.transform),t.matrix.decompose(t.position,t.quaternion,t.scale)):(e.position&&t.position.fromArray(e.position),e.rotation&&t.rotation.fromArray(e.rotation))),e.verticalAlign){var n=r.env.innerHeight/(2*r.env.pixelsPerMeter);switch(e.verticalAlign){case"top":t.translateY(n);break;case"bottom":t.translateY(-n);break;case"middle":break;default:console.warn('Invalid value for "verticalAlign" - ',e.verticalAlign)}}if(r.scene.add(t),r.previewCamera){var i=new THREE.AxisHelper(1);i.userData.altspace={collider:{enabled:!1}},t.add(i)}r.loadAssets(e.assets,o).then(function(o){e.initialize(r.env,t,o)})})}),window.requestAnimationFrame(function e(t){window.requestAnimationFrame(e),r.scene.updateAllBehaviors(),window.TWEEN&&TWEEN.update(),r.renderer.render(r.scene,r.previewCamera)})},i.prototype.loadAssets=function(n,i){return new Promise(function(s,a){Promise.all(Object.keys(n.models||{}).map(function(t){return e(n.models[t])}).concat(Object.keys(n.textures||{}).map(function(e){return t(n.textures[e])}),Object.keys(n.posters||{}).map(function(e){return r(n.posters[e])}))).then(function(){var e={models:{},textures:{},posters:{}};for(var t in n.models){var r=n.models[t],a=o.models[r];e.models[t]=a?i[r]?a:a.clone():null}for(var c in n.textures){var l=n.textures[c],u=o.textures[l];e.textures[c]=u?i[l]?u:u.clone():null}for(var d in n.posters){var p=n.posters[d],m=o.posters[p];e.posters[d]=m?i[p]?m:m.clone():null}s(e)}).catch(function(e){return console.error(e.stack)})})},i}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9sb2FkZXJzLmpzIiwiLi4vc3JjL2NhbWVyYS5qcyIsIi4uL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubGV0IGNhY2hlID0ge21vZGVsczoge30sIHRleHR1cmVzOiB7fSwgcG9zdGVyczoge319O1xuXG5mdW5jdGlvbiBNb2RlbFByb21pc2UodXJsKVxue1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cblx0e1xuXHRcdGlmKGNhY2hlLm1vZGVsc1t1cmxdKXtcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcblx0XHR9XG5cblx0XHQvLyBOT1RFOiBnbFRGIGxvYWRlciBkb2VzIG5vdCBjYXRjaCBlcnJvcnNcblx0XHRlbHNlIGlmKC9cXC5nbHRmJC9pLnRlc3QodXJsKSl7XG5cdFx0XHRpZihUSFJFRS5nbFRGTG9hZGVyKXtcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5nbFRGTG9hZGVyKCk7XG5cdFx0XHRcdGxvYWRlci5sb2FkKHVybCwgKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdID0gcmVzdWx0LnNjZW5lLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKFRIUkVFLkdMVEZMb2FkZXIpe1xuXHRcdFx0XHRsZXQgbG9hZGVyID0gbmV3IFRIUkVFLkdMVEZMb2FkZXIoKTtcblx0XHRcdFx0bG9hZGVyLmxvYWQodXJsLCByZXN1bHQgPT4ge1xuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdID0gcmVzdWx0LnNjZW5lLmNoaWxkcmVuWzBdO1xuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdLm1hdHJpeEF1dG9VcGRhdGUgPSB0cnVlO1xuXHRcdFx0XHRcdC8qcmVzdWx0LnNjZW5lLnRyYXZlcnNlKChvKSA9PiB7XG5cdFx0XHRcdFx0XHRpZihvLm1hdGVyaWFsICYmIG8ubWF0ZXJpYWwubWFwKVxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnZmxpcFknLCBvLm1hdGVyaWFsLm1hcC5mbGlwWSk7XG5cdFx0XHRcdFx0fSk7Ki9cblxuXG5cdFx0XHRcdFx0cmV0dXJuIHJlc29sdmUoY2FjaGUubW9kZWxzW3VybF0pO1xuXHRcdFx0XHR9LCAoKSA9PiB7fSwgcmVqZWN0KTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBnbFRGIGxvYWRlciBub3QgZm91bmQuIFwiJHt1cmx9XCIgbm90IGxvYWRlZC5gKTtcblx0XHRcdFx0cmVqZWN0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZWxzZSBpZigvXFwuZGFlJC9pLnRlc3QodXJsKSl7XG5cdFx0XHRpZihUSFJFRS5Db2xsYWRhTG9hZGVyKXtcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5Db2xsYWRhTG9hZGVyKCk7XG5cdFx0XHRcdGxvYWRlci5sb2FkKHVybCwgcmVzdWx0ID0+IHtcblx0XHRcdFx0XHRjYWNoZS5tb2RlbHNbdXJsXSA9IHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzb2x2ZShyZXN1bHQuc2NlbmUuY2hpbGRyZW5bMF0pXG5cdFx0XHRcdH0sIG51bGwsIHJlamVjdCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgQ29sbGFkYSBsb2FkZXIgbm90IGZvdW5kLiBcIiR7dXJsfVwiIG5vdCBsb2FkZWQuYCk7XG5cdFx0XHRcdHJlamVjdCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIFRleHR1cmVQcm9taXNlKHVybCl7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PlxuXHR7XG5cdFx0aWYoY2FjaGUudGV4dHVyZXNbdXJsXSlcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLnRleHR1cmVzW3VybF0pO1xuXHRcdGVsc2Uge1xuXHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG5cdFx0XHRsb2FkZXIubG9hZCh1cmwsIHRleHR1cmUgPT4ge1xuXHRcdFx0XHRjYWNoZS50ZXh0dXJlc1t1cmxdID0gdGV4dHVyZTtcblx0XHRcdFx0cmV0dXJuIHJlc29sdmUodGV4dHVyZSk7XG5cdFx0XHR9LCBudWxsLCByZWplY3QpO1xuXHRcdH1cblx0fSk7XG59XG5cbmNsYXNzIFZpZGVvUHJvbWlzZSBleHRlbmRzIFByb21pc2Uge1xuXHRjb25zdHJ1Y3Rvcih1cmwpXG5cdHtcblx0XHQvLyBzdGFydCBsb2FkZXJcblx0XHR2YXIgdmlkU3JjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcblx0XHR2aWRTcmMuYXV0b3BsYXkgPSB0cnVlO1xuXHRcdHZpZFNyYy5sb29wID0gdHJ1ZTtcblx0XHR2aWRTcmMuc3JjID0gdXJsO1xuXHRcdHZpZFNyYy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodmlkU3JjKTtcblxuXHRcdHZhciB0ZXggPSBuZXcgVEhSRUUuVmlkZW9UZXh0dXJlKHZpZFNyYyk7XG5cdFx0dGV4Lm1pbkZpbHRlciA9IFRIUkVFLkxpbmVhckZpbHRlcjtcblx0XHR0ZXgubWFnRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xuXHRcdHRleC5mb3JtYXQgPSBUSFJFRS5SR0JGb3JtYXQ7XG5cblx0XHQvL2NhY2hlLnZpZGVvc1t1cmxdID0gdGV4O1xuXHRcdC8vcGF5bG9hZC52aWRlb3NbaWRdID0gY2FjaGUudmlkZW9zW3VybF07XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRleCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gUG9zdGVyUHJvbWlzZSh1cmwpe1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cblx0e1xuXHRcdGlmKGNhY2hlLnBvc3RlcnNbdXJsXSlcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLnBvc3RlcnNbdXJsXSk7XG5cdFx0ZWxzZSByZXR1cm4gKG5ldyBUZXh0dXJlUHJvbWlzZSh1cmwpKS50aGVuKHRleCA9PlxuXHRcdFx0e1xuXHRcdFx0XHRsZXQgcmF0aW8gPSB0ZXguaW1hZ2Uud2lkdGggLyB0ZXguaW1hZ2UuaGVpZ2h0O1xuXHRcdFx0XHRsZXQgZ2VvLCBtYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogdGV4LCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlfSk7XG5cblx0XHRcdFx0aWYocmF0aW8gPiAxKXtcblx0XHRcdFx0XHRnZW8gPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxLCAxL3JhdGlvKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRnZW8gPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShyYXRpbywgMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjYWNoZS5wb3N0ZXJzW3VybF0gPSBuZXcgVEhSRUUuTWVzaChnZW8sIG1hdCk7XG5cdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLnBvc3RlcnNbdXJsXSk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fSk7XG59XG5cbmV4cG9ydCB7IE1vZGVsUHJvbWlzZSwgVGV4dHVyZVByb21pc2UsIFZpZGVvUHJvbWlzZSwgUG9zdGVyUHJvbWlzZSwgY2FjaGUgYXMgX2NhY2hlIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXZpZXdDYW1lcmEgZXh0ZW5kcyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmFcbntcblx0Y29uc3RydWN0b3IoZm9jdXMsIHZpZXdTaXplLCBsb29rRGlyZWN0aW9uKVxuXHR7XG5cdFx0c3VwZXIoLTEsIDEsIDEsIC0xLCAuMSwgNDAwKTtcblxuXHRcdGxldCBzZXR0aW5ncyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGlvcmFtYVZpZXdTZXR0aW5ncycpO1xuXHRcdGlmKHNldHRpbmdzKXtcblx0XHRcdHNldHRpbmdzID0gSlNPTi5wYXJzZShzZXR0aW5ncyk7XG5cdFx0XHRpZighZm9jdXMpXG5cdFx0XHRcdGZvY3VzID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoc2V0dGluZ3MuZm9jdXMpO1xuXHRcdFx0aWYoIXZpZXdTaXplKVxuXHRcdFx0XHR2aWV3U2l6ZSA9IHNldHRpbmdzLnZpZXdTaXplO1xuXHRcdFx0aWYoIWxvb2tEaXJlY3Rpb24pXG5cdFx0XHRcdGxvb2tEaXJlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheShzZXR0aW5ncy5sb29rRGlyZWN0aW9uKTtcblx0XHR9XG5cblx0XHR0aGlzLl92aWV3U2l6ZSA9IHZpZXdTaXplIHx8IDQwO1xuXHRcdHRoaXMuX2ZvY3VzID0gZm9jdXMgfHwgbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0XHR0aGlzLl9sb29rRGlyZWN0aW9uID0gbG9va0RpcmVjdGlvbiB8fCBuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApO1xuXHRcdHRoaXMuZ3JpZEhlbHBlciA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKDMwMCwgMSk7XG5cdFx0dGhpcy5ncmlkSGVscGVyLnVzZXJEYXRhID0ge2FsdHNwYWNlOiB7Y29sbGlkZXI6IHtlbmFibGVkOiBmYWxzZX19fTtcblx0XHQvL3RoaXMuZ3JpZEhlbHBlci5xdWF0ZXJuaW9uLnNldEZyb21Vbml0VmVjdG9ycyggbmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSwgdGhpcy5fbG9va0RpcmVjdGlvbiApO1xuXHR9XG5cblx0Z2V0IHZpZXdTaXplKCl7XG5cdFx0cmV0dXJuIHRoaXMuX3ZpZXdTaXplO1xuXHR9XG5cdHNldCB2aWV3U2l6ZSh2YWwpe1xuXHRcdHRoaXMuX3ZpZXdTaXplID0gdmFsO1xuXHRcdHRoaXMucmVjb21wdXRlVmlld3BvcnQoKTtcblx0fVxuXG5cdGdldCBmb2N1cygpe1xuXHRcdHJldHVybiB0aGlzLl9mb2N1cztcblx0fVxuXHRzZXQgZm9jdXModmFsKXtcblx0XHR0aGlzLl9mb2N1cy5jb3B5KHZhbCk7XG5cdFx0dGhpcy5yZWNvbXB1dGVWaWV3cG9ydCgpO1xuXHR9XG5cblx0Z2V0IGxvb2tEaXJlY3Rpb24oKXtcblx0XHRyZXR1cm4gdGhpcy5fbG9va0RpcmVjdGlvbjtcblx0fVxuXHRzZXQgbG9va0RpcmVjdGlvbih2YWwpe1xuXHRcdHRoaXMuX2xvb2tEaXJlY3Rpb24uY29weSh2YWwpO1xuXHRcdHRoaXMucmVjb21wdXRlVmlld3BvcnQoKTtcblx0fVxuXG5cdHJlZ2lzdGVySG9va3MocmVuZGVyZXIpXG5cdHtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0c2VsZi5yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG5cdFx0Ly8gc2V0IHN0eWxlcyBvbiB0aGUgcGFnZSwgc28gdGhlIHByZXZpZXcgd29ya3MgcmlnaHRcblx0XHRkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuXHRcdGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuXHRcdGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gJzAnO1xuXHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuXHRcdHZhciBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXHRcdGluZm8uaW5uZXJIVE1MID0gWydNaWRkbGUgY2xpY2sgYW5kIGRyYWcgdG8gcGFuJywgJ01vdXNlIHdoZWVsIHRvIHpvb20nLCAnQXJyb3cga2V5cyB0byByb3RhdGUnXS5qb2luKCc8YnIvPicpO1xuXHRcdE9iamVjdC5hc3NpZ24oaW5mby5zdHlsZSwge1xuXHRcdFx0cG9zaXRpb246ICdmaXhlZCcsXG5cdFx0XHR0b3A6ICcxMHB4Jyxcblx0XHRcdGxlZnQ6ICcxMHB4Jyxcblx0XHRcdG1hcmdpbjogMFxuXHRcdH0pO1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5mbyk7XG5cblx0XHQvLyByZXNpemUgdGhlIHByZXZpZXcgY2FudmFzIHdoZW4gd2luZG93IHJlc2l6ZXNcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZSA9PiBzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCkpO1xuXHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcblxuXHRcdC8vIG1pZGRsZSBjbGljayBhbmQgZHJhZyB0byBwYW4gdmlld1xuXHRcdHZhciBkcmFnU3RhcnQgPSBudWxsLCBmb2N1c1N0YXJ0ID0gbnVsbDtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XG5cdFx0XHRpZihlLmJ1dHRvbiA9PT0gMSl7XG5cdFx0XHRcdGRyYWdTdGFydCA9IHt4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WX07XG5cdFx0XHRcdGZvY3VzU3RhcnQgPSBzZWxmLl9mb2N1cy5jbG9uZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZSA9PiB7XG5cdFx0XHRpZihlLmJ1dHRvbiA9PT0gMSl7XG5cdFx0XHRcdGRyYWdTdGFydCA9IG51bGw7XG5cdFx0XHRcdGZvY3VzU3RhcnQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcblx0XHRcdGlmKGRyYWdTdGFydClcblx0XHRcdHtcblx0XHRcdFx0bGV0IHtjbGllbnRXaWR0aDogdywgY2xpZW50SGVpZ2h0OiBofSA9IGRvY3VtZW50LmJvZHk7XG5cdFx0XHRcdGxldCBwaXhlbHNQZXJNZXRlciA9IE1hdGguc3FydCh3KncraCpoKSAvIHNlbGYuX3ZpZXdTaXplO1xuXHRcdFx0XHRsZXQgZHggPSBlLmNsaWVudFggLSBkcmFnU3RhcnQueCwgZHkgPSBlLmNsaWVudFkgLSBkcmFnU3RhcnQueTtcblx0XHRcdFx0bGV0IHJpZ2h0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5jcm9zc1ZlY3RvcnMoc2VsZi5fbG9va0RpcmVjdGlvbiwgc2VsZi51cCk7XG5cblx0XHRcdFx0c2VsZi5fZm9jdXMuY29weShmb2N1c1N0YXJ0KVxuXHRcdFx0XHRcdC5hZGQoc2VsZi51cC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGR5L3BpeGVsc1Blck1ldGVyKSlcblx0XHRcdFx0XHQuYWRkKHJpZ2h0Lm11bHRpcGx5U2NhbGFyKC1keC9waXhlbHNQZXJNZXRlcikpO1xuXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIHdoZWVsIHRvIHpvb21cblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBlID0+IHtcblx0XHRcdGlmKGUuZGVsdGFZIDwgMCl7XG5cdFx0XHRcdHNlbGYuX3ZpZXdTaXplICo9IDAuOTA7XG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoZS5kZWx0YVkgPiAwKXtcblx0XHRcdFx0c2VsZi5fdmlld1NpemUgKj0gMS4xO1xuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBhcnJvdyBrZXlzIHRvIHJvdGF0ZVxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XG5cdFx0XHRpZihlLmtleSA9PT0gJ0Fycm93RG93bicpe1xuXHRcdFx0XHRsZXQgcmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhzZWxmLl9sb29rRGlyZWN0aW9uLCBzZWxmLnVwKTtcblx0XHRcdFx0c2VsZi5fbG9va0RpcmVjdGlvbi5hcHBseUF4aXNBbmdsZShyaWdodCwgTWF0aC5QSS8yKTtcblx0XHRcdFx0Ly9zZWxmLmdyaWRIZWxwZXIucm90YXRlT25BeGlzKHJpZ2h0LCBNYXRoLlBJLzIpO1xuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKGUua2V5ID09PSAnQXJyb3dVcCcpe1xuXHRcdFx0XHRsZXQgcmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhzZWxmLl9sb29rRGlyZWN0aW9uLCBzZWxmLnVwKTtcblx0XHRcdFx0c2VsZi5fbG9va0RpcmVjdGlvbi5hcHBseUF4aXNBbmdsZShyaWdodCwgLU1hdGguUEkvMik7XG5cdFx0XHRcdC8vc2VsZi5ncmlkSGVscGVyLnJvdGF0ZU9uQXhpcyhyaWdodCwgLU1hdGguUEkvMik7XG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcblxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZihlLmtleSA9PT0gJ0Fycm93TGVmdCcpe1xuXHRcdFx0XHRzZWxmLl9sb29rRGlyZWN0aW9uLmFwcGx5QXhpc0FuZ2xlKHNlbGYudXAsIC1NYXRoLlBJLzIpO1xuXHRcdFx0XHQvL3NlbGYuZ3JpZEhlbHBlci5yb3RhdGVPbkF4aXMoc2VsZi51cCwgLU1hdGguUEkvMik7XG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoZS5rZXkgPT09ICdBcnJvd1JpZ2h0Jyl7XG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUoc2VsZi51cCwgTWF0aC5QSS8yKTtcblx0XHRcdFx0Ly9zZWxmLmdyaWRIZWxwZXIucm90YXRlT25BeGlzKHNlbGYudXAsIE1hdGguUEkvMik7XG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHJlY29tcHV0ZVZpZXdwb3J0KClcblx0e1xuXHRcdHZhciB7Y2xpZW50V2lkdGg6IHcsIGNsaWVudEhlaWdodDogaH0gPSBkb2N1bWVudC5ib2R5O1xuXG5cdFx0Ly8gcmVzaXplIGNhbnZhc1xuXHRcdHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3LCBoKTtcblxuXHRcdC8vIGNvbXB1dGUgd2luZG93IGRpbWVuc2lvbnMgZnJvbSB2aWV3IHNpemVcblx0XHR2YXIgcmF0aW8gPSB3L2g7XG5cdFx0dmFyIGhlaWdodCA9IE1hdGguc3FydCggKHRoaXMuX3ZpZXdTaXplKnRoaXMuX3ZpZXdTaXplKSAvIChyYXRpbypyYXRpbyArIDEpICk7XG5cdFx0dmFyIHdpZHRoID0gcmF0aW8gKiBoZWlnaHQ7XG5cblx0XHQvLyBzZXQgZnJ1c3RydW0gZWRnZXNcblx0XHR0aGlzLmxlZnQgPSAtd2lkdGgvMjtcblx0XHR0aGlzLnJpZ2h0ID0gd2lkdGgvMjtcblx0XHR0aGlzLnRvcCA9IGhlaWdodC8yO1xuXHRcdHRoaXMuYm90dG9tID0gLWhlaWdodC8yO1xuXG5cdFx0dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cblx0XHQvLyB1cGRhdGUgcG9zaXRpb25cblx0XHR0aGlzLnBvc2l0aW9uLmNvcHkodGhpcy5fZm9jdXMpLnN1YiggdGhpcy5fbG9va0RpcmVjdGlvbi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKDIwMCkgKTtcblx0XHRpZiggTWF0aC5hYnMoIHRoaXMuX2xvb2tEaXJlY3Rpb24ubm9ybWFsaXplKCkuZG90KG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCkpICkgPT09IDEgKVxuXHRcdFx0dGhpcy51cC5zZXQoMCwwLDEpOyAvLyBpZiB3ZSdyZSBsb29raW5nIGRvd24gdGhlIFkgYXhpc1xuXHRcdGVsc2Vcblx0XHRcdHRoaXMudXAuc2V0KDAsMSwwKTtcblx0XHR0aGlzLmxvb2tBdCggdGhpcy5fZm9jdXMgKTtcblxuXHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGlvcmFtYVZpZXdTZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdGZvY3VzOiB0aGlzLl9mb2N1cy50b0FycmF5KCksXG5cdFx0XHR2aWV3U2l6ZTogdGhpcy5fdmlld1NpemUsXG5cdFx0XHRsb29rRGlyZWN0aW9uOiB0aGlzLl9sb29rRGlyZWN0aW9uLnRvQXJyYXkoKVxuXHRcdH0pKTtcblx0fVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgKiBhcyBMb2FkZXJzIGZyb20gJy4vbG9hZGVycyc7XG5pbXBvcnQgUHJldmlld0NhbWVyYSBmcm9tICcuL2NhbWVyYSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpb3JhbWFcbntcblx0Y29uc3RydWN0b3Ioe2JnQ29sb3I9MHhhYWFhYWEsIGdyaWRPZmZzZXQ9WzAsMCwwXSwgZnVsbHNwYWNlPWZhbHNlfSA9IHt9KVxuXHR7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHNlbGYuX2NhY2hlID0gTG9hZGVycy5fY2FjaGU7XG5cdFx0c2VsZi5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXG5cdFx0Ly8gc2V0IHVwIHJlbmRlcmVyIGFuZCBzY2FsZVxuXHRcdGlmKGFsdHNwYWNlLmluQ2xpZW50KVxuXHRcdHtcblx0XHRcdHNlbGYucmVuZGVyZXIgPSBhbHRzcGFjZS5nZXRUaHJlZUpTUmVuZGVyZXIoKTtcblx0XHRcdHNlbGYuX2VudlByb21pc2UgPSBQcm9taXNlLmFsbChbYWx0c3BhY2UuZ2V0RW5jbG9zdXJlKCksIGFsdHNwYWNlLmdldFNwYWNlKCldKVxuXHRcdFx0LnRoZW4oKFtlLCBzXSkgPT4ge1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGFkanVzdFNjYWxlKCl7XG5cdFx0XHRcdFx0c2VsZi5zY2VuZS5zY2FsZS5zZXRTY2FsYXIoZS5waXhlbHNQZXJNZXRlcik7XG5cdFx0XHRcdFx0c2VsZi5lbnYgPSBPYmplY3QuYXNzaWduKHt9LCBlLCBzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhZGp1c3RTY2FsZSgpO1xuXG5cdFx0XHRcdGlmKGZ1bGxzcGFjZSl7XG5cdFx0XHRcdFx0c2VsZi5fZnNQcm9taXNlID0gZS5yZXF1ZXN0RnVsbHNwYWNlKCkuY2F0Y2goKGUpID0+IGNvbnNvbGUud2FybignUmVxdWVzdCBmb3IgZnVsbHNwYWNlIGRlbmllZCcpKTtcblx0XHRcdFx0XHRlLmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzcGFjZWNoYW5nZScsIGFkanVzdFNjYWxlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0c2VsZi5fZnNQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdC8vIHNldCB1cCBwcmV2aWV3IHJlbmRlcmVyLCBpbiBjYXNlIHdlJ3JlIG91dCBvZiB3b3JsZFxuXHRcdFx0c2VsZi5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG5cdFx0XHRzZWxmLnJlbmRlcmVyLnNldFNpemUoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpO1xuXHRcdFx0c2VsZi5yZW5kZXJlci5zZXRDbGVhckNvbG9yKCBiZ0NvbG9yICk7XG5cdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlbGYucmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cblx0XHRcdHNlbGYucHJldmlld0NhbWVyYSA9IG5ldyBQcmV2aWV3Q2FtZXJhKCk7XG5cdFx0XHRzZWxmLnByZXZpZXdDYW1lcmEuZ3JpZEhlbHBlci5wb3NpdGlvbi5mcm9tQXJyYXkoZ3JpZE9mZnNldCk7XG5cdFx0XHRzZWxmLnNjZW5lLmFkZChzZWxmLnByZXZpZXdDYW1lcmEsIHNlbGYucHJldmlld0NhbWVyYS5ncmlkSGVscGVyKTtcblx0XHRcdHNlbGYucHJldmlld0NhbWVyYS5yZWdpc3Rlckhvb2tzKHNlbGYucmVuZGVyZXIpO1xuXG5cdFx0XHQvLyBzZXQgdXAgY3Vyc29yIGVtdWxhdGlvblxuXHRcdFx0YWx0c3BhY2UudXRpbGl0aWVzLnNoaW1zLmN1cnNvci5pbml0KHNlbGYuc2NlbmUsIHNlbGYucHJldmlld0NhbWVyYSwge3JlbmRlcmVyOiBzZWxmLnJlbmRlcmVyfSk7XG5cblx0XHRcdC8vIHN0dWIgZW52aXJvbm1lbnRcblx0XHRcdHNlbGYuZW52ID0ge1xuXHRcdFx0XHRpbm5lcldpZHRoOiAxMDI0LFxuXHRcdFx0XHRpbm5lckhlaWdodDogMTAyNCxcblx0XHRcdFx0aW5uZXJEZXB0aDogMTAyNCxcblx0XHRcdFx0cGl4ZWxzUGVyTWV0ZXI6IGZ1bGxzcGFjZSA/IDEgOiAxMDI0LzMsXG5cdFx0XHRcdHNpZDogJ2Jyb3dzZXInLFxuXHRcdFx0XHRuYW1lOiAnYnJvd3NlcicsXG5cdFx0XHRcdHRlbXBsYXRlU2lkOiAnYnJvd3Nlcidcblx0XHRcdH07XG5cblx0XHRcdHNlbGYuX2VudlByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdHNlbGYuX2ZzUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdH1cblx0fVxuXG5cblx0c3RhcnQoLi4ubW9kdWxlcylcblx0e1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdC8vIGRldGVybWluZSB3aGljaCBhc3NldHMgYXJlbid0IHNoYXJlZFxuXHRcdHZhciBzaW5nbGV0b25zID0ge307XG5cdFx0bW9kdWxlcy5mb3JFYWNoKG1vZCA9PlxuXHRcdHtcblx0XHRcdGZ1bmN0aW9uIGNoZWNrQXNzZXQodXJsKXtcblx0XHRcdFx0aWYoc2luZ2xldG9uc1t1cmxdID09PSB1bmRlZmluZWQpIHNpbmdsZXRvbnNbdXJsXSA9IHRydWU7XG5cdFx0XHRcdGVsc2UgaWYoc2luZ2xldG9uc1t1cmxdID09PSB0cnVlKSBzaW5nbGV0b25zW3VybF0gPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdE9iamVjdC5rZXlzKG1vZC5hc3NldHMudGV4dHVyZXMgfHwge30pLm1hcChrID0+IG1vZC5hc3NldHMudGV4dHVyZXNba10pLmZvckVhY2goY2hlY2tBc3NldCk7XG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLm1vZGVscyB8fCB7fSkubWFwKGsgPT4gbW9kLmFzc2V0cy5tb2RlbHNba10pLmZvckVhY2goY2hlY2tBc3NldCk7XG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLnBvc3RlcnMgfHwge30pLm1hcChrID0+IG1vZC5hc3NldHMucG9zdGVyc1trXSkuZm9yRWFjaChjaGVja0Fzc2V0KTtcblx0XHR9KTtcblxuXHRcdC8vIGRldGVybWluZSBpZiB0aGUgdHJhY2tpbmcgc2tlbGV0b24gaXMgbmVlZGVkXG5cdFx0bGV0IG5lZWRzU2tlbGV0b24gPSBtb2R1bGVzLnJlZHVjZSgobnMsbSkgPT4gbnMgfHwgbS5uZWVkc1NrZWxldG9uLCBmYWxzZSk7XG5cdFx0aWYobmVlZHNTa2VsZXRvbiAmJiBhbHRzcGFjZS5pbkNsaWVudCl7XG5cdFx0XHRzZWxmLl9za2VsUHJvbWlzZSA9IGFsdHNwYWNlLmdldFRocmVlSlNUcmFja2luZ1NrZWxldG9uKCkudGhlbihza2VsID0+IHtcblx0XHRcdFx0c2VsZi5zY2VuZS5hZGQoc2tlbCk7XG5cdFx0XHRcdHNlbGYuZW52LnNrZWwgPSBza2VsO1xuXHRcdFx0XHRzZWxmLmVudiA9IE9iamVjdC5mcmVlemUoc2VsZi5lbnYpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0c2VsZi5lbnYgPSBPYmplY3QuZnJlZXplKHNlbGYuZW52KTtcblx0XHRcdHNlbGYuX3NrZWxQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0fVxuXG5cdFx0UHJvbWlzZS5hbGwoW3NlbGYuX2VudlByb21pc2UsIHNlbGYuX2ZzUHJvbWlzZSwgc2VsZi5fc2tlbFByb21pc2VdKS50aGVuKCgpID0+XG5cdFx0e1xuXHRcdFx0Ly8gY29uc3RydWN0IGRpb3JhbWFzXG5cdFx0XHRtb2R1bGVzLmZvckVhY2goZnVuY3Rpb24obW9kdWxlKVxuXHRcdFx0e1xuXHRcdFx0XHRsZXQgcm9vdCA9IG51bGw7XG5cblx0XHRcdFx0aWYobW9kdWxlIGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0Qpe1xuXHRcdFx0XHRcdHJvb3QgPSBtb2R1bGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cm9vdCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuXG5cdFx0XHRcdFx0Ly8gaGFuZGxlIGFic29sdXRlIHBvc2l0aW9uaW5nXG5cdFx0XHRcdFx0aWYobW9kdWxlLnRyYW5zZm9ybSl7XG5cdFx0XHRcdFx0XHRyb290Lm1hdHJpeC5mcm9tQXJyYXkobW9kdWxlLnRyYW5zZm9ybSk7XG5cdFx0XHRcdFx0XHRyb290Lm1hdHJpeC5kZWNvbXBvc2Uocm9vdC5wb3NpdGlvbiwgcm9vdC5xdWF0ZXJuaW9uLCByb290LnNjYWxlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRpZihtb2R1bGUucG9zaXRpb24pe1xuXHRcdFx0XHRcdFx0XHRyb290LnBvc2l0aW9uLmZyb21BcnJheShtb2R1bGUucG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYobW9kdWxlLnJvdGF0aW9uKXtcblx0XHRcdFx0XHRcdFx0cm9vdC5yb3RhdGlvbi5mcm9tQXJyYXkobW9kdWxlLnJvdGF0aW9uKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBoYW5kbGUgcmVsYXRpdmUgcG9zaXRpb25pbmdcblx0XHRcdFx0aWYobW9kdWxlLnZlcnRpY2FsQWxpZ24pe1xuXHRcdFx0XHRcdGxldCBoYWxmSGVpZ2h0ID0gc2VsZi5lbnYuaW5uZXJIZWlnaHQvKDIqc2VsZi5lbnYucGl4ZWxzUGVyTWV0ZXIpO1xuXHRcdFx0XHRcdHN3aXRjaChtb2R1bGUudmVydGljYWxBbGlnbil7XG5cdFx0XHRcdFx0Y2FzZSAndG9wJzpcblx0XHRcdFx0XHRcdHJvb3QudHJhbnNsYXRlWShoYWxmSGVpZ2h0KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2JvdHRvbSc6XG5cdFx0XHRcdFx0XHRyb290LnRyYW5zbGF0ZVkoLWhhbGZIZWlnaHQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbWlkZGxlJzpcblx0XHRcdFx0XHRcdC8vIGRlZmF1bHRcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ0ludmFsaWQgdmFsdWUgZm9yIFwidmVydGljYWxBbGlnblwiIC0gJywgbW9kdWxlLnZlcnRpY2FsQWxpZ24pO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2VsZi5zY2VuZS5hZGQocm9vdCk7XG5cblx0XHRcdFx0aWYoc2VsZi5wcmV2aWV3Q2FtZXJhKXtcblx0XHRcdFx0XHRsZXQgYXhpcyA9IG5ldyBUSFJFRS5BeGlzSGVscGVyKDEpO1xuXHRcdFx0XHRcdGF4aXMudXNlckRhdGEuYWx0c3BhY2UgPSB7Y29sbGlkZXI6IHtlbmFibGVkOiBmYWxzZX19O1xuXHRcdFx0XHRcdHJvb3QuYWRkKGF4aXMpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2VsZi5sb2FkQXNzZXRzKG1vZHVsZS5hc3NldHMsIHNpbmdsZXRvbnMpLnRoZW4oKHJlc3VsdHMpID0+IHtcblx0XHRcdFx0XHRtb2R1bGUuaW5pdGlhbGl6ZShzZWxmLmVudiwgcm9vdCwgcmVzdWx0cyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBzdGFydCBhbmltYXRpbmdcblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIGFuaW1hdGUodGltZXN0YW1wKVxuXHRcdHtcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG5cdFx0XHRzZWxmLnNjZW5lLnVwZGF0ZUFsbEJlaGF2aW9ycygpO1xuXHRcdFx0aWYod2luZG93LlRXRUVOKSBUV0VFTi51cGRhdGUoKTtcblx0XHRcdHNlbGYucmVuZGVyZXIucmVuZGVyKHNlbGYuc2NlbmUsIHNlbGYucHJldmlld0NhbWVyYSk7XG5cdFx0fSk7XG5cdH1cblxuXHRsb2FkQXNzZXRzKG1hbmlmZXN0LCBzaW5nbGV0b25zKVxuXHR7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XG5cdFx0e1xuXHRcdFx0Ly8gcG9wdWxhdGUgY2FjaGVcblx0XHRcdFByb21pc2UuYWxsKFtcblxuXHRcdFx0XHQvLyBwb3B1bGF0ZSBtb2RlbCBjYWNoZVxuXHRcdFx0XHQuLi5PYmplY3Qua2V5cyhtYW5pZmVzdC5tb2RlbHMgfHwge30pLm1hcChpZCA9PiBMb2FkZXJzLk1vZGVsUHJvbWlzZShtYW5pZmVzdC5tb2RlbHNbaWRdKSksXG5cblx0XHRcdFx0Ly8gcG9wdWxhdGUgZXhwbGljaXQgdGV4dHVyZSBjYWNoZVxuXHRcdFx0XHQuLi5PYmplY3Qua2V5cyhtYW5pZmVzdC50ZXh0dXJlcyB8fCB7fSkubWFwKGlkID0+IExvYWRlcnMuVGV4dHVyZVByb21pc2UobWFuaWZlc3QudGV4dHVyZXNbaWRdKSksXG5cblx0XHRcdFx0Ly8gZ2VuZXJhdGUgYWxsIHBvc3RlcnNcblx0XHRcdFx0Li4uT2JqZWN0LmtleXMobWFuaWZlc3QucG9zdGVycyB8fCB7fSkubWFwKGlkID0+IExvYWRlcnMuUG9zdGVyUHJvbWlzZShtYW5pZmVzdC5wb3N0ZXJzW2lkXSkpXG5cdFx0XHRdKVxuXG5cdFx0XHQudGhlbigoKSA9PlxuXHRcdFx0e1xuXHRcdFx0XHQvLyBwb3B1bGF0ZSBwYXlsb2FkIGZyb20gY2FjaGVcblx0XHRcdFx0dmFyIHBheWxvYWQgPSB7bW9kZWxzOiB7fSwgdGV4dHVyZXM6IHt9LCBwb3N0ZXJzOiB7fX07XG5cblx0XHRcdFx0Zm9yKGxldCBpIGluIG1hbmlmZXN0Lm1vZGVscyl7XG5cdFx0XHRcdFx0bGV0IHVybCA9IG1hbmlmZXN0Lm1vZGVsc1tpXTtcblx0XHRcdFx0XHRsZXQgdCA9IExvYWRlcnMuX2NhY2hlLm1vZGVsc1t1cmxdO1xuXHRcdFx0XHRcdHBheWxvYWQubW9kZWxzW2ldID0gdCA/IHNpbmdsZXRvbnNbdXJsXSA/IHQgOiB0LmNsb25lKCkgOiBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yKGxldCBpIGluIG1hbmlmZXN0LnRleHR1cmVzKXtcblx0XHRcdFx0XHRsZXQgdXJsID0gbWFuaWZlc3QudGV4dHVyZXNbaV07XG5cdFx0XHRcdFx0bGV0IHQgPSBMb2FkZXJzLl9jYWNoZS50ZXh0dXJlc1t1cmxdO1xuXHRcdFx0XHRcdHBheWxvYWQudGV4dHVyZXNbaV0gPSB0ID8gc2luZ2xldG9uc1t1cmxdID8gdCA6IHQuY2xvbmUoKSA6IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IobGV0IGkgaW4gbWFuaWZlc3QucG9zdGVycyl7XG5cdFx0XHRcdFx0bGV0IHVybCA9IG1hbmlmZXN0LnBvc3RlcnNbaV07XG5cdFx0XHRcdFx0bGV0IHQgPSBMb2FkZXJzLl9jYWNoZS5wb3N0ZXJzW3VybF07XG5cdFx0XHRcdFx0cGF5bG9hZC5wb3N0ZXJzW2ldID0gdCA/IHNpbmdsZXRvbnNbdXJsXSA/IHQgOiB0LmNsb25lKCkgOiBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzb2x2ZShwYXlsb2FkKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUuc3RhY2spKTtcblx0XHR9KTtcblx0fVxuXG59O1xuIl0sIm5hbWVzIjpbIk1vZGVsUHJvbWlzZSIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2FjaGUiLCJtb2RlbHMiLCJ0ZXN0IiwiVEhSRUUiLCJnbFRGTG9hZGVyIiwibGV0IiwibG9hZGVyIiwibG9hZCIsInJlc3VsdCIsInNjZW5lIiwiY2hpbGRyZW4iLCJHTFRGTG9hZGVyIiwibWF0cml4QXV0b1VwZGF0ZSIsImNvbnNvbGUiLCJlcnJvciIsIkNvbGxhZGFMb2FkZXIiLCJUZXh0dXJlUHJvbWlzZSIsInRleHR1cmVzIiwiVGV4dHVyZUxvYWRlciIsInRleHR1cmUiLCJQb3N0ZXJQcm9taXNlIiwicG9zdGVycyIsInRoZW4iLCJ0ZXgiLCJnZW8iLCJyYXRpbyIsImltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXQiLCJNZXNoQmFzaWNNYXRlcmlhbCIsIm1hcCIsInNpZGUiLCJEb3VibGVTaWRlIiwiUGxhbmVHZW9tZXRyeSIsIk1lc2giLCJQcmV2aWV3Q2FtZXJhIiwiZm9jdXMiLCJ2aWV3U2l6ZSIsImxvb2tEaXJlY3Rpb24iLCJzdXBlciIsInRoaXMiLCJzZXR0aW5ncyIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJWZWN0b3IzIiwiZnJvbUFycmF5IiwiX3ZpZXdTaXplIiwiX2ZvY3VzIiwiX2xvb2tEaXJlY3Rpb24iLCJncmlkSGVscGVyIiwiR3JpZEhlbHBlciIsInVzZXJEYXRhIiwiYWx0c3BhY2UiLCJjb2xsaWRlciIsImVuYWJsZWQiLCJwcm90b3R5cGVBY2Nlc3NvcnMiLCJ2YWwiLCJyZWNvbXB1dGVWaWV3cG9ydCIsImNvcHkiLCJyZWdpc3Rlckhvb2tzIiwicmVuZGVyZXIiLCJzZWxmIiwiZG9jdW1lbnQiLCJib2R5IiwicGFyZW50RWxlbWVudCIsInN0eWxlIiwibWFyZ2luIiwib3ZlcmZsb3ciLCJpbmZvIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImpvaW4iLCJPYmplY3QiLCJhc3NpZ24iLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZHJhZ1N0YXJ0IiwiZm9jdXNTdGFydCIsImJ1dHRvbiIsIngiLCJjbGllbnRYIiwieSIsImNsaWVudFkiLCJjbG9uZSIsInciLCJoIiwicGl4ZWxzUGVyTWV0ZXIiLCJNYXRoIiwic3FydCIsImR4IiwiZHkiLCJyaWdodCIsImNyb3NzVmVjdG9ycyIsInVwIiwiYWRkIiwibXVsdGlwbHlTY2FsYXIiLCJkZWx0YVkiLCJrZXkiLCJhcHBseUF4aXNBbmdsZSIsIlBJIiwic2V0U2l6ZSIsImJvdHRvbSIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJzdWIiLCJhYnMiLCJub3JtYWxpemUiLCJkb3QiLCJzZXQiLCJsb29rQXQiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidG9BcnJheSIsIk9ydGhvZ3JhcGhpY0NhbWVyYSIsIkRpb3JhbWEiLCJyZWYiLCJfY2FjaGUiLCJMb2FkZXJzLl9jYWNoZSIsIlNjZW5lIiwiaW5DbGllbnQiLCJnZXRUaHJlZUpTUmVuZGVyZXIiLCJfZW52UHJvbWlzZSIsImFsbCIsImdldEVuY2xvc3VyZSIsImdldFNwYWNlIiwiYWRqdXN0U2NhbGUiLCJzY2FsZSIsInNldFNjYWxhciIsImVudiIsInMiLCJmdWxsc3BhY2UiLCJfZnNQcm9taXNlIiwicmVxdWVzdEZ1bGxzcGFjZSIsImNhdGNoIiwid2FybiIsIldlYkdMUmVuZGVyZXIiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInNldENsZWFyQ29sb3IiLCJiZ0NvbG9yIiwiZG9tRWxlbWVudCIsInByZXZpZXdDYW1lcmEiLCJncmlkT2Zmc2V0IiwidXRpbGl0aWVzIiwic2hpbXMiLCJjdXJzb3IiLCJpbml0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiaW5uZXJEZXB0aCIsInNpZCIsIm5hbWUiLCJ0ZW1wbGF0ZVNpZCIsInN0YXJ0Iiwic2luZ2xldG9ucyIsIm1vZHVsZXMiLCJmb3JFYWNoIiwibW9kIiwiY2hlY2tBc3NldCIsInVuZGVmaW5lZCIsImtleXMiLCJhc3NldHMiLCJrIiwibmVlZHNTa2VsZXRvbiIsInJlZHVjZSIsIm5zIiwibSIsIl9za2VsUHJvbWlzZSIsImdldFRocmVlSlNUcmFja2luZ1NrZWxldG9uIiwic2tlbCIsImZyZWV6ZSIsIm1vZHVsZSIsInJvb3QiLCJPYmplY3QzRCIsInRyYW5zZm9ybSIsIm1hdHJpeCIsImRlY29tcG9zZSIsInF1YXRlcm5pb24iLCJyb3RhdGlvbiIsInZlcnRpY2FsQWxpZ24iLCJoYWxmSGVpZ2h0IiwidHJhbnNsYXRlWSIsImF4aXMiLCJBeGlzSGVscGVyIiwibG9hZEFzc2V0cyIsInJlc3VsdHMiLCJpbml0aWFsaXplIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0ZSIsInRpbWVzdGFtcCIsInVwZGF0ZUFsbEJlaGF2aW9ycyIsIlRXRUVOIiwidXBkYXRlIiwicmVuZGVyIiwibWFuaWZlc3QiLCJpZCIsIkxvYWRlcnMuTW9kZWxQcm9taXNlIiwiTG9hZGVycy5UZXh0dXJlUHJvbWlzZSIsIkxvYWRlcnMuUG9zdGVyUHJvbWlzZSIsInBheWxvYWQiLCJpIiwidCIsInN0YWNrIl0sIm1hcHBpbmdzIjoibUNBSUEsU0FBU0EsR0FBYUMsR0FFckIsTUFBTyxJQUFJQyxTQUFRLFNBQUNDLEVBQVNDLEdBRTVCLEdBQUdDLEVBQU1DLE9BQU9MLEdBQ2YsTUFBT0UsR0FBUUUsRUFBTUMsT0FBT0wsR0FJeEIsSUFBRyxXQUFXTSxLQUFLTixHQUN2QixHQUFHTyxNQUFNQyxXQUFXLENBQ25CQyxHQUFJQyxHQUFTLEdBQUlILE9BQU1DLFVBQ3ZCRSxHQUFPQyxLQUFLWCxFQUFLLFNBQUNZLEdBRWpCLE1BREFSLEdBQU1DLE9BQU9MLEdBQU9ZLEVBQU9DLE1BQU1DLFNBQVMsR0FBR0EsU0FBUyxHQUMvQ1osRUFBUUUsRUFBTUMsT0FBT0wsVUFHekIsSUFBR08sTUFBTVEsV0FBVyxDQUN4Qk4sR0FBSUMsR0FBUyxHQUFJSCxPQUFNUSxVQUN2QkwsR0FBT0MsS0FBS1gsRUFBSyxTQUFBWSxHQVNoQixNQVJBUixHQUFNQyxPQUFPTCxHQUFPWSxFQUFPQyxNQUFNQyxTQUFTLEdBQzFDVixFQUFNQyxPQUFPTCxHQUFLZ0Isa0JBQW1CLEVBTzlCZCxFQUFRRSxFQUFNQyxPQUFPTCxLQUMxQixhQUFVRyxPQUdiYyxTQUFRQyxNQUFNLDJCQUEyQmxCLG1CQUN6Q0csUUFJRyxJQUFHLFVBQVVHLEtBQUtOLEdBQ3RCLEdBQUdPLE1BQU1ZLGNBQWMsQ0FDdEJWLEdBQUlDLEdBQVMsR0FBSUgsT0FBTVksYUFDdkJULEdBQU9DLEtBQUtYLEVBQUssU0FBQVks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
