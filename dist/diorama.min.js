var Diorama=function(){"use strict";function e(e){return new Promise(function(t,r){if(o.models[e])return t(o.models[e]);if(/\.gltf$/i.test(e))if(THREE.glTFLoader){var n=new THREE.glTFLoader;n.load(e,function(r){return o.models[e]=r.scene.children[0].children[0],t(o.models[e])})}else if(THREE.GLTFLoader){var i=new THREE.GLTFLoader;i.load(e,function(r){return o.models[e]=r.scene.children[0],o.models[e].matrixAutoUpdate=!0,t(o.models[e])},function(){},r)}else console.error('glTF loader not found. "'+e+'" not loaded.'),r();else if(/\.dae$/i.test(e))if(THREE.ColladaLoader){var s=new THREE.ColladaLoader;s.load(e,function(r){return o.models[e]=r.scene.children[0],t(r.scene.children[0])},null,r)}else console.error('Collada loader not found. "'+e+'" not loaded.'),r()})}function t(e){return new Promise(function(t,r){if(o.textures[e])return t(o.textures[e]);var n=new THREE.TextureLoader;n.load(e,function(r){return o.textures[e]=r,t(r)},null,r)})}function r(e){return new Promise(function(r,n){return o.posters[e]?r(o.posters[e]):new t(e).then(function(t){var n,i=t.image.width/t.image.height,s=new THREE.MeshBasicMaterial({map:t,side:THREE.DoubleSide});return n=i>1?new THREE.PlaneGeometry(1,1/i):new THREE.PlaneGeometry(i,1),o.posters[e]=new THREE.Mesh(n,s),r(o.posters[e])})})}var o={models:{},textures:{},posters:{}},n=function(e){function t(t,r,o){e.call(this,-1,1,1,-1,.1,400);var n=window.localStorage.getItem("dioramaViewSettings");n&&(n=JSON.parse(n),t||(t=(new THREE.Vector3).fromArray(n.focus)),r||(r=n.viewSize),o||(o=(new THREE.Vector3).fromArray(n.lookDirection))),this._viewSize=r||40,this._focus=t||new THREE.Vector3,this._lookDirection=o||new THREE.Vector3(0,-1,0),this.gridHelper=new THREE.GridHelper(300,1),this.gridHelper.userData={altspace:{collider:{enabled:!1}}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={viewSize:{},focus:{},lookDirection:{}};return r.viewSize.get=function(){return this._viewSize},r.viewSize.set=function(e){this._viewSize=e,this.recomputeViewport()},r.focus.get=function(){return this._focus},r.focus.set=function(e){this._focus.copy(e),this.recomputeViewport()},r.lookDirection.get=function(){return this._lookDirection},r.lookDirection.set=function(e){this._lookDirection.copy(e),this.recomputeViewport()},t.prototype.registerHooks=function(e){var t=this;t.renderer=e,document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var r=document.createElement("p");r.innerHTML=["Middle click and drag to pan","Mouse wheel to zoom","Arrow keys to rotate"].join("<br/>"),Object.assign(r.style,{position:"fixed",top:"10px",left:"10px",margin:0}),document.body.appendChild(r),window.addEventListener("resize",function(e){return t.recomputeViewport()}),t.recomputeViewport();var o=null,n=null;window.addEventListener("mousedown",function(e){1===e.button&&(o={x:e.clientX,y:e.clientY},n=t._focus.clone())}),window.addEventListener("mouseup",function(e){1===e.button&&(o=null,n=null)}),window.addEventListener("mousemove",function(e){if(o){var r=document.body,i=r.clientWidth,s=r.clientHeight,a=Math.sqrt(i*i+s*s)/t._viewSize,c=e.clientX-o.x,l=e.clientY-o.y,u=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._focus.copy(n).add(t.up.clone().multiplyScalar(l/a)).add(u.multiplyScalar(-c/a)),t.recomputeViewport()}}),window.addEventListener("wheel",function(e){e.deltaY<0?(t._viewSize*=.9,t.recomputeViewport()):e.deltaY>0&&(t._viewSize*=1.1,t.recomputeViewport())}),window.addEventListener("keydown",function(e){if("ArrowDown"===e.key){var r=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(r,Math.PI/2),t.recomputeViewport()}else if("ArrowUp"===e.key){var o=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(o,-Math.PI/2),t.recomputeViewport()}else"ArrowLeft"===e.key?(t._lookDirection.applyAxisAngle(t.up,-Math.PI/2),t.recomputeViewport()):"ArrowRight"===e.key&&(t._lookDirection.applyAxisAngle(t.up,Math.PI/2),t.recomputeViewport())})},t.prototype.recomputeViewport=function(){var e=document.body,t=e.clientWidth,r=e.clientHeight;this.renderer.setSize(t,r);var o=t/r,n=Math.sqrt(this._viewSize*this._viewSize/(o*o+1)),i=o*n;this.left=-i/2,this.right=i/2,this.top=n/2,this.bottom=-n/2,this.updateProjectionMatrix(),this.position.copy(this._focus).sub(this._lookDirection.clone().multiplyScalar(200)),1===Math.abs(this._lookDirection.normalize().dot(new THREE.Vector3(0,-1,0)))?this.up.set(0,0,1):this.up.set(0,1,0),this.lookAt(this._focus),window.localStorage.setItem("dioramaViewSettings",JSON.stringify({focus:this._focus.toArray(),viewSize:this._viewSize,lookDirection:this._lookDirection.toArray()}))},Object.defineProperties(t.prototype,r),t}(THREE.OrthographicCamera),i=function(e){void 0===e&&(e={});var t=e.bgColor;void 0===t&&(t=11184810);var r=e.gridOffset;void 0===r&&(r=[0,0,0]);var i=e.fullspace;void 0===i&&(i=!1);var s=this;s._cache=o,s.scene=new THREE.Scene,altspace.inClient?(s.renderer=altspace.getThreeJSRenderer(),s._envPromise=Promise.all([altspace.getEnclosure(),altspace.getSpace()]).then(function(e){function t(){s.scene.scale.setScalar(r.pixelsPerMeter),s.env=Object.assign({},r,o)}var r=e[0],o=e[1];t(),i?(s._fsPromise=r.requestFullspace().catch(function(e){return console.warn("Request for fullspace denied")}),r.addEventListener("fullspacechange",t)):s._fsPromise=Promise.resolve()})):(s.renderer=new THREE.WebGLRenderer,s.renderer.setSize(document.body.clientWidth,document.body.clientHeight),s.renderer.setClearColor(t),document.body.appendChild(s.renderer.domElement),s.previewCamera=new n,s.previewCamera.gridHelper.position.fromArray(r),s.scene.add(s.previewCamera,s.previewCamera.gridHelper),s.previewCamera.registerHooks(s.renderer),altspace.utilities.shims.cursor.init(s.scene,s.previewCamera,{renderer:s.renderer}),s.env={innerWidth:1024,innerHeight:1024,innerDepth:1024,pixelsPerMeter:i?1:1024/3,sid:"browser",name:"browser",templateSid:"browser"},s._envPromise=Promise.resolve(),s._fsPromise=Promise.resolve())};return i.prototype.start=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this,o={};e.forEach(function(e){function t(e){void 0===o[e]?o[e]=!0:o[e]===!0&&(o[e]=!1)}Object.keys(e.assets.textures||{}).map(function(t){return e.assets.textures[t]}).forEach(t),Object.keys(e.assets.models||{}).map(function(t){return e.assets.models[t]}).forEach(t),Object.keys(e.assets.posters||{}).map(function(t){return e.assets.posters[t]}).forEach(t)});var n=e.reduce(function(e,t){return e||t.needsSkeleton},!1);n&&altspace.inClient?r._skelPromise=Promise.all([altspace.getThreeJSTrackingSkeleton(),r._envPromise]).then(function(e){r.scene.add(e),r.env.skel=e,r.env=Object.freeze(r.env)}):(r._envPromise.then(function(){r.env=Object.freeze(r.env)}),r._skelPromise=Promise.resolve()),Promise.all([r._envPromise,r._fsPromise,r._skelPromise]).then(function(){e.forEach(function(e){var t=null;if(e instanceof THREE.Object3D?t=e:(t=new THREE.Object3D,e.transform?(t.matrix.fromArray(e.transform),t.matrix.decompose(t.position,t.quaternion,t.scale)):(e.position&&t.position.fromArray(e.position),e.rotation&&t.rotation.fromArray(e.rotation))),e.verticalAlign){var n=r.env.innerHeight/(2*r.env.pixelsPerMeter);switch(e.verticalAlign){case"top":t.translateY(n);break;case"bottom":t.translateY(-n);break;case"middle":break;default:console.warn('Invalid value for "verticalAlign" - ',e.verticalAlign)}}if(r.scene.add(t),r.previewCamera){var i=new THREE.AxisHelper(1);i.userData.altspace={collider:{enabled:!1}},t.add(i)}r.loadAssets(e.assets,o).then(function(o){e.initialize(r.env,t,o)})})}),window.requestAnimationFrame(function e(t){window.requestAnimationFrame(e),r.scene.updateAllBehaviors(),window.TWEEN&&TWEEN.update(),r.renderer.render(r.scene,r.previewCamera)})},i.prototype.loadAssets=function(n,i){return new Promise(function(s,a){Promise.all(Object.keys(n.models||{}).map(function(t){return e(n.models[t])}).concat(Object.keys(n.textures||{}).map(function(e){return t(n.textures[e])}),Object.keys(n.posters||{}).map(function(e){return r(n.posters[e])}))).then(function(){var e={models:{},textures:{},posters:{}};for(var t in n.models){var r=n.models[t],a=o.models[r];e.models[t]=a?i[r]?a:a.clone():null}for(var c in n.textures){var l=n.textures[c],u=o.textures[l];e.textures[c]=u?i[l]?u:u.clone():null}for(var d in n.posters){var p=n.posters[d],m=o.posters[p];e.posters[d]=m?i[p]?m:m.clone():null}s(e)}).catch(function(e){return console.error(e.stack)})})},i}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9sb2FkZXJzLmpzIiwiLi4vc3JjL2NhbWVyYS5qcyIsIi4uL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmxldCBjYWNoZSA9IHttb2RlbHM6IHt9LCB0ZXh0dXJlczoge30sIHBvc3RlcnM6IHt9fTtcclxuXHJcbmZ1bmN0aW9uIE1vZGVsUHJvbWlzZSh1cmwpXHJcbntcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuXHR7XHJcblx0XHRpZihjYWNoZS5tb2RlbHNbdXJsXSl7XHJcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOT1RFOiBnbFRGIGxvYWRlciBkb2VzIG5vdCBjYXRjaCBlcnJvcnNcclxuXHRcdGVsc2UgaWYoL1xcLmdsdGYkL2kudGVzdCh1cmwpKXtcclxuXHRcdFx0aWYoVEhSRUUuZ2xURkxvYWRlcil7XHJcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5nbFRGTG9hZGVyKCk7XHJcblx0XHRcdFx0bG9hZGVyLmxvYWQodXJsLCAocmVzdWx0KSA9PiB7XHJcblx0XHRcdFx0XHRjYWNoZS5tb2RlbHNbdXJsXSA9IHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKFRIUkVFLkdMVEZMb2FkZXIpe1xyXG5cdFx0XHRcdGxldCBsb2FkZXIgPSBuZXcgVEhSRUUuR0xURkxvYWRlcigpO1xyXG5cdFx0XHRcdGxvYWRlci5sb2FkKHVybCwgcmVzdWx0ID0+IHtcclxuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdID0gcmVzdWx0LnNjZW5lLmNoaWxkcmVuWzBdO1xyXG5cdFx0XHRcdFx0Y2FjaGUubW9kZWxzW3VybF0ubWF0cml4QXV0b1VwZGF0ZSA9IHRydWU7XHJcblx0XHRcdFx0XHQvKnJlc3VsdC5zY2VuZS50cmF2ZXJzZSgobykgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZihvLm1hdGVyaWFsICYmIG8ubWF0ZXJpYWwubWFwKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdmbGlwWScsIG8ubWF0ZXJpYWwubWFwLmZsaXBZKTtcclxuXHRcdFx0XHRcdH0pOyovXHJcblxyXG5cclxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdFx0XHR9LCAoKSA9PiB7fSwgcmVqZWN0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBnbFRGIGxvYWRlciBub3QgZm91bmQuIFwiJHt1cmx9XCIgbm90IGxvYWRlZC5gKTtcclxuXHRcdFx0XHRyZWplY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGVsc2UgaWYoL1xcLmRhZSQvaS50ZXN0KHVybCkpe1xyXG5cdFx0XHRpZihUSFJFRS5Db2xsYWRhTG9hZGVyKXtcclxuXHRcdFx0XHRsZXQgbG9hZGVyID0gbmV3IFRIUkVFLkNvbGxhZGFMb2FkZXIoKTtcclxuXHRcdFx0XHRsb2FkZXIubG9hZCh1cmwsIHJlc3VsdCA9PiB7XHJcblx0XHRcdFx0XHRjYWNoZS5tb2RlbHNbdXJsXSA9IHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXSlcclxuXHRcdFx0XHR9LCBudWxsLCByZWplY3QpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYENvbGxhZGEgbG9hZGVyIG5vdCBmb3VuZC4gXCIke3VybH1cIiBub3QgbG9hZGVkLmApO1xyXG5cdFx0XHRcdHJlamVjdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFRleHR1cmVQcm9taXNlKHVybCl7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcblx0e1xyXG5cdFx0aWYoY2FjaGUudGV4dHVyZXNbdXJsXSlcclxuXHRcdFx0cmV0dXJuIHJlc29sdmUoY2FjaGUudGV4dHVyZXNbdXJsXSk7XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XHJcblx0XHRcdGxvYWRlci5sb2FkKHVybCwgdGV4dHVyZSA9PiB7XHJcblx0XHRcdFx0Y2FjaGUudGV4dHVyZXNbdXJsXSA9IHRleHR1cmU7XHJcblx0XHRcdFx0cmV0dXJuIHJlc29sdmUodGV4dHVyZSk7XHJcblx0XHRcdH0sIG51bGwsIHJlamVjdCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbmNsYXNzIFZpZGVvUHJvbWlzZSBleHRlbmRzIFByb21pc2Uge1xyXG5cdGNvbnN0cnVjdG9yKHVybClcclxuXHR7XHJcblx0XHQvLyBzdGFydCBsb2FkZXJcclxuXHRcdHZhciB2aWRTcmMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xyXG5cdFx0dmlkU3JjLmF1dG9wbGF5ID0gdHJ1ZTtcclxuXHRcdHZpZFNyYy5sb29wID0gdHJ1ZTtcclxuXHRcdHZpZFNyYy5zcmMgPSB1cmw7XHJcblx0XHR2aWRTcmMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodmlkU3JjKTtcclxuXHJcblx0XHR2YXIgdGV4ID0gbmV3IFRIUkVFLlZpZGVvVGV4dHVyZSh2aWRTcmMpO1xyXG5cdFx0dGV4Lm1pbkZpbHRlciA9IFRIUkVFLkxpbmVhckZpbHRlcjtcclxuXHRcdHRleC5tYWdGaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcblx0XHR0ZXguZm9ybWF0ID0gVEhSRUUuUkdCRm9ybWF0O1xyXG5cclxuXHRcdC8vY2FjaGUudmlkZW9zW3VybF0gPSB0ZXg7XHJcblx0XHQvL3BheWxvYWQudmlkZW9zW2lkXSA9IGNhY2hlLnZpZGVvc1t1cmxdO1xyXG5cclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodGV4KTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFBvc3RlclByb21pc2UodXJsKXtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuXHR7XHJcblx0XHRpZihjYWNoZS5wb3N0ZXJzW3VybF0pXHJcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLnBvc3RlcnNbdXJsXSk7XHJcblx0XHRlbHNlIHJldHVybiAobmV3IFRleHR1cmVQcm9taXNlKHVybCkpLnRoZW4odGV4ID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRsZXQgcmF0aW8gPSB0ZXguaW1hZ2Uud2lkdGggLyB0ZXguaW1hZ2UuaGVpZ2h0O1xyXG5cdFx0XHRcdGxldCBnZW8sIG1hdCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7bWFwOiB0ZXgsIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGV9KTtcclxuXHJcblx0XHRcdFx0aWYocmF0aW8gPiAxKXtcclxuXHRcdFx0XHRcdGdlbyA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KDEsIDEvcmF0aW8pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdGdlbyA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KHJhdGlvLCAxKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNhY2hlLnBvc3RlcnNbdXJsXSA9IG5ldyBUSFJFRS5NZXNoKGdlbywgbWF0KTtcclxuXHRcdFx0XHRyZXR1cm4gcmVzb2x2ZShjYWNoZS5wb3N0ZXJzW3VybF0pO1xyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5leHBvcnQgeyBNb2RlbFByb21pc2UsIFRleHR1cmVQcm9taXNlLCBWaWRlb1Byb21pc2UsIFBvc3RlclByb21pc2UsIGNhY2hlIGFzIF9jYWNoZSB9O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmV2aWV3Q2FtZXJhIGV4dGVuZHMgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhXHJcbntcclxuXHRjb25zdHJ1Y3Rvcihmb2N1cywgdmlld1NpemUsIGxvb2tEaXJlY3Rpb24pXHJcblx0e1xyXG5cdFx0c3VwZXIoLTEsIDEsIDEsIC0xLCAuMSwgNDAwKTtcclxuXHJcblx0XHRsZXQgc2V0dGluZ3MgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rpb3JhbWFWaWV3U2V0dGluZ3MnKTtcclxuXHRcdGlmKHNldHRpbmdzKXtcclxuXHRcdFx0c2V0dGluZ3MgPSBKU09OLnBhcnNlKHNldHRpbmdzKTtcclxuXHRcdFx0aWYoIWZvY3VzKVxyXG5cdFx0XHRcdGZvY3VzID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoc2V0dGluZ3MuZm9jdXMpO1xyXG5cdFx0XHRpZighdmlld1NpemUpXHJcblx0XHRcdFx0dmlld1NpemUgPSBzZXR0aW5ncy52aWV3U2l6ZTtcclxuXHRcdFx0aWYoIWxvb2tEaXJlY3Rpb24pXHJcblx0XHRcdFx0bG9va0RpcmVjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KHNldHRpbmdzLmxvb2tEaXJlY3Rpb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3ZpZXdTaXplID0gdmlld1NpemUgfHwgNDA7XHJcblx0XHR0aGlzLl9mb2N1cyA9IGZvY3VzIHx8IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblx0XHR0aGlzLl9sb29rRGlyZWN0aW9uID0gbG9va0RpcmVjdGlvbiB8fCBuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApO1xyXG5cdFx0dGhpcy5ncmlkSGVscGVyID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoMzAwLCAxKTtcclxuXHRcdHRoaXMuZ3JpZEhlbHBlci51c2VyRGF0YSA9IHthbHRzcGFjZToge2NvbGxpZGVyOiB7ZW5hYmxlZDogZmFsc2V9fX07XHJcblx0XHQvL3RoaXMuZ3JpZEhlbHBlci5xdWF0ZXJuaW9uLnNldEZyb21Vbml0VmVjdG9ycyggbmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSwgdGhpcy5fbG9va0RpcmVjdGlvbiApO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZpZXdTaXplKCl7XHJcblx0XHRyZXR1cm4gdGhpcy5fdmlld1NpemU7XHJcblx0fVxyXG5cdHNldCB2aWV3U2l6ZSh2YWwpe1xyXG5cdFx0dGhpcy5fdmlld1NpemUgPSB2YWw7XHJcblx0XHR0aGlzLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0fVxyXG5cclxuXHRnZXQgZm9jdXMoKXtcclxuXHRcdHJldHVybiB0aGlzLl9mb2N1cztcclxuXHR9XHJcblx0c2V0IGZvY3VzKHZhbCl7XHJcblx0XHR0aGlzLl9mb2N1cy5jb3B5KHZhbCk7XHJcblx0XHR0aGlzLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0fVxyXG5cclxuXHRnZXQgbG9va0RpcmVjdGlvbigpe1xyXG5cdFx0cmV0dXJuIHRoaXMuX2xvb2tEaXJlY3Rpb247XHJcblx0fVxyXG5cdHNldCBsb29rRGlyZWN0aW9uKHZhbCl7XHJcblx0XHR0aGlzLl9sb29rRGlyZWN0aW9uLmNvcHkodmFsKTtcclxuXHRcdHRoaXMucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVySG9va3MocmVuZGVyZXIpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0c2VsZi5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuXHRcdC8vIHNldCBzdHlsZXMgb24gdGhlIHBhZ2UsIHNvIHRoZSBwcmV2aWV3IHdvcmtzIHJpZ2h0XHJcblx0XHRkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcblx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9ICcwJztcclxuXHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuXHJcblx0XHR2YXIgaW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuXHRcdGluZm8uaW5uZXJIVE1MID0gWydNaWRkbGUgY2xpY2sgYW5kIGRyYWcgdG8gcGFuJywgJ01vdXNlIHdoZWVsIHRvIHpvb20nLCAnQXJyb3cga2V5cyB0byByb3RhdGUnXS5qb2luKCc8YnIvPicpO1xyXG5cdFx0T2JqZWN0LmFzc2lnbihpbmZvLnN0eWxlLCB7XHJcblx0XHRcdHBvc2l0aW9uOiAnZml4ZWQnLFxyXG5cdFx0XHR0b3A6ICcxMHB4JyxcclxuXHRcdFx0bGVmdDogJzEwcHgnLFxyXG5cdFx0XHRtYXJnaW46IDBcclxuXHRcdH0pO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbmZvKTtcclxuXHJcblx0XHQvLyByZXNpemUgdGhlIHByZXZpZXcgY2FudmFzIHdoZW4gd2luZG93IHJlc2l6ZXNcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBlID0+IHNlbGYucmVjb21wdXRlVmlld3BvcnQoKSk7XHJcblx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblxyXG5cdFx0Ly8gbWlkZGxlIGNsaWNrIGFuZCBkcmFnIHRvIHBhbiB2aWV3XHJcblx0XHR2YXIgZHJhZ1N0YXJ0ID0gbnVsbCwgZm9jdXNTdGFydCA9IG51bGw7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XHJcblx0XHRcdGlmKGUuYnV0dG9uID09PSAxKXtcclxuXHRcdFx0XHRkcmFnU3RhcnQgPSB7eDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFl9O1xyXG5cdFx0XHRcdGZvY3VzU3RhcnQgPSBzZWxmLl9mb2N1cy5jbG9uZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZSA9PiB7XHJcblx0XHRcdGlmKGUuYnV0dG9uID09PSAxKXtcclxuXHRcdFx0XHRkcmFnU3RhcnQgPSBudWxsO1xyXG5cdFx0XHRcdGZvY3VzU3RhcnQgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuXHRcdFx0aWYoZHJhZ1N0YXJ0KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGV0IHtjbGllbnRXaWR0aDogdywgY2xpZW50SGVpZ2h0OiBofSA9IGRvY3VtZW50LmJvZHk7XHJcblx0XHRcdFx0bGV0IHBpeGVsc1Blck1ldGVyID0gTWF0aC5zcXJ0KHcqdytoKmgpIC8gc2VsZi5fdmlld1NpemU7XHJcblx0XHRcdFx0bGV0IGR4ID0gZS5jbGllbnRYIC0gZHJhZ1N0YXJ0LngsIGR5ID0gZS5jbGllbnRZIC0gZHJhZ1N0YXJ0Lnk7XHJcblx0XHRcdFx0bGV0IHJpZ2h0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5jcm9zc1ZlY3RvcnMoc2VsZi5fbG9va0RpcmVjdGlvbiwgc2VsZi51cCk7XHJcblxyXG5cdFx0XHRcdHNlbGYuX2ZvY3VzLmNvcHkoZm9jdXNTdGFydClcclxuXHRcdFx0XHRcdC5hZGQoc2VsZi51cC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGR5L3BpeGVsc1Blck1ldGVyKSlcclxuXHRcdFx0XHRcdC5hZGQocmlnaHQubXVsdGlwbHlTY2FsYXIoLWR4L3BpeGVsc1Blck1ldGVyKSk7XHJcblxyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gd2hlZWwgdG8gem9vbVxyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZSA9PiB7XHJcblx0XHRcdGlmKGUuZGVsdGFZIDwgMCl7XHJcblx0XHRcdFx0c2VsZi5fdmlld1NpemUgKj0gMC45MDtcclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlLmRlbHRhWSA+IDApe1xyXG5cdFx0XHRcdHNlbGYuX3ZpZXdTaXplICo9IDEuMTtcclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGFycm93IGtleXMgdG8gcm90YXRlXHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmtleSA9PT0gJ0Fycm93RG93bicpe1xyXG5cdFx0XHRcdGxldCByaWdodCA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKHNlbGYuX2xvb2tEaXJlY3Rpb24sIHNlbGYudXApO1xyXG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUocmlnaHQsIE1hdGguUEkvMik7XHJcblx0XHRcdFx0Ly9zZWxmLmdyaWRIZWxwZXIucm90YXRlT25BeGlzKHJpZ2h0LCBNYXRoLlBJLzIpO1xyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKGUua2V5ID09PSAnQXJyb3dVcCcpe1xyXG5cdFx0XHRcdGxldCByaWdodCA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKHNlbGYuX2xvb2tEaXJlY3Rpb24sIHNlbGYudXApO1xyXG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUocmlnaHQsIC1NYXRoLlBJLzIpO1xyXG5cdFx0XHRcdC8vc2VsZi5ncmlkSGVscGVyLnJvdGF0ZU9uQXhpcyhyaWdodCwgLU1hdGguUEkvMik7XHJcblx0XHRcdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKGUua2V5ID09PSAnQXJyb3dMZWZ0Jyl7XHJcblx0XHRcdFx0c2VsZi5fbG9va0RpcmVjdGlvbi5hcHBseUF4aXNBbmdsZShzZWxmLnVwLCAtTWF0aC5QSS8yKTtcclxuXHRcdFx0XHQvL3NlbGYuZ3JpZEhlbHBlci5yb3RhdGVPbkF4aXMoc2VsZi51cCwgLU1hdGguUEkvMik7XHJcblx0XHRcdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYoZS5rZXkgPT09ICdBcnJvd1JpZ2h0Jyl7XHJcblx0XHRcdFx0c2VsZi5fbG9va0RpcmVjdGlvbi5hcHBseUF4aXNBbmdsZShzZWxmLnVwLCBNYXRoLlBJLzIpO1xyXG5cdFx0XHRcdC8vc2VsZi5ncmlkSGVscGVyLnJvdGF0ZU9uQXhpcyhzZWxmLnVwLCBNYXRoLlBJLzIpO1xyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZWNvbXB1dGVWaWV3cG9ydCgpXHJcblx0e1xyXG5cdFx0dmFyIHtjbGllbnRXaWR0aDogdywgY2xpZW50SGVpZ2h0OiBofSA9IGRvY3VtZW50LmJvZHk7XHJcblxyXG5cdFx0Ly8gcmVzaXplIGNhbnZhc1xyXG5cdFx0dGhpcy5yZW5kZXJlci5zZXRTaXplKHcsIGgpO1xyXG5cclxuXHRcdC8vIGNvbXB1dGUgd2luZG93IGRpbWVuc2lvbnMgZnJvbSB2aWV3IHNpemVcclxuXHRcdHZhciByYXRpbyA9IHcvaDtcclxuXHRcdHZhciBoZWlnaHQgPSBNYXRoLnNxcnQoICh0aGlzLl92aWV3U2l6ZSp0aGlzLl92aWV3U2l6ZSkgLyAocmF0aW8qcmF0aW8gKyAxKSApO1xyXG5cdFx0dmFyIHdpZHRoID0gcmF0aW8gKiBoZWlnaHQ7XHJcblxyXG5cdFx0Ly8gc2V0IGZydXN0cnVtIGVkZ2VzXHJcblx0XHR0aGlzLmxlZnQgPSAtd2lkdGgvMjtcclxuXHRcdHRoaXMucmlnaHQgPSB3aWR0aC8yO1xyXG5cdFx0dGhpcy50b3AgPSBoZWlnaHQvMjtcclxuXHRcdHRoaXMuYm90dG9tID0gLWhlaWdodC8yO1xyXG5cclxuXHRcdHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG5cclxuXHRcdC8vIHVwZGF0ZSBwb3NpdGlvblxyXG5cdFx0dGhpcy5wb3NpdGlvbi5jb3B5KHRoaXMuX2ZvY3VzKS5zdWIoIHRoaXMuX2xvb2tEaXJlY3Rpb24uY2xvbmUoKS5tdWx0aXBseVNjYWxhcigyMDApICk7XHJcblx0XHRpZiggTWF0aC5hYnMoIHRoaXMuX2xvb2tEaXJlY3Rpb24ubm9ybWFsaXplKCkuZG90KG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCkpICkgPT09IDEgKVxyXG5cdFx0XHR0aGlzLnVwLnNldCgwLDAsMSk7IC8vIGlmIHdlJ3JlIGxvb2tpbmcgZG93biB0aGUgWSBheGlzXHJcblx0XHRlbHNlXHJcblx0XHRcdHRoaXMudXAuc2V0KDAsMSwwKTtcclxuXHRcdHRoaXMubG9va0F0KCB0aGlzLl9mb2N1cyApO1xyXG5cclxuXHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGlvcmFtYVZpZXdTZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0Zm9jdXM6IHRoaXMuX2ZvY3VzLnRvQXJyYXkoKSxcclxuXHRcdFx0dmlld1NpemU6IHRoaXMuX3ZpZXdTaXplLFxyXG5cdFx0XHRsb29rRGlyZWN0aW9uOiB0aGlzLl9sb29rRGlyZWN0aW9uLnRvQXJyYXkoKVxyXG5cdFx0fSkpO1xyXG5cdH1cclxufVxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5pbXBvcnQgKiBhcyBMb2FkZXJzIGZyb20gJy4vbG9hZGVycyc7XHJcbmltcG9ydCBQcmV2aWV3Q2FtZXJhIGZyb20gJy4vY2FtZXJhJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpb3JhbWFcclxue1xyXG5cdGNvbnN0cnVjdG9yKHtiZ0NvbG9yPTB4YWFhYWFhLCBncmlkT2Zmc2V0PVswLDAsMF0sIGZ1bGxzcGFjZT1mYWxzZX0gPSB7fSlcclxuXHR7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRzZWxmLl9jYWNoZSA9IExvYWRlcnMuX2NhY2hlO1xyXG5cdFx0c2VsZi5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG5cclxuXHRcdC8vIHNldCB1cCByZW5kZXJlciBhbmQgc2NhbGVcclxuXHRcdGlmKGFsdHNwYWNlLmluQ2xpZW50KVxyXG5cdFx0e1xyXG5cdFx0XHRzZWxmLnJlbmRlcmVyID0gYWx0c3BhY2UuZ2V0VGhyZWVKU1JlbmRlcmVyKCk7XHJcblx0XHRcdHNlbGYuX2VudlByb21pc2UgPSBQcm9taXNlLmFsbChbYWx0c3BhY2UuZ2V0RW5jbG9zdXJlKCksIGFsdHNwYWNlLmdldFNwYWNlKCldKVxyXG5cdFx0XHQudGhlbigoW2UsIHNdKSA9PiB7XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGFkanVzdFNjYWxlKCl7XHJcblx0XHRcdFx0XHRzZWxmLnNjZW5lLnNjYWxlLnNldFNjYWxhcihlLnBpeGVsc1Blck1ldGVyKTtcclxuXHRcdFx0XHRcdHNlbGYuZW52ID0gT2JqZWN0LmFzc2lnbih7fSwgZSwgcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFkanVzdFNjYWxlKCk7XHJcblxyXG5cdFx0XHRcdGlmKGZ1bGxzcGFjZSl7XHJcblx0XHRcdFx0XHRzZWxmLl9mc1Byb21pc2UgPSBlLnJlcXVlc3RGdWxsc3BhY2UoKS5jYXRjaCgoZSkgPT4gY29uc29sZS53YXJuKCdSZXF1ZXN0IGZvciBmdWxsc3BhY2UgZGVuaWVkJykpO1xyXG5cdFx0XHRcdFx0ZS5hZGRFdmVudExpc3RlbmVyKCdmdWxsc3BhY2VjaGFuZ2UnLCBhZGp1c3RTY2FsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHNlbGYuX2ZzUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdHtcclxuXHRcdFx0Ly8gc2V0IHVwIHByZXZpZXcgcmVuZGVyZXIsIGluIGNhc2Ugd2UncmUgb3V0IG9mIHdvcmxkXHJcblx0XHRcdHNlbGYucmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xyXG5cdFx0XHRzZWxmLnJlbmRlcmVyLnNldFNpemUoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpO1xyXG5cdFx0XHRzZWxmLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoIGJnQ29sb3IgKTtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZWxmLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG5cclxuXHRcdFx0c2VsZi5wcmV2aWV3Q2FtZXJhID0gbmV3IFByZXZpZXdDYW1lcmEoKTtcclxuXHRcdFx0c2VsZi5wcmV2aWV3Q2FtZXJhLmdyaWRIZWxwZXIucG9zaXRpb24uZnJvbUFycmF5KGdyaWRPZmZzZXQpO1xyXG5cdFx0XHRzZWxmLnNjZW5lLmFkZChzZWxmLnByZXZpZXdDYW1lcmEsIHNlbGYucHJldmlld0NhbWVyYS5ncmlkSGVscGVyKTtcclxuXHRcdFx0c2VsZi5wcmV2aWV3Q2FtZXJhLnJlZ2lzdGVySG9va3Moc2VsZi5yZW5kZXJlcik7XHJcblxyXG5cdFx0XHQvLyBzZXQgdXAgY3Vyc29yIGVtdWxhdGlvblxyXG5cdFx0XHRhbHRzcGFjZS51dGlsaXRpZXMuc2hpbXMuY3Vyc29yLmluaXQoc2VsZi5zY2VuZSwgc2VsZi5wcmV2aWV3Q2FtZXJhLCB7cmVuZGVyZXI6IHNlbGYucmVuZGVyZXJ9KTtcclxuXHJcblx0XHRcdC8vIHN0dWIgZW52aXJvbm1lbnRcclxuXHRcdFx0c2VsZi5lbnYgPSB7XHJcblx0XHRcdFx0aW5uZXJXaWR0aDogMTAyNCxcclxuXHRcdFx0XHRpbm5lckhlaWdodDogMTAyNCxcclxuXHRcdFx0XHRpbm5lckRlcHRoOiAxMDI0LFxyXG5cdFx0XHRcdHBpeGVsc1Blck1ldGVyOiBmdWxsc3BhY2UgPyAxIDogMTAyNC8zLFxyXG5cdFx0XHRcdHNpZDogJ2Jyb3dzZXInLFxyXG5cdFx0XHRcdG5hbWU6ICdicm93c2VyJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVNpZDogJ2Jyb3dzZXInXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzZWxmLl9lbnZQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcblx0XHRcdHNlbGYuX2ZzUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdHN0YXJ0KC4uLm1vZHVsZXMpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIGRldGVybWluZSB3aGljaCBhc3NldHMgYXJlbid0IHNoYXJlZFxyXG5cdFx0dmFyIHNpbmdsZXRvbnMgPSB7fTtcclxuXHRcdG1vZHVsZXMuZm9yRWFjaChtb2QgPT5cclxuXHRcdHtcclxuXHRcdFx0ZnVuY3Rpb24gY2hlY2tBc3NldCh1cmwpe1xyXG5cdFx0XHRcdGlmKHNpbmdsZXRvbnNbdXJsXSA9PT0gdW5kZWZpbmVkKSBzaW5nbGV0b25zW3VybF0gPSB0cnVlO1xyXG5cdFx0XHRcdGVsc2UgaWYoc2luZ2xldG9uc1t1cmxdID09PSB0cnVlKSBzaW5nbGV0b25zW3VybF0gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLnRleHR1cmVzIHx8IHt9KS5tYXAoayA9PiBtb2QuYXNzZXRzLnRleHR1cmVzW2tdKS5mb3JFYWNoKGNoZWNrQXNzZXQpO1xyXG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLm1vZGVscyB8fCB7fSkubWFwKGsgPT4gbW9kLmFzc2V0cy5tb2RlbHNba10pLmZvckVhY2goY2hlY2tBc3NldCk7XHJcblx0XHRcdE9iamVjdC5rZXlzKG1vZC5hc3NldHMucG9zdGVycyB8fCB7fSkubWFwKGsgPT4gbW9kLmFzc2V0cy5wb3N0ZXJzW2tdKS5mb3JFYWNoKGNoZWNrQXNzZXQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gZGV0ZXJtaW5lIGlmIHRoZSB0cmFja2luZyBza2VsZXRvbiBpcyBuZWVkZWRcclxuXHRcdGxldCBuZWVkc1NrZWxldG9uID0gbW9kdWxlcy5yZWR1Y2UoKG5zLG0pID0+IG5zIHx8IG0ubmVlZHNTa2VsZXRvbiwgZmFsc2UpO1xyXG5cdFx0aWYobmVlZHNTa2VsZXRvbiAmJiBhbHRzcGFjZS5pbkNsaWVudCl7XHJcblx0XHRcdHNlbGYuX3NrZWxQcm9taXNlID0gUHJvbWlzZS5hbGwoW1xyXG5cdFx0XHRcdGFsdHNwYWNlLmdldFRocmVlSlNUcmFja2luZ1NrZWxldG9uKCksXHJcblx0XHRcdFx0c2VsZi5fZW52UHJvbWlzZVxyXG5cdFx0XHRdKS50aGVuKHNrZWwgPT4ge1xyXG5cdFx0XHRcdHNlbGYuc2NlbmUuYWRkKHNrZWwpO1xyXG5cdFx0XHRcdHNlbGYuZW52LnNrZWwgPSBza2VsO1xyXG5cdFx0XHRcdHNlbGYuZW52ID0gT2JqZWN0LmZyZWV6ZShzZWxmLmVudik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHNlbGYuX2VudlByb21pc2UudGhlbigoKSA9PiB7XHJcblx0XHRcdFx0c2VsZi5lbnYgPSBPYmplY3QuZnJlZXplKHNlbGYuZW52KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNlbGYuX3NrZWxQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0UHJvbWlzZS5hbGwoW3NlbGYuX2VudlByb21pc2UsIHNlbGYuX2ZzUHJvbWlzZSwgc2VsZi5fc2tlbFByb21pc2VdKS50aGVuKCgpID0+XHJcblx0XHR7XHJcblx0XHRcdC8vIGNvbnN0cnVjdCBkaW9yYW1hc1xyXG5cdFx0XHRtb2R1bGVzLmZvckVhY2goZnVuY3Rpb24obW9kdWxlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGV0IHJvb3QgPSBudWxsO1xyXG5cclxuXHRcdFx0XHRpZihtb2R1bGUgaW5zdGFuY2VvZiBUSFJFRS5PYmplY3QzRCl7XHJcblx0XHRcdFx0XHRyb290ID0gbW9kdWxlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0cm9vdCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG5cclxuXHRcdFx0XHRcdC8vIGhhbmRsZSBhYnNvbHV0ZSBwb3NpdGlvbmluZ1xyXG5cdFx0XHRcdFx0aWYobW9kdWxlLnRyYW5zZm9ybSl7XHJcblx0XHRcdFx0XHRcdHJvb3QubWF0cml4LmZyb21BcnJheShtb2R1bGUudHJhbnNmb3JtKTtcclxuXHRcdFx0XHRcdFx0cm9vdC5tYXRyaXguZGVjb21wb3NlKHJvb3QucG9zaXRpb24sIHJvb3QucXVhdGVybmlvbiwgcm9vdC5zY2FsZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWYobW9kdWxlLnBvc2l0aW9uKXtcclxuXHRcdFx0XHRcdFx0XHRyb290LnBvc2l0aW9uLmZyb21BcnJheShtb2R1bGUucG9zaXRpb24pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmKG1vZHVsZS5yb3RhdGlvbil7XHJcblx0XHRcdFx0XHRcdFx0cm9vdC5yb3RhdGlvbi5mcm9tQXJyYXkobW9kdWxlLnJvdGF0aW9uKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gaGFuZGxlIHJlbGF0aXZlIHBvc2l0aW9uaW5nXHJcblx0XHRcdFx0aWYobW9kdWxlLnZlcnRpY2FsQWxpZ24pe1xyXG5cdFx0XHRcdFx0bGV0IGhhbGZIZWlnaHQgPSBzZWxmLmVudi5pbm5lckhlaWdodC8oMipzZWxmLmVudi5waXhlbHNQZXJNZXRlcik7XHJcblx0XHRcdFx0XHRzd2l0Y2gobW9kdWxlLnZlcnRpY2FsQWxpZ24pe1xyXG5cdFx0XHRcdFx0Y2FzZSAndG9wJzpcclxuXHRcdFx0XHRcdFx0cm9vdC50cmFuc2xhdGVZKGhhbGZIZWlnaHQpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2JvdHRvbSc6XHJcblx0XHRcdFx0XHRcdHJvb3QudHJhbnNsYXRlWSgtaGFsZkhlaWdodCk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnbWlkZGxlJzpcclxuXHRcdFx0XHRcdFx0Ly8gZGVmYXVsdFxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybignSW52YWxpZCB2YWx1ZSBmb3IgXCJ2ZXJ0aWNhbEFsaWduXCIgLSAnLCBtb2R1bGUudmVydGljYWxBbGlnbik7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0c2VsZi5zY2VuZS5hZGQocm9vdCk7XHJcblxyXG5cdFx0XHRcdGlmKHNlbGYucHJldmlld0NhbWVyYSl7XHJcblx0XHRcdFx0XHRsZXQgYXhpcyA9IG5ldyBUSFJFRS5BeGlzSGVscGVyKDEpO1xyXG5cdFx0XHRcdFx0YXhpcy51c2VyRGF0YS5hbHRzcGFjZSA9IHtjb2xsaWRlcjoge2VuYWJsZWQ6IGZhbHNlfX07XHJcblx0XHRcdFx0XHRyb290LmFkZChheGlzKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHNlbGYubG9hZEFzc2V0cyhtb2R1bGUuYXNzZXRzLCBzaW5nbGV0b25zKS50aGVuKChyZXN1bHRzKSA9PiB7XHJcblx0XHRcdFx0XHRtb2R1bGUuaW5pdGlhbGl6ZShzZWxmLmVudiwgcm9vdCwgcmVzdWx0cyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gc3RhcnQgYW5pbWF0aW5nXHJcblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIGFuaW1hdGUodGltZXN0YW1wKVxyXG5cdFx0e1xyXG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG5cdFx0XHRzZWxmLnNjZW5lLnVwZGF0ZUFsbEJlaGF2aW9ycygpO1xyXG5cdFx0XHRpZih3aW5kb3cuVFdFRU4pIFRXRUVOLnVwZGF0ZSgpO1xyXG5cdFx0XHRzZWxmLnJlbmRlcmVyLnJlbmRlcihzZWxmLnNjZW5lLCBzZWxmLnByZXZpZXdDYW1lcmEpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRsb2FkQXNzZXRzKG1hbmlmZXN0LCBzaW5nbGV0b25zKVxyXG5cdHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuXHRcdHtcclxuXHRcdFx0Ly8gcG9wdWxhdGUgY2FjaGVcclxuXHRcdFx0UHJvbWlzZS5hbGwoW1xyXG5cclxuXHRcdFx0XHQvLyBwb3B1bGF0ZSBtb2RlbCBjYWNoZVxyXG5cdFx0XHRcdC4uLk9iamVjdC5rZXlzKG1hbmlmZXN0Lm1vZGVscyB8fCB7fSkubWFwKGlkID0+IExvYWRlcnMuTW9kZWxQcm9taXNlKG1hbmlmZXN0Lm1vZGVsc1tpZF0pKSxcclxuXHJcblx0XHRcdFx0Ly8gcG9wdWxhdGUgZXhwbGljaXQgdGV4dHVyZSBjYWNoZVxyXG5cdFx0XHRcdC4uLk9iamVjdC5rZXlzKG1hbmlmZXN0LnRleHR1cmVzIHx8IHt9KS5tYXAoaWQgPT4gTG9hZGVycy5UZXh0dXJlUHJvbWlzZShtYW5pZmVzdC50ZXh0dXJlc1tpZF0pKSxcclxuXHJcblx0XHRcdFx0Ly8gZ2VuZXJhdGUgYWxsIHBvc3RlcnNcclxuXHRcdFx0XHQuLi5PYmplY3Qua2V5cyhtYW5pZmVzdC5wb3N0ZXJzIHx8IHt9KS5tYXAoaWQgPT4gTG9hZGVycy5Qb3N0ZXJQcm9taXNlKG1hbmlmZXN0LnBvc3RlcnNbaWRdKSlcclxuXHRcdFx0XSlcclxuXHJcblx0XHRcdC50aGVuKCgpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHQvLyBwb3B1bGF0ZSBwYXlsb2FkIGZyb20gY2FjaGVcclxuXHRcdFx0XHR2YXIgcGF5bG9hZCA9IHttb2RlbHM6IHt9LCB0ZXh0dXJlczoge30sIHBvc3RlcnM6IHt9fTtcclxuXHJcblx0XHRcdFx0Zm9yKGxldCBpIGluIG1hbmlmZXN0Lm1vZGVscyl7XHJcblx0XHRcdFx0XHRsZXQgdXJsID0gbWFuaWZlc3QubW9kZWxzW2ldO1xyXG5cdFx0XHRcdFx0bGV0IHQgPSBMb2FkZXJzLl9jYWNoZS5tb2RlbHNbdXJsXTtcclxuXHRcdFx0XHRcdHBheWxvYWQubW9kZWxzW2ldID0gdCA/IHNpbmdsZXRvbnNbdXJsXSA/IHQgOiB0LmNsb25lKCkgOiBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Zm9yKGxldCBpIGluIG1hbmlmZXN0LnRleHR1cmVzKXtcclxuXHRcdFx0XHRcdGxldCB1cmwgPSBtYW5pZmVzdC50ZXh0dXJlc1tpXTtcclxuXHRcdFx0XHRcdGxldCB0ID0gTG9hZGVycy5fY2FjaGUudGV4dHVyZXNbdXJsXTtcclxuXHRcdFx0XHRcdHBheWxvYWQudGV4dHVyZXNbaV0gPSB0ID8gc2luZ2xldG9uc1t1cmxdID8gdCA6IHQuY2xvbmUoKSA6IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmb3IobGV0IGkgaW4gbWFuaWZlc3QucG9zdGVycyl7XHJcblx0XHRcdFx0XHRsZXQgdXJsID0gbWFuaWZlc3QucG9zdGVyc1tpXTtcclxuXHRcdFx0XHRcdGxldCB0ID0gTG9hZGVycy5fY2FjaGUucG9zdGVyc1t1cmxdO1xyXG5cdFx0XHRcdFx0cGF5bG9hZC5wb3N0ZXJzW2ldID0gdCA/IHNpbmdsZXRvbnNbdXJsXSA/IHQgOiB0LmNsb25lKCkgOiBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmVzb2x2ZShwYXlsb2FkKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlLnN0YWNrKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG59O1xyXG4iXSwibmFtZXMiOlsiTW9kZWxQcm9taXNlIiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjYWNoZSIsIm1vZGVscyIsInRlc3QiLCJUSFJFRSIsImdsVEZMb2FkZXIiLCJsZXQiLCJsb2FkZXIiLCJsb2FkIiwicmVzdWx0Iiwic2NlbmUiLCJjaGlsZHJlbiIsIkdMVEZMb2FkZXIiLCJtYXRyaXhBdXRvVXBkYXRlIiwiY29uc29sZSIsImVycm9yIiwiQ29sbGFkYUxvYWRlciIsIlRleHR1cmVQcm9taXNlIiwidGV4dHVyZXMiLCJUZXh0dXJlTG9hZGVyIiwidGV4dHVyZSIsIlBvc3RlclByb21pc2UiLCJwb3N0ZXJzIiwidGhlbiIsInRleCIsImdlbyIsInJhdGlvIiwiaW1hZ2UiLCJ3aWR0aCIsImhlaWdodCIsIm1hdCIsIk1lc2hCYXNpY01hdGVyaWFsIiwibWFwIiwic2lkZSIsIkRvdWJsZVNpZGUiLCJQbGFuZUdlb21ldHJ5IiwiTWVzaCIsIlByZXZpZXdDYW1lcmEiLCJmb2N1cyIsInZpZXdTaXplIiwibG9va0RpcmVjdGlvbiIsInN1cGVyIiwidGhpcyIsInNldHRpbmdzIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsIlZlY3RvcjMiLCJmcm9tQXJyYXkiLCJfdmlld1NpemUiLCJfZm9jdXMiLCJfbG9va0RpcmVjdGlvbiIsImdyaWRIZWxwZXIiLCJHcmlkSGVscGVyIiwidXNlckRhdGEiLCJhbHRzcGFjZSIsImNvbGxpZGVyIiwiZW5hYmxlZCIsInByb3RvdHlwZUFjY2Vzc29ycyIsInZhbCIsInJlY29tcHV0ZVZpZXdwb3J0IiwiY29weSIsInJlZ2lzdGVySG9va3MiLCJyZW5kZXJlciIsInNlbGYiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJvdmVyZmxvdyIsImluZm8iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiam9pbiIsIk9iamVjdCIsImFzc2lnbiIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJkcmFnU3RhcnQiLCJmb2N1c1N0YXJ0IiwiYnV0dG9uIiwieCIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsImNsb25lIiwidyIsImgiLCJwaXhlbHNQZXJNZXRlciIsIk1hdGgiLCJzcXJ0IiwiZHgiLCJkeSIsInJpZ2h0IiwiY3Jvc3NWZWN0b3JzIiwidXAiLCJhZGQiLCJtdWx0aXBseVNjYWxhciIsImRlbHRhWSIsImtleSIsImFwcGx5QXhpc0FuZ2xlIiwiUEkiLCJzZXRTaXplIiwiYm90dG9tIiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsInN1YiIsImFicyIsIm5vcm1hbGl6ZSIsImRvdCIsInNldCIsImxvb2tBdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ0b0FycmF5IiwiT3J0aG9ncmFwaGljQ2FtZXJhIiwiRGlvcmFtYSIsInJlZiIsIl9jYWNoZSIsIkxvYWRlcnMuX2NhY2hlIiwiU2NlbmUiLCJpbkNsaWVudCIsImdldFRocmVlSlNSZW5kZXJlciIsIl9lbnZQcm9taXNlIiwiYWxsIiwiZ2V0RW5jbG9zdXJlIiwiZ2V0U3BhY2UiLCJhZGp1c3RTY2FsZSIsInNjYWxlIiwic2V0U2NhbGFyIiwiZW52IiwicyIsImZ1bGxzcGFjZSIsIl9mc1Byb21pc2UiLCJyZXF1ZXN0RnVsbHNwYWNlIiwiY2F0Y2giLCJ3YXJuIiwiV2ViR0xSZW5kZXJlciIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Iiwic2V0Q2xlYXJDb2xvciIsImJnQ29sb3IiLCJkb21FbGVtZW50IiwicHJldmlld0NhbWVyYSIsImdyaWRPZmZzZXQiLCJ1dGlsaXRpZXMiLCJzaGltcyIsImN1cnNvciIsImluaXQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJpbm5lckRlcHRoIiwic2lkIiwibmFtZSIsInRlbXBsYXRlU2lkIiwic3RhcnQiLCJzaW5nbGV0b25zIiwibW9kdWxlcyIsImZvckVhY2giLCJtb2QiLCJjaGVja0Fzc2V0IiwidW5kZWZpbmVkIiwia2V5cyIsImFzc2V0cyIsImsiLCJuZWVkc1NrZWxldG9uIiwicmVkdWNlIiwibnMiLCJtIiwiX3NrZWxQcm9taXNlIiwiZ2V0VGhyZWVKU1RyYWNraW5nU2tlbGV0b24iLCJza2VsIiwiZnJlZXplIiwibW9kdWxlIiwicm9vdCIsIk9iamVjdDNEIiwidHJhbnNmb3JtIiwibWF0cml4IiwiZGVjb21wb3NlIiwicXVhdGVybmlvbiIsInJvdGF0aW9uIiwidmVydGljYWxBbGlnbiIsImhhbGZIZWlnaHQiLCJ0cmFuc2xhdGVZIiwiYXhpcyIsIkF4aXNIZWxwZXIiLCJsb2FkQXNzZXRzIiwicmVzdWx0cyIsImluaXRpYWxpemUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhbmltYXRlIiwidGltZXN0YW1wIiwidXBkYXRlQWxsQmVoYXZpb3JzIiwiVFdFRU4iLCJ1cGRhdGUiLCJyZW5kZXIiLCJtYW5pZmVzdCIsImlkIiwiTG9hZGVycy5Nb2RlbFByb21pc2UiLCJMb2FkZXJzLlRleHR1cmVQcm9taXNlIiwiTG9hZGVycy5Qb3N0ZXJQcm9taXNlIiwicGF5bG9hZCIsImkiLCJ0Iiwic3RhY2siXSwibWFwcGluZ3MiOiJtQ0FJQSxTQUFTQSxHQUFhQyxHQUVyQixNQUFPLElBQUlDLFNBQVEsU0FBQ0MsRUFBU0MsR0FFNUIsR0FBR0MsRUFBTUMsT0FBT0wsR0FDZixNQUFPRSxHQUFRRSxFQUFNQyxPQUFPTCxHQUl4QixJQUFHLFdBQVdNLEtBQUtOLEdBQ3ZCLEdBQUdPLE1BQU1DLFdBQVcsQ0FDbkJDLEdBQUlDLEdBQVMsR0FBSUgsT0FBTUMsVUFDdkJFLEdBQU9DLEtBQUtYLEVBQUssU0FBQ1ksR0FFakIsTUFEQVIsR0FBTUMsT0FBT0wsR0FBT1ksRUFBT0MsTUFBTUMsU0FBUyxHQUFHQSxTQUFTLEdBQy9DWixFQUFRRSxFQUFNQyxPQUFPTCxVQUd6QixJQUFHTyxNQUFNUSxXQUFXLENBQ3hCTixHQUFJQyxHQUFTLEdBQUlILE9BQU1RLFVBQ3ZCTCxHQUFPQyxLQUFLWCxFQUFLLFNB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
