var Diorama=function(){"use strict";function e(e){return new Promise(function(t,r){if(o.models[e])return t(o.models[e]);if(/\.gltf$/i.test(e))if(THREE.glTFLoader){var n=new THREE.glTFLoader;n.load(e,function(r){return o.models[e]=r.scene.children[0].children[0],t(o.models[e])})}else if(THREE.GLTFLoader){var i=new THREE.GLTFLoader;i.load(e,function(r){return o.models[e]=r.scene.children[0],o.models[e].matrixAutoUpdate=!0,t(o.models[e])},function(){},r)}else console.error('glTF loader not found. "'+e+'" not loaded.'),r();else if(/\.obj$/i.test(e))if(THREE.OBJLoader){var s=new THREE.OBJLoader;s.load(e,function(r){return o.models[e]=r,t(r)},void 0,r)}else console.error('OBJ loader not found. "'+e+'" not loaded.'),r();else if(/\.dae$/i.test(e))if(THREE.ColladaLoader){var a=new THREE.ColladaLoader;a.load(e,function(r){return o.models[e]=r.scene.children[0],t(r.scene.children[0])},null,r)}else console.error('Collada loader not found. "'+e+'" not loaded.'),r();else console.error("Unrecognized model extension:",e),r()})}function t(e){return new Promise(function(t,r){if(o.textures[e])return t(o.textures[e]);var n=new THREE.TextureLoader;n.load(e,function(r){return o.textures[e]=r,t(r)},null,r)})}function r(e){return new Promise(function(r,n){return o.posters[e]?r(o.posters[e]):new t(e).then(function(t){var n,i=t.image.width/t.image.height,s=new THREE.MeshBasicMaterial({map:t,side:THREE.DoubleSide});return n=i>1?new THREE.PlaneGeometry(1,1/i):new THREE.PlaneGeometry(i,1),o.posters[e]=new THREE.Mesh(n,s),r(o.posters[e])})})}var o={models:{},textures:{},posters:{}},n=function(e){function t(t,r,o){e.call(this,-1,1,1,-1,.1,400);var n=window.localStorage.getItem("dioramaViewSettings");n&&(n=JSON.parse(n),t||(t=(new THREE.Vector3).fromArray(n.focus)),r||(r=n.viewSize),o||(o=(new THREE.Vector3).fromArray(n.lookDirection))),this._viewSize=r||40,this._focus=t||new THREE.Vector3,this._lookDirection=o||new THREE.Vector3(0,-1,0),this.gridHelper=new THREE.GridHelper(300,1),this.gridHelper.userData={altspace:{collider:{enabled:!1}}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={viewSize:{},focus:{},lookDirection:{}};return r.viewSize.get=function(){return this._viewSize},r.viewSize.set=function(e){this._viewSize=e,this.recomputeViewport()},r.focus.get=function(){return this._focus},r.focus.set=function(e){this._focus.copy(e),this.recomputeViewport()},r.lookDirection.get=function(){return this._lookDirection},r.lookDirection.set=function(e){this._lookDirection.copy(e),this.recomputeViewport()},t.prototype.registerHooks=function(e){var t=this;t.renderer=e,document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var r=document.createElement("p");r.innerHTML=["Middle click and drag to pan","Mouse wheel to zoom","Arrow keys to rotate"].join("<br/>"),Object.assign(r.style,{position:"fixed",top:"10px",left:"10px",margin:0}),document.body.appendChild(r),window.addEventListener("resize",function(e){return t.recomputeViewport()}),t.recomputeViewport();var o=null,n=null;window.addEventListener("mousedown",function(e){1===e.button&&(o={x:e.clientX,y:e.clientY},n=t._focus.clone())}),window.addEventListener("mouseup",function(e){1===e.button&&(o=null,n=null)}),window.addEventListener("mousemove",function(e){if(o){var r=document.body,i=r.clientWidth,s=r.clientHeight,a=Math.sqrt(i*i+s*s)/t._viewSize,c=e.clientX-o.x,l=e.clientY-o.y,d=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._focus.copy(n).add(t.up.clone().multiplyScalar(l/a)).add(d.multiplyScalar(-c/a)),t.recomputeViewport()}}),window.addEventListener("wheel",function(e){e.deltaY<0?(t._viewSize*=.9,t.recomputeViewport()):e.deltaY>0&&(t._viewSize*=1.1,t.recomputeViewport())}),window.addEventListener("keydown",function(e){if("ArrowDown"===e.key){var r=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(r,Math.PI/2),t.recomputeViewport()}else if("ArrowUp"===e.key){var o=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(o,-Math.PI/2),t.recomputeViewport()}else"ArrowLeft"===e.key?(t._lookDirection.applyAxisAngle(t.up,-Math.PI/2),t.recomputeViewport()):"ArrowRight"===e.key&&(t._lookDirection.applyAxisAngle(t.up,Math.PI/2),t.recomputeViewport())})},t.prototype.recomputeViewport=function(){var e=document.body,t=e.clientWidth,r=e.clientHeight;this.renderer.setSize(t,r);var o=t/r,n=Math.sqrt(this._viewSize*this._viewSize/(o*o+1)),i=o*n;this.left=-i/2,this.right=i/2,this.top=n/2,this.bottom=-n/2,this.updateProjectionMatrix(),this.position.copy(this._focus).sub(this._lookDirection.clone().multiplyScalar(200)),1===Math.abs(this._lookDirection.normalize().dot(new THREE.Vector3(0,-1,0)))?this.up.set(0,0,1):this.up.set(0,1,0),this.lookAt(this._focus),window.localStorage.setItem("dioramaViewSettings",JSON.stringify({focus:this._focus.toArray(),viewSize:this._viewSize,lookDirection:this._lookDirection.toArray()}))},Object.defineProperties(t.prototype,r),t}(THREE.OrthographicCamera),i=function(e){void 0===e&&(e={});var t=e.bgColor;void 0===t&&(t=11184810);var r=e.gridOffset;void 0===r&&(r=[0,0,0]);var i=e.fullspace;void 0===i&&(i=!1);var s=this;s._cache=o,s.scene=new THREE.Scene,altspace.inClient?(s.renderer=altspace.getThreeJSRenderer(),s._envPromise=Promise.all([altspace.getEnclosure(),altspace.getSpace()]).then(function(e){function t(){s.scene.scale.setScalar(r.pixelsPerMeter),s.env=Object.assign({},r,o)}var r=e[0],o=e[1];t(),i?(s._fsPromise=r.requestFullspace().catch(function(e){return console.warn("Request for fullspace denied")}),r.addEventListener("fullspacechange",t)):s._fsPromise=Promise.resolve()})):(s.renderer=new THREE.WebGLRenderer,s.renderer.setSize(document.body.clientWidth,document.body.clientHeight),s.renderer.setClearColor(t),document.body.appendChild(s.renderer.domElement),s.previewCamera=new n,s.previewCamera.gridHelper.position.fromArray(r),s.scene.add(s.previewCamera,s.previewCamera.gridHelper),s.previewCamera.registerHooks(s.renderer),altspace.utilities.shims.cursor.init(s.scene,s.previewCamera,{renderer:s.renderer}),s.env={innerWidth:1024,innerHeight:1024,innerDepth:1024,pixelsPerMeter:i?1:1024/3,sid:"browser",name:"browser",templateSid:"browser"},s._envPromise=Promise.resolve(),s._fsPromise=Promise.resolve())};return i.prototype.start=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this,o={};e.forEach(function(e){function t(e){void 0===o[e]?o[e]=!0:o[e]===!0&&(o[e]=!1)}Object.keys(e.assets.textures||{}).map(function(t){return e.assets.textures[t]}).forEach(t),Object.keys(e.assets.models||{}).map(function(t){return e.assets.models[t]}).forEach(t),Object.keys(e.assets.posters||{}).map(function(t){return e.assets.posters[t]}).forEach(t)});var n=e.reduce(function(e,t){return e||t.needsSkeleton},!1);n&&altspace.inClient?r._skelPromise=altspace.getThreeJSTrackingSkeleton().then(function(e){r.scene.add(e),r.env.skel=e,r.env=Object.freeze(r.env)}):(r.env=Object.freeze(r.env),r._skelPromise=Promise.resolve()),Promise.all([r._envPromise,r._fsPromise,r._skelPromise]).then(function(){e.forEach(function(e){var t=null;if(e instanceof THREE.Object3D?t=e:(t=new THREE.Object3D,e.transform?(t.matrix.fromArray(e.transform),t.matrix.decompose(t.position,t.quaternion,t.scale)):(e.position&&t.position.fromArray(e.position),e.rotation&&t.rotation.fromArray(e.rotation))),e.verticalAlign){var n=r.env.innerHeight/(2*r.env.pixelsPerMeter);switch(e.verticalAlign){case"top":t.translateY(n);break;case"bottom":t.translateY(-n);break;case"middle":break;default:console.warn('Invalid value for "verticalAlign" - ',e.verticalAlign)}}if(r.scene.add(t),r.previewCamera){var i=new THREE.AxisHelper(1);i.userData.altspace={collider:{enabled:!1}},t.add(i)}r.loadAssets(e.assets,o).then(function(o){e.initialize(r.env,t,o)})})}),window.requestAnimationFrame(function e(t){window.requestAnimationFrame(e),r.scene.updateAllBehaviors(),window.TWEEN&&TWEEN.update(),r.renderer.render(r.scene,r.previewCamera)})},i.prototype.loadAssets=function(n,i){return new Promise(function(s,a){Promise.all(Object.keys(n.models||{}).map(function(t){return e(n.models[t])}).concat(Object.keys(n.textures||{}).map(function(e){return t(n.textures[e])}),Object.keys(n.posters||{}).map(function(e){return r(n.posters[e])}))).then(function(){var e={models:{},textures:{},posters:{}};for(var t in n.models){var r=n.models[t],a=o.models[r];e.models[t]=a?i[r]?a:a.clone():null}for(var c in n.textures){var l=n.textures[c],d=o.textures[l];e.textures[c]=d?i[l]?d:d.clone():null}for(var u in n.posters){var p=n.posters[u],m=o.posters[p];e.posters[u]=m?i[p]?m:m.clone():null}s(e)}).catch(function(e){return console.error(e.stack)})})},i}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9sb2FkZXJzLmpzIiwiLi4vc3JjL2NhbWVyYS5qcyIsIi4uL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmxldCBjYWNoZSA9IHttb2RlbHM6IHt9LCB0ZXh0dXJlczoge30sIHBvc3RlcnM6IHt9fTtcclxuXHJcbmZ1bmN0aW9uIE1vZGVsUHJvbWlzZSh1cmwpXHJcbntcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuXHR7XHJcblx0XHRpZihjYWNoZS5tb2RlbHNbdXJsXSl7XHJcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOT1RFOiBnbFRGIGxvYWRlciBkb2VzIG5vdCBjYXRjaCBlcnJvcnNcclxuXHRcdGVsc2UgaWYoL1xcLmdsdGYkL2kudGVzdCh1cmwpKXtcclxuXHRcdFx0aWYoVEhSRUUuZ2xURkxvYWRlcil7XHJcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5nbFRGTG9hZGVyKCk7XHJcblx0XHRcdFx0bG9hZGVyLmxvYWQodXJsLCAocmVzdWx0KSA9PiB7XHJcblx0XHRcdFx0XHRjYWNoZS5tb2RlbHNbdXJsXSA9IHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKFRIUkVFLkdMVEZMb2FkZXIpe1xyXG5cdFx0XHRcdGxldCBsb2FkZXIgPSBuZXcgVEhSRUUuR0xURkxvYWRlcigpO1xyXG5cdFx0XHRcdGxvYWRlci5sb2FkKHVybCwgcmVzdWx0ID0+IHtcclxuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdID0gcmVzdWx0LnNjZW5lLmNoaWxkcmVuWzBdO1xyXG5cdFx0XHRcdFx0Y2FjaGUubW9kZWxzW3VybF0ubWF0cml4QXV0b1VwZGF0ZSA9IHRydWU7XHJcblx0XHRcdFx0XHQvKnJlc3VsdC5zY2VuZS50cmF2ZXJzZSgobykgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZihvLm1hdGVyaWFsICYmIG8ubWF0ZXJpYWwubWFwKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdmbGlwWScsIG8ubWF0ZXJpYWwubWFwLmZsaXBZKTtcclxuXHRcdFx0XHRcdH0pOyovXHJcblxyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc29sdmUoY2FjaGUubW9kZWxzW3VybF0pO1xyXG5cdFx0XHRcdH0sICgpID0+IHt9LCByZWplY3QpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYGdsVEYgbG9hZGVyIG5vdCBmb3VuZC4gXCIke3VybH1cIiBub3QgbG9hZGVkLmApO1xyXG5cdFx0XHRcdHJlamVjdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZWxzZSBpZigvXFwub2JqJC9pLnRlc3QodXJsKSl7XHJcblx0XHRcdGlmKFRIUkVFLk9CSkxvYWRlcil7XHJcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5PQkpMb2FkZXIoKTtcclxuXHRcdFx0XHRsb2FkZXIubG9hZCh1cmwsIG1vZGVsID0+IHtcclxuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdID0gbW9kZWw7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzb2x2ZShtb2RlbCk7XHJcblx0XHRcdFx0fSwgdW5kZWZpbmVkLCByZWplY3QpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYE9CSiBsb2FkZXIgbm90IGZvdW5kLiBcIiR7dXJsfVwiIG5vdCBsb2FkZWQuYCk7XHJcblx0XHRcdFx0cmVqZWN0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRlbHNlIGlmKC9cXC5kYWUkL2kudGVzdCh1cmwpKXtcclxuXHRcdFx0aWYoVEhSRUUuQ29sbGFkYUxvYWRlcil7XHJcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5Db2xsYWRhTG9hZGVyKCk7XHJcblx0XHRcdFx0bG9hZGVyLmxvYWQodXJsLCByZXN1bHQgPT4ge1xyXG5cdFx0XHRcdFx0Y2FjaGUubW9kZWxzW3VybF0gPSByZXN1bHQuc2NlbmUuY2hpbGRyZW5bMF07XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzb2x2ZShyZXN1bHQuc2NlbmUuY2hpbGRyZW5bMF0pXHJcblx0XHRcdFx0fSwgbnVsbCwgcmVqZWN0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBDb2xsYWRhIGxvYWRlciBub3QgZm91bmQuIFwiJHt1cmx9XCIgbm90IGxvYWRlZC5gKTtcclxuXHRcdFx0XHRyZWplY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdVbnJlY29nbml6ZWQgbW9kZWwgZXh0ZW5zaW9uOicsIHVybCk7XHJcblx0XHRcdHJlamVjdCgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBUZXh0dXJlUHJvbWlzZSh1cmwpe1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PlxyXG5cdHtcclxuXHRcdGlmKGNhY2hlLnRleHR1cmVzW3VybF0pXHJcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLnRleHR1cmVzW3VybF0pO1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxldCBsb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xyXG5cdFx0XHRsb2FkZXIubG9hZCh1cmwsIHRleHR1cmUgPT4ge1xyXG5cdFx0XHRcdGNhY2hlLnRleHR1cmVzW3VybF0gPSB0ZXh0dXJlO1xyXG5cdFx0XHRcdHJldHVybiByZXNvbHZlKHRleHR1cmUpO1xyXG5cdFx0XHR9LCBudWxsLCByZWplY3QpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG5jbGFzcyBWaWRlb1Byb21pc2UgZXh0ZW5kcyBQcm9taXNlIHtcclxuXHRjb25zdHJ1Y3Rvcih1cmwpXHJcblx0e1xyXG5cdFx0Ly8gc3RhcnQgbG9hZGVyXHJcblx0XHR2YXIgdmlkU3JjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcclxuXHRcdHZpZFNyYy5hdXRvcGxheSA9IHRydWU7XHJcblx0XHR2aWRTcmMubG9vcCA9IHRydWU7XHJcblx0XHR2aWRTcmMuc3JjID0gdXJsO1xyXG5cdFx0dmlkU3JjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZpZFNyYyk7XHJcblxyXG5cdFx0dmFyIHRleCA9IG5ldyBUSFJFRS5WaWRlb1RleHR1cmUodmlkU3JjKTtcclxuXHRcdHRleC5taW5GaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcblx0XHR0ZXgubWFnRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xyXG5cdFx0dGV4LmZvcm1hdCA9IFRIUkVFLlJHQkZvcm1hdDtcclxuXHJcblx0XHQvL2NhY2hlLnZpZGVvc1t1cmxdID0gdGV4O1xyXG5cdFx0Ly9wYXlsb2FkLnZpZGVvc1tpZF0gPSBjYWNoZS52aWRlb3NbdXJsXTtcclxuXHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRleCk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBQb3N0ZXJQcm9taXNlKHVybCl7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcblx0e1xyXG5cdFx0aWYoY2FjaGUucG9zdGVyc1t1cmxdKVxyXG5cdFx0XHRyZXR1cm4gcmVzb2x2ZShjYWNoZS5wb3N0ZXJzW3VybF0pO1xyXG5cdFx0ZWxzZSByZXR1cm4gKG5ldyBUZXh0dXJlUHJvbWlzZSh1cmwpKS50aGVuKHRleCA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGV0IHJhdGlvID0gdGV4LmltYWdlLndpZHRoIC8gdGV4LmltYWdlLmhlaWdodDtcclxuXHRcdFx0XHRsZXQgZ2VvLCBtYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogdGV4LCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlfSk7XHJcblxyXG5cdFx0XHRcdGlmKHJhdGlvID4gMSl7XHJcblx0XHRcdFx0XHRnZW8gPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxLCAxL3JhdGlvKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRnZW8gPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShyYXRpbywgMSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjYWNoZS5wb3N0ZXJzW3VybF0gPSBuZXcgVEhSRUUuTWVzaChnZW8sIG1hdCk7XHJcblx0XHRcdFx0cmV0dXJuIHJlc29sdmUoY2FjaGUucG9zdGVyc1t1cmxdKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IHsgTW9kZWxQcm9taXNlLCBUZXh0dXJlUHJvbWlzZSwgVmlkZW9Qcm9taXNlLCBQb3N0ZXJQcm9taXNlLCBjYWNoZSBhcyBfY2FjaGUgfTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJldmlld0NhbWVyYSBleHRlbmRzIFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYVxyXG57XHJcblx0Y29uc3RydWN0b3IoZm9jdXMsIHZpZXdTaXplLCBsb29rRGlyZWN0aW9uKVxyXG5cdHtcclxuXHRcdHN1cGVyKC0xLCAxLCAxLCAtMSwgLjEsIDQwMCk7XHJcblxyXG5cdFx0bGV0IHNldHRpbmdzID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkaW9yYW1hVmlld1NldHRpbmdzJyk7XHJcblx0XHRpZihzZXR0aW5ncyl7XHJcblx0XHRcdHNldHRpbmdzID0gSlNPTi5wYXJzZShzZXR0aW5ncyk7XHJcblx0XHRcdGlmKCFmb2N1cylcclxuXHRcdFx0XHRmb2N1cyA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuZnJvbUFycmF5KHNldHRpbmdzLmZvY3VzKTtcclxuXHRcdFx0aWYoIXZpZXdTaXplKVxyXG5cdFx0XHRcdHZpZXdTaXplID0gc2V0dGluZ3Mudmlld1NpemU7XHJcblx0XHRcdGlmKCFsb29rRGlyZWN0aW9uKVxyXG5cdFx0XHRcdGxvb2tEaXJlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheShzZXR0aW5ncy5sb29rRGlyZWN0aW9uKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl92aWV3U2l6ZSA9IHZpZXdTaXplIHx8IDQwO1xyXG5cdFx0dGhpcy5fZm9jdXMgPSBmb2N1cyB8fCBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cdFx0dGhpcy5fbG9va0RpcmVjdGlvbiA9IGxvb2tEaXJlY3Rpb24gfHwgbmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKTtcclxuXHRcdHRoaXMuZ3JpZEhlbHBlciA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKDMwMCwgMSk7XHJcblx0XHR0aGlzLmdyaWRIZWxwZXIudXNlckRhdGEgPSB7YWx0c3BhY2U6IHtjb2xsaWRlcjoge2VuYWJsZWQ6IGZhbHNlfX19O1xyXG5cdFx0Ly90aGlzLmdyaWRIZWxwZXIucXVhdGVybmlvbi5zZXRGcm9tVW5pdFZlY3RvcnMoIG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCksIHRoaXMuX2xvb2tEaXJlY3Rpb24gKTtcclxuXHR9XHJcblxyXG5cdGdldCB2aWV3U2l6ZSgpe1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZpZXdTaXplO1xyXG5cdH1cclxuXHRzZXQgdmlld1NpemUodmFsKXtcclxuXHRcdHRoaXMuX3ZpZXdTaXplID0gdmFsO1xyXG5cdFx0dGhpcy5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGZvY3VzKCl7XHJcblx0XHRyZXR1cm4gdGhpcy5fZm9jdXM7XHJcblx0fVxyXG5cdHNldCBmb2N1cyh2YWwpe1xyXG5cdFx0dGhpcy5fZm9jdXMuY29weSh2YWwpO1xyXG5cdFx0dGhpcy5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGxvb2tEaXJlY3Rpb24oKXtcclxuXHRcdHJldHVybiB0aGlzLl9sb29rRGlyZWN0aW9uO1xyXG5cdH1cclxuXHRzZXQgbG9va0RpcmVjdGlvbih2YWwpe1xyXG5cdFx0dGhpcy5fbG9va0RpcmVjdGlvbi5jb3B5KHZhbCk7XHJcblx0XHR0aGlzLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0fVxyXG5cclxuXHRyZWdpc3Rlckhvb2tzKHJlbmRlcmVyKVxyXG5cdHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHNlbGYucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcblx0XHQvLyBzZXQgc3R5bGVzIG9uIHRoZSBwYWdlLCBzbyB0aGUgcHJldmlldyB3b3JrcyByaWdodFxyXG5cdFx0ZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuXHRcdGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAnMCc7XHJcblx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcblxyXG5cdFx0dmFyIGluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcblx0XHRpbmZvLmlubmVySFRNTCA9IFsnTWlkZGxlIGNsaWNrIGFuZCBkcmFnIHRvIHBhbicsICdNb3VzZSB3aGVlbCB0byB6b29tJywgJ0Fycm93IGtleXMgdG8gcm90YXRlJ10uam9pbignPGJyLz4nKTtcclxuXHRcdE9iamVjdC5hc3NpZ24oaW5mby5zdHlsZSwge1xyXG5cdFx0XHRwb3NpdGlvbjogJ2ZpeGVkJyxcclxuXHRcdFx0dG9wOiAnMTBweCcsXHJcblx0XHRcdGxlZnQ6ICcxMHB4JyxcclxuXHRcdFx0bWFyZ2luOiAwXHJcblx0XHR9KTtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5mbyk7XHJcblxyXG5cdFx0Ly8gcmVzaXplIHRoZSBwcmV2aWV3IGNhbnZhcyB3aGVuIHdpbmRvdyByZXNpemVzXHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZSA9PiBzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCkpO1xyXG5cdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cclxuXHRcdC8vIG1pZGRsZSBjbGljayBhbmQgZHJhZyB0byBwYW4gdmlld1xyXG5cdFx0dmFyIGRyYWdTdGFydCA9IG51bGwsIGZvY3VzU3RhcnQgPSBudWxsO1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmJ1dHRvbiA9PT0gMSl7XHJcblx0XHRcdFx0ZHJhZ1N0YXJ0ID0ge3g6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZfTtcclxuXHRcdFx0XHRmb2N1c1N0YXJ0ID0gc2VsZi5fZm9jdXMuY2xvbmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmJ1dHRvbiA9PT0gMSl7XHJcblx0XHRcdFx0ZHJhZ1N0YXJ0ID0gbnVsbDtcclxuXHRcdFx0XHRmb2N1c1N0YXJ0ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XHJcblx0XHRcdGlmKGRyYWdTdGFydClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxldCB7Y2xpZW50V2lkdGg6IHcsIGNsaWVudEhlaWdodDogaH0gPSBkb2N1bWVudC5ib2R5O1xyXG5cdFx0XHRcdGxldCBwaXhlbHNQZXJNZXRlciA9IE1hdGguc3FydCh3KncraCpoKSAvIHNlbGYuX3ZpZXdTaXplO1xyXG5cdFx0XHRcdGxldCBkeCA9IGUuY2xpZW50WCAtIGRyYWdTdGFydC54LCBkeSA9IGUuY2xpZW50WSAtIGRyYWdTdGFydC55O1xyXG5cdFx0XHRcdGxldCByaWdodCA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKHNlbGYuX2xvb2tEaXJlY3Rpb24sIHNlbGYudXApO1xyXG5cclxuXHRcdFx0XHRzZWxmLl9mb2N1cy5jb3B5KGZvY3VzU3RhcnQpXHJcblx0XHRcdFx0XHQuYWRkKHNlbGYudXAuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihkeS9waXhlbHNQZXJNZXRlcikpXHJcblx0XHRcdFx0XHQuYWRkKHJpZ2h0Lm11bHRpcGx5U2NhbGFyKC1keC9waXhlbHNQZXJNZXRlcikpO1xyXG5cclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIHdoZWVsIHRvIHpvb21cclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmRlbHRhWSA8IDApe1xyXG5cdFx0XHRcdHNlbGYuX3ZpZXdTaXplICo9IDAuOTA7XHJcblx0XHRcdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYoZS5kZWx0YVkgPiAwKXtcclxuXHRcdFx0XHRzZWxmLl92aWV3U2l6ZSAqPSAxLjE7XHJcblx0XHRcdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBhcnJvdyBrZXlzIHRvIHJvdGF0ZVxyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcclxuXHRcdFx0aWYoZS5rZXkgPT09ICdBcnJvd0Rvd24nKXtcclxuXHRcdFx0XHRsZXQgcmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhzZWxmLl9sb29rRGlyZWN0aW9uLCBzZWxmLnVwKTtcclxuXHRcdFx0XHRzZWxmLl9sb29rRGlyZWN0aW9uLmFwcGx5QXhpc0FuZ2xlKHJpZ2h0LCBNYXRoLlBJLzIpO1xyXG5cdFx0XHRcdC8vc2VsZi5ncmlkSGVscGVyLnJvdGF0ZU9uQXhpcyhyaWdodCwgTWF0aC5QSS8yKTtcclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlLmtleSA9PT0gJ0Fycm93VXAnKXtcclxuXHRcdFx0XHRsZXQgcmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhzZWxmLl9sb29rRGlyZWN0aW9uLCBzZWxmLnVwKTtcclxuXHRcdFx0XHRzZWxmLl9sb29rRGlyZWN0aW9uLmFwcGx5QXhpc0FuZ2xlKHJpZ2h0LCAtTWF0aC5QSS8yKTtcclxuXHRcdFx0XHQvL3NlbGYuZ3JpZEhlbHBlci5yb3RhdGVPbkF4aXMocmlnaHQsIC1NYXRoLlBJLzIpO1xyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlLmtleSA9PT0gJ0Fycm93TGVmdCcpe1xyXG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUoc2VsZi51cCwgLU1hdGguUEkvMik7XHJcblx0XHRcdFx0Ly9zZWxmLmdyaWRIZWxwZXIucm90YXRlT25BeGlzKHNlbGYudXAsIC1NYXRoLlBJLzIpO1xyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKGUua2V5ID09PSAnQXJyb3dSaWdodCcpe1xyXG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUoc2VsZi51cCwgTWF0aC5QSS8yKTtcclxuXHRcdFx0XHQvL3NlbGYuZ3JpZEhlbHBlci5yb3RhdGVPbkF4aXMoc2VsZi51cCwgTWF0aC5QSS8yKTtcclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVjb21wdXRlVmlld3BvcnQoKVxyXG5cdHtcclxuXHRcdHZhciB7Y2xpZW50V2lkdGg6IHcsIGNsaWVudEhlaWdodDogaH0gPSBkb2N1bWVudC5ib2R5O1xyXG5cclxuXHRcdC8vIHJlc2l6ZSBjYW52YXNcclxuXHRcdHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3LCBoKTtcclxuXHJcblx0XHQvLyBjb21wdXRlIHdpbmRvdyBkaW1lbnNpb25zIGZyb20gdmlldyBzaXplXHJcblx0XHR2YXIgcmF0aW8gPSB3L2g7XHJcblx0XHR2YXIgaGVpZ2h0ID0gTWF0aC5zcXJ0KCAodGhpcy5fdmlld1NpemUqdGhpcy5fdmlld1NpemUpIC8gKHJhdGlvKnJhdGlvICsgMSkgKTtcclxuXHRcdHZhciB3aWR0aCA9IHJhdGlvICogaGVpZ2h0O1xyXG5cclxuXHRcdC8vIHNldCBmcnVzdHJ1bSBlZGdlc1xyXG5cdFx0dGhpcy5sZWZ0ID0gLXdpZHRoLzI7XHJcblx0XHR0aGlzLnJpZ2h0ID0gd2lkdGgvMjtcclxuXHRcdHRoaXMudG9wID0gaGVpZ2h0LzI7XHJcblx0XHR0aGlzLmJvdHRvbSA9IC1oZWlnaHQvMjtcclxuXHJcblx0XHR0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuXHJcblx0XHQvLyB1cGRhdGUgcG9zaXRpb25cclxuXHRcdHRoaXMucG9zaXRpb24uY29weSh0aGlzLl9mb2N1cykuc3ViKCB0aGlzLl9sb29rRGlyZWN0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoMjAwKSApO1xyXG5cdFx0aWYoIE1hdGguYWJzKCB0aGlzLl9sb29rRGlyZWN0aW9uLm5vcm1hbGl6ZSgpLmRvdChuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApKSApID09PSAxIClcclxuXHRcdFx0dGhpcy51cC5zZXQoMCwwLDEpOyAvLyBpZiB3ZSdyZSBsb29raW5nIGRvd24gdGhlIFkgYXhpc1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnVwLnNldCgwLDEsMCk7XHJcblx0XHR0aGlzLmxvb2tBdCggdGhpcy5fZm9jdXMgKTtcclxuXHJcblx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Rpb3JhbWFWaWV3U2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdGZvY3VzOiB0aGlzLl9mb2N1cy50b0FycmF5KCksXHJcblx0XHRcdHZpZXdTaXplOiB0aGlzLl92aWV3U2l6ZSxcclxuXHRcdFx0bG9va0RpcmVjdGlvbjogdGhpcy5fbG9va0RpcmVjdGlvbi50b0FycmF5KClcclxuXHRcdH0pKTtcclxuXHR9XHJcbn1cclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0ICogYXMgTG9hZGVycyBmcm9tICcuL2xvYWRlcnMnO1xyXG5pbXBvcnQgUHJldmlld0NhbWVyYSBmcm9tICcuL2NhbWVyYSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaW9yYW1hXHJcbntcclxuXHRjb25zdHJ1Y3Rvcih7YmdDb2xvcj0weGFhYWFhYSwgZ3JpZE9mZnNldD1bMCwwLDBdLCBmdWxsc3BhY2U9ZmFsc2V9ID0ge30pXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0c2VsZi5fY2FjaGUgPSBMb2FkZXJzLl9jYWNoZTtcclxuXHRcdHNlbGYuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuXHJcblx0XHQvLyBzZXQgdXAgcmVuZGVyZXIgYW5kIHNjYWxlXHJcblx0XHRpZihhbHRzcGFjZS5pbkNsaWVudClcclxuXHRcdHtcclxuXHRcdFx0c2VsZi5yZW5kZXJlciA9IGFsdHNwYWNlLmdldFRocmVlSlNSZW5kZXJlcigpO1xyXG5cdFx0XHRzZWxmLl9lbnZQcm9taXNlID0gUHJvbWlzZS5hbGwoW2FsdHNwYWNlLmdldEVuY2xvc3VyZSgpLCBhbHRzcGFjZS5nZXRTcGFjZSgpXSlcclxuXHRcdFx0LnRoZW4oKFtlLCBzXSkgPT4ge1xyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBhZGp1c3RTY2FsZSgpe1xyXG5cdFx0XHRcdFx0c2VsZi5zY2VuZS5zY2FsZS5zZXRTY2FsYXIoZS5waXhlbHNQZXJNZXRlcik7XHJcblx0XHRcdFx0XHRzZWxmLmVudiA9IE9iamVjdC5hc3NpZ24oe30sIGUsIHMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhZGp1c3RTY2FsZSgpO1xyXG5cclxuXHRcdFx0XHRpZihmdWxsc3BhY2Upe1xyXG5cdFx0XHRcdFx0c2VsZi5fZnNQcm9taXNlID0gZS5yZXF1ZXN0RnVsbHNwYWNlKCkuY2F0Y2goKGUpID0+IGNvbnNvbGUud2FybignUmVxdWVzdCBmb3IgZnVsbHNwYWNlIGRlbmllZCcpKTtcclxuXHRcdFx0XHRcdGUuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNwYWNlY2hhbmdlJywgYWRqdXN0U2NhbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRzZWxmLl9mc1Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdC8vIHNldCB1cCBwcmV2aWV3IHJlbmRlcmVyLCBpbiBjYXNlIHdlJ3JlIG91dCBvZiB3b3JsZFxyXG5cdFx0XHRzZWxmLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcclxuXHRcdFx0c2VsZi5yZW5kZXJlci5zZXRTaXplKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KTtcclxuXHRcdFx0c2VsZi5yZW5kZXJlci5zZXRDbGVhckNvbG9yKCBiZ0NvbG9yICk7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2VsZi5yZW5kZXJlci5kb21FbGVtZW50KTtcclxuXHJcblx0XHRcdHNlbGYucHJldmlld0NhbWVyYSA9IG5ldyBQcmV2aWV3Q2FtZXJhKCk7XHJcblx0XHRcdHNlbGYucHJldmlld0NhbWVyYS5ncmlkSGVscGVyLnBvc2l0aW9uLmZyb21BcnJheShncmlkT2Zmc2V0KTtcclxuXHRcdFx0c2VsZi5zY2VuZS5hZGQoc2VsZi5wcmV2aWV3Q2FtZXJhLCBzZWxmLnByZXZpZXdDYW1lcmEuZ3JpZEhlbHBlcik7XHJcblx0XHRcdHNlbGYucHJldmlld0NhbWVyYS5yZWdpc3Rlckhvb2tzKHNlbGYucmVuZGVyZXIpO1xyXG5cclxuXHRcdFx0Ly8gc2V0IHVwIGN1cnNvciBlbXVsYXRpb25cclxuXHRcdFx0YWx0c3BhY2UudXRpbGl0aWVzLnNoaW1zLmN1cnNvci5pbml0KHNlbGYuc2NlbmUsIHNlbGYucHJldmlld0NhbWVyYSwge3JlbmRlcmVyOiBzZWxmLnJlbmRlcmVyfSk7XHJcblxyXG5cdFx0XHQvLyBzdHViIGVudmlyb25tZW50XHJcblx0XHRcdHNlbGYuZW52ID0ge1xyXG5cdFx0XHRcdGlubmVyV2lkdGg6IDEwMjQsXHJcblx0XHRcdFx0aW5uZXJIZWlnaHQ6IDEwMjQsXHJcblx0XHRcdFx0aW5uZXJEZXB0aDogMTAyNCxcclxuXHRcdFx0XHRwaXhlbHNQZXJNZXRlcjogZnVsbHNwYWNlID8gMSA6IDEwMjQvMyxcclxuXHRcdFx0XHRzaWQ6ICdicm93c2VyJyxcclxuXHRcdFx0XHRuYW1lOiAnYnJvd3NlcicsXHJcblx0XHRcdFx0dGVtcGxhdGVTaWQ6ICdicm93c2VyJ1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0c2VsZi5fZW52UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0XHRzZWxmLl9mc1Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRzdGFydCguLi5tb2R1bGVzKVxyXG5cdHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBkZXRlcm1pbmUgd2hpY2ggYXNzZXRzIGFyZW4ndCBzaGFyZWRcclxuXHRcdHZhciBzaW5nbGV0b25zID0ge307XHJcblx0XHRtb2R1bGVzLmZvckVhY2gobW9kID0+XHJcblx0XHR7XHJcblx0XHRcdGZ1bmN0aW9uIGNoZWNrQXNzZXQodXJsKXtcclxuXHRcdFx0XHRpZihzaW5nbGV0b25zW3VybF0gPT09IHVuZGVmaW5lZCkgc2luZ2xldG9uc1t1cmxdID0gdHJ1ZTtcclxuXHRcdFx0XHRlbHNlIGlmKHNpbmdsZXRvbnNbdXJsXSA9PT0gdHJ1ZSkgc2luZ2xldG9uc1t1cmxdID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0T2JqZWN0LmtleXMobW9kLmFzc2V0cy50ZXh0dXJlcyB8fCB7fSkubWFwKGsgPT4gbW9kLmFzc2V0cy50ZXh0dXJlc1trXSkuZm9yRWFjaChjaGVja0Fzc2V0KTtcclxuXHRcdFx0T2JqZWN0LmtleXMobW9kLmFzc2V0cy5tb2RlbHMgfHwge30pLm1hcChrID0+IG1vZC5hc3NldHMubW9kZWxzW2tdKS5mb3JFYWNoKGNoZWNrQXNzZXQpO1xyXG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLnBvc3RlcnMgfHwge30pLm1hcChrID0+IG1vZC5hc3NldHMucG9zdGVyc1trXSkuZm9yRWFjaChjaGVja0Fzc2V0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGRldGVybWluZSBpZiB0aGUgdHJhY2tpbmcgc2tlbGV0b24gaXMgbmVlZGVkXHJcblx0XHRsZXQgbmVlZHNTa2VsZXRvbiA9IG1vZHVsZXMucmVkdWNlKChucyxtKSA9PiBucyB8fCBtLm5lZWRzU2tlbGV0b24sIGZhbHNlKTtcclxuXHRcdGlmKG5lZWRzU2tlbGV0b24gJiYgYWx0c3BhY2UuaW5DbGllbnQpe1xyXG5cdFx0XHRzZWxmLl9za2VsUHJvbWlzZSA9IGFsdHNwYWNlLmdldFRocmVlSlNUcmFja2luZ1NrZWxldG9uKCkudGhlbihza2VsID0+IHtcclxuXHRcdFx0XHRzZWxmLnNjZW5lLmFkZChza2VsKTtcclxuXHRcdFx0XHRzZWxmLmVudi5za2VsID0gc2tlbDtcclxuXHRcdFx0XHRzZWxmLmVudiA9IE9iamVjdC5mcmVlemUoc2VsZi5lbnYpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRzZWxmLmVudiA9IE9iamVjdC5mcmVlemUoc2VsZi5lbnYpO1xyXG5cdFx0XHRzZWxmLl9za2VsUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdFByb21pc2UuYWxsKFtzZWxmLl9lbnZQcm9taXNlLCBzZWxmLl9mc1Byb21pc2UsIHNlbGYuX3NrZWxQcm9taXNlXSkudGhlbigoKSA9PlxyXG5cdFx0e1xyXG5cdFx0XHQvLyBjb25zdHJ1Y3QgZGlvcmFtYXNcclxuXHRcdFx0bW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uKG1vZHVsZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxldCByb290ID0gbnVsbDtcclxuXHJcblx0XHRcdFx0aWYobW9kdWxlIGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0Qpe1xyXG5cdFx0XHRcdFx0cm9vdCA9IG1vZHVsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJvb3QgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBoYW5kbGUgYWJzb2x1dGUgcG9zaXRpb25pbmdcclxuXHRcdFx0XHRcdGlmKG1vZHVsZS50cmFuc2Zvcm0pe1xyXG5cdFx0XHRcdFx0XHRyb290Lm1hdHJpeC5mcm9tQXJyYXkobW9kdWxlLnRyYW5zZm9ybSk7XHJcblx0XHRcdFx0XHRcdHJvb3QubWF0cml4LmRlY29tcG9zZShyb290LnBvc2l0aW9uLCByb290LnF1YXRlcm5pb24sIHJvb3Quc2NhbGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdGlmKG1vZHVsZS5wb3NpdGlvbil7XHJcblx0XHRcdFx0XHRcdFx0cm9vdC5wb3NpdGlvbi5mcm9tQXJyYXkobW9kdWxlLnBvc2l0aW9uKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZihtb2R1bGUucm90YXRpb24pe1xyXG5cdFx0XHRcdFx0XHRcdHJvb3Qucm90YXRpb24uZnJvbUFycmF5KG1vZHVsZS5yb3RhdGlvbik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIGhhbmRsZSByZWxhdGl2ZSBwb3NpdGlvbmluZ1xyXG5cdFx0XHRcdGlmKG1vZHVsZS52ZXJ0aWNhbEFsaWduKXtcclxuXHRcdFx0XHRcdGxldCBoYWxmSGVpZ2h0ID0gc2VsZi5lbnYuaW5uZXJIZWlnaHQvKDIqc2VsZi5lbnYucGl4ZWxzUGVyTWV0ZXIpO1xyXG5cdFx0XHRcdFx0c3dpdGNoKG1vZHVsZS52ZXJ0aWNhbEFsaWduKXtcclxuXHRcdFx0XHRcdGNhc2UgJ3RvcCc6XHJcblx0XHRcdFx0XHRcdHJvb3QudHJhbnNsYXRlWShoYWxmSGVpZ2h0KTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdib3R0b20nOlxyXG5cdFx0XHRcdFx0XHRyb290LnRyYW5zbGF0ZVkoLWhhbGZIZWlnaHQpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ21pZGRsZSc6XHJcblx0XHRcdFx0XHRcdC8vIGRlZmF1bHRcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ0ludmFsaWQgdmFsdWUgZm9yIFwidmVydGljYWxBbGlnblwiIC0gJywgbW9kdWxlLnZlcnRpY2FsQWxpZ24pO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHNlbGYuc2NlbmUuYWRkKHJvb3QpO1xyXG5cclxuXHRcdFx0XHRpZihzZWxmLnByZXZpZXdDYW1lcmEpe1xyXG5cdFx0XHRcdFx0bGV0IGF4aXMgPSBuZXcgVEhSRUUuQXhpc0hlbHBlcigxKTtcclxuXHRcdFx0XHRcdGF4aXMudXNlckRhdGEuYWx0c3BhY2UgPSB7Y29sbGlkZXI6IHtlbmFibGVkOiBmYWxzZX19O1xyXG5cdFx0XHRcdFx0cm9vdC5hZGQoYXhpcyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzZWxmLmxvYWRBc3NldHMobW9kdWxlLmFzc2V0cywgc2luZ2xldG9ucykudGhlbigocmVzdWx0cykgPT4ge1xyXG5cdFx0XHRcdFx0bW9kdWxlLmluaXRpYWxpemUoc2VsZi5lbnYsIHJvb3QsIHJlc3VsdHMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIHN0YXJ0IGFuaW1hdGluZ1xyXG5cdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiBhbmltYXRlKHRpbWVzdGFtcClcclxuXHRcdHtcclxuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuXHRcdFx0c2VsZi5zY2VuZS51cGRhdGVBbGxCZWhhdmlvcnMoKTtcclxuXHRcdFx0aWYod2luZG93LlRXRUVOKSBUV0VFTi51cGRhdGUoKTtcclxuXHRcdFx0c2VsZi5yZW5kZXJlci5yZW5kZXIoc2VsZi5zY2VuZSwgc2VsZi5wcmV2aWV3Q2FtZXJhKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0bG9hZEFzc2V0cyhtYW5pZmVzdCwgc2luZ2xldG9ucylcclxuXHR7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcblx0XHR7XHJcblx0XHRcdC8vIHBvcHVsYXRlIGNhY2hlXHJcblx0XHRcdFByb21pc2UuYWxsKFtcclxuXHJcblx0XHRcdFx0Ly8gcG9wdWxhdGUgbW9kZWwgY2FjaGVcclxuXHRcdFx0XHQuLi5PYmplY3Qua2V5cyhtYW5pZmVzdC5tb2RlbHMgfHwge30pLm1hcChpZCA9PiBMb2FkZXJzLk1vZGVsUHJvbWlzZShtYW5pZmVzdC5tb2RlbHNbaWRdKSksXHJcblxyXG5cdFx0XHRcdC8vIHBvcHVsYXRlIGV4cGxpY2l0IHRleHR1cmUgY2FjaGVcclxuXHRcdFx0XHQuLi5PYmplY3Qua2V5cyhtYW5pZmVzdC50ZXh0dXJlcyB8fCB7fSkubWFwKGlkID0+IExvYWRlcnMuVGV4dHVyZVByb21pc2UobWFuaWZlc3QudGV4dHVyZXNbaWRdKSksXHJcblxyXG5cdFx0XHRcdC8vIGdlbmVyYXRlIGFsbCBwb3N0ZXJzXHJcblx0XHRcdFx0Li4uT2JqZWN0LmtleXMobWFuaWZlc3QucG9zdGVycyB8fCB7fSkubWFwKGlkID0+IExvYWRlcnMuUG9zdGVyUHJvbWlzZShtYW5pZmVzdC5wb3N0ZXJzW2lkXSkpXHJcblx0XHRcdF0pXHJcblxyXG5cdFx0XHQudGhlbigoKSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly8gcG9wdWxhdGUgcGF5bG9hZCBmcm9tIGNhY2hlXHJcblx0XHRcdFx0dmFyIHBheWxvYWQgPSB7bW9kZWxzOiB7fSwgdGV4dHVyZXM6IHt9LCBwb3N0ZXJzOiB7fX07XHJcblxyXG5cdFx0XHRcdGZvcihsZXQgaSBpbiBtYW5pZmVzdC5tb2RlbHMpe1xyXG5cdFx0XHRcdFx0bGV0IHVybCA9IG1hbmlmZXN0Lm1vZGVsc1tpXTtcclxuXHRcdFx0XHRcdGxldCB0ID0gTG9hZGVycy5fY2FjaGUubW9kZWxzW3VybF07XHJcblx0XHRcdFx0XHRwYXlsb2FkLm1vZGVsc1tpXSA9IHQgPyBzaW5nbGV0b25zW3VybF0gPyB0IDogdC5jbG9uZSgpIDogbnVsbDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZvcihsZXQgaSBpbiBtYW5pZmVzdC50ZXh0dXJlcyl7XHJcblx0XHRcdFx0XHRsZXQgdXJsID0gbWFuaWZlc3QudGV4dHVyZXNbaV07XHJcblx0XHRcdFx0XHRsZXQgdCA9IExvYWRlcnMuX2NhY2hlLnRleHR1cmVzW3VybF07XHJcblx0XHRcdFx0XHRwYXlsb2FkLnRleHR1cmVzW2ldID0gdCA/IHNpbmdsZXRvbnNbdXJsXSA/IHQgOiB0LmNsb25lKCkgOiBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Zm9yKGxldCBpIGluIG1hbmlmZXN0LnBvc3RlcnMpe1xyXG5cdFx0XHRcdFx0bGV0IHVybCA9IG1hbmlmZXN0LnBvc3RlcnNbaV07XHJcblx0XHRcdFx0XHRsZXQgdCA9IExvYWRlcnMuX2NhY2hlLnBvc3RlcnNbdXJsXTtcclxuXHRcdFx0XHRcdHBheWxvYWQucG9zdGVyc1tpXSA9IHQgPyBzaW5nbGV0b25zW3VybF0gPyB0IDogdC5jbG9uZSgpIDogbnVsbDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJlc29sdmUocGF5bG9hZCk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZS5zdGFjaykpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxufTtcclxuIl0sIm5hbWVzIjpbIk1vZGVsUHJvbWlzZSIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2FjaGUiLCJtb2RlbHMiLCJ0ZXN0IiwiVEhSRUUiLCJnbFRGTG9hZGVyIiwibGV0IiwibG9hZGVyIiwibG9hZCIsInJlc3VsdCIsInNjZW5lIiwiY2hpbGRyZW4iLCJHTFRGTG9hZGVyIiwibWF0cml4QXV0b1VwZGF0ZSIsImNvbnNvbGUiLCJlcnJvciIsIk9CSkxvYWRlciIsIm1vZGVsIiwidW5kZWZpbmVkIiwiQ29sbGFkYUxvYWRlciIsIlRleHR1cmVQcm9taXNlIiwidGV4dHVyZXMiLCJUZXh0dXJlTG9hZGVyIiwidGV4dHVyZSIsIlBvc3RlclByb21pc2UiLCJwb3N0ZXJzIiwidGhlbiIsInRleCIsImdlbyIsInJhdGlvIiwiaW1hZ2UiLCJ3aWR0aCIsImhlaWdodCIsIm1hdCIsIk1lc2hCYXNpY01hdGVyaWFsIiwibWFwIiwic2lkZSIsIkRvdWJsZVNpZGUiLCJQbGFuZUdlb21ldHJ5IiwiTWVzaCIsIlByZXZpZXdDYW1lcmEiLCJmb2N1cyIsInZpZXdTaXplIiwibG9va0RpcmVjdGlvbiIsInN1cGVyIiwidGhpcyIsInNldHRpbmdzIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsIlZlY3RvcjMiLCJmcm9tQXJyYXkiLCJfdmlld1NpemUiLCJfZm9jdXMiLCJfbG9va0RpcmVjdGlvbiIsImdyaWRIZWxwZXIiLCJHcmlkSGVscGVyIiwidXNlckRhdGEiLCJhbHRzcGFjZSIsImNvbGxpZGVyIiwiZW5hYmxlZCIsInByb3RvdHlwZUFjY2Vzc29ycyIsInZhbCIsInJlY29tcHV0ZVZpZXdwb3J0IiwiY29weSIsInJlZ2lzdGVySG9va3MiLCJyZW5kZXJlciIsInNlbGYiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJvdmVyZmxvdyIsImluZm8iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiam9pbiIsIk9iamVjdCIsImFzc2lnbiIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJkcmFnU3RhcnQiLCJmb2N1c1N0YXJ0IiwiYnV0dG9uIiwieCIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsImNsb25lIiwidyIsImgiLCJwaXhlbHNQZXJNZXRlciIsIk1hdGgiLCJzcXJ0IiwiZHgiLCJkeSIsInJpZ2h0IiwiY3Jvc3NWZWN0b3JzIiwidXAiLCJhZGQiLCJtdWx0aXBseVNjYWxhciIsImRlbHRhWSIsImtleSIsImFwcGx5QXhpc0FuZ2xlIiwiUEkiLCJzZXRTaXplIiwiYm90dG9tIiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsInN1YiIsImFicyIsIm5vcm1hbGl6ZSIsImRvdCIsInNldCIsImxvb2tBdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ0b0FycmF5IiwiT3J0aG9ncmFwaGljQ2FtZXJhIiwiRGlvcmFtYSIsInJlZiIsIl9jYWNoZSIsIkxvYWRlcnMuX2NhY2hlIiwiU2NlbmUiLCJpbkNsaWVudCIsImdldFRocmVlSlNSZW5kZXJlciIsIl9lbnZQcm9taXNlIiwiYWxsIiwiZ2V0RW5jbG9zdXJlIiwiZ2V0U3BhY2UiLCJhZGp1c3RTY2FsZSIsInNjYWxlIiwic2V0U2NhbGFyIiwiZW52IiwicyIsImZ1bGxzcGFjZSIsIl9mc1Byb21pc2UiLCJyZXF1ZXN0RnVsbHNwYWNlIiwiY2F0Y2giLCJ3YXJuIiwiV2ViR0xSZW5kZXJlciIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Iiwic2V0Q2xlYXJDb2xvciIsImJnQ29sb3IiLCJkb21FbGVtZW50IiwicHJldmlld0NhbWVyYSIsImdyaWRPZmZzZXQiLCJ1dGlsaXRpZXMiLCJzaGltcyIsImN1cnNvciIsImluaXQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJpbm5lckRlcHRoIiwic2lkIiwibmFtZSIsInRlbXBsYXRlU2lkIiwic3RhcnQiLCJzaW5nbGV0b25zIiwibW9kdWxlcyIsImZvckVhY2giLCJtb2QiLCJjaGVja0Fzc2V0Iiwia2V5cyIsImFzc2V0cyIsImsiLCJuZWVkc1NrZWxldG9uIiwicmVkdWNlIiwibnMiLCJtIiwiX3NrZWxQcm9taXNlIiwiZ2V0VGhyZWVKU1RyYWNraW5nU2tlbGV0b24iLCJza2VsIiwiZnJlZXplIiwibW9kdWxlIiwicm9vdCIsIk9iamVjdDNEIiwidHJhbnNmb3JtIiwibWF0cml4IiwiZGVjb21wb3NlIiwicXVhdGVybmlvbiIsInJvdGF0aW9uIiwidmVydGljYWxBbGlnbiIsImhhbGZIZWlnaHQiLCJ0cmFuc2xhdGVZIiwiYXhpcyIsIkF4aXNIZWxwZXIiLCJsb2FkQXNzZXRzIiwicmVzdWx0cyIsImluaXRpYWxpemUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhbmltYXRlIiwidGltZXN0YW1wIiwidXBkYXRlQWxsQmVoYXZpb3JzIiwiVFdFRU4iLCJ1cGRhdGUiLCJyZW5kZXIiLCJtYW5pZmVzdCIsImlkIiwiTG9hZGVycy5Nb2RlbFByb21pc2UiLCJMb2FkZXJzLlRleHR1cmVQcm9taXNlIiwiTG9hZGVycy5Qb3N0ZXJQcm9taXNl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
