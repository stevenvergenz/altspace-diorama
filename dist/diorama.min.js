var Diorama=function(){"use strict";function e(e){return new Promise(function(t,r){if(o.models[e])return t(o.models[e]);if(/\.gltf$/i.test(e))if(THREE.glTFLoader){var n=new THREE.glTFLoader;n.load(e,function(r){return o.models[e]=r.scene.children[0].children[0],t(o.models[e])})}else if(THREE.GLTFLoader){var i=new THREE.GLTFLoader;i.load(e,function(r){return console.log(r),o.models[e]=r.scene.children[0],t(o.models[e])},null,r)}else console.error('glTF loader not found. "'+e+'" not loaded.'),r();else if(/\.dae$/i.test(e))if(THREE.ColladaLoader){var s=new THREE.ColladaLoader;s.load(e,function(r){return o.models[e]=r.scene.children[0],t(r.scene.children[0])},null,r)}else console.error('Collada loader not found. "'+e+'" not loaded.'),r()})}function t(e){return new Promise(function(t,r){if(o.textures[e])return t(o.textures[e]);var n=new THREE.TextureLoader;n.load(e,function(r){return o.textures[e]=r,t(r)},null,r)})}function r(e){return new Promise(function(r,n){return o.posters[e]?r(o.posters[e]):new t(e).then(function(t){var n,i=t.image.width/t.image.height,s=new THREE.MeshBasicMaterial({map:t,side:THREE.DoubleSide});return n=i>1?new THREE.PlaneGeometry(1,1/i):new THREE.PlaneGeometry(i,1),o.posters[e]=new THREE.Mesh(n,s),r(o.posters[e])})})}var o={models:{},textures:{},posters:{}},n=function(e){function t(t,r,o){e.call(this,-1,1,1,-1,.1,400);var n=window.localStorage.getItem("dioramaViewSettings");n&&(n=JSON.parse(n),t||(t=(new THREE.Vector3).fromArray(n.focus)),r||(r=n.viewSize),o||(o=(new THREE.Vector3).fromArray(n.lookDirection))),this._viewSize=r||40,this._focus=t||new THREE.Vector3,this._lookDirection=o||new THREE.Vector3(0,-1,0),this.gridHelper=new THREE.GridHelper(300,1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={viewSize:{},focus:{},lookDirection:{}};return r.viewSize.get=function(){return this._viewSize},r.viewSize.set=function(e){this._viewSize=e,this.recomputeViewport()},r.focus.get=function(){return this._focus},r.focus.set=function(e){this._focus.copy(e),this.recomputeViewport()},r.lookDirection.get=function(){return this._lookDirection},r.lookDirection.set=function(e){this._lookDirection.copy(e),this.recomputeViewport()},t.prototype.registerHooks=function(e){var t=this;t.renderer=e,document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var r=document.createElement("p");r.innerHTML=["Middle click and drag to pan","Mouse wheel to zoom","Arrow keys to rotate"].join("<br/>"),Object.assign(r.style,{position:"fixed",top:"10px",left:"10px",margin:0}),document.body.appendChild(r),window.addEventListener("resize",function(e){return t.recomputeViewport()}),t.recomputeViewport();var o=null,n=null;window.addEventListener("mousedown",function(e){1===e.button&&(o={x:e.clientX,y:e.clientY},n=t._focus.clone())}),window.addEventListener("mouseup",function(e){1===e.button&&(o=null,n=null)}),window.addEventListener("mousemove",function(e){if(o){var r=document.body,i=r.clientWidth,s=r.clientHeight,a=Math.sqrt(i*i+s*s)/t._viewSize,c=e.clientX-o.x,l=e.clientY-o.y,u=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._focus.copy(n).add(t.up.clone().multiplyScalar(l/a)).add(u.multiplyScalar(-c/a)),t.recomputeViewport()}}),window.addEventListener("wheel",function(e){e.deltaY<0?(t._viewSize*=.9,t.recomputeViewport()):e.deltaY>0&&(t._viewSize*=1.1,t.recomputeViewport())}),window.addEventListener("keydown",function(e){if("ArrowDown"===e.key){var r=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(r,Math.PI/2),t.recomputeViewport()}else if("ArrowUp"===e.key){var o=(new THREE.Vector3).crossVectors(t._lookDirection,t.up);t._lookDirection.applyAxisAngle(o,-Math.PI/2),t.recomputeViewport()}else"ArrowLeft"===e.key?(t._lookDirection.applyAxisAngle(t.up,-Math.PI/2),t.recomputeViewport()):"ArrowRight"===e.key&&(t._lookDirection.applyAxisAngle(t.up,Math.PI/2),t.recomputeViewport())})},t.prototype.recomputeViewport=function(){var e=document.body,t=e.clientWidth,r=e.clientHeight;this.renderer.setSize(t,r);var o=t/r,n=Math.sqrt(this._viewSize*this._viewSize/(o*o+1)),i=o*n;this.left=-i/2,this.right=i/2,this.top=n/2,this.bottom=-n/2,this.updateProjectionMatrix(),this.position.copy(this._focus).sub(this._lookDirection.clone().multiplyScalar(200)),1===Math.abs(this._lookDirection.normalize().dot(new THREE.Vector3(0,-1,0)))?this.up.set(0,0,1):this.up.set(0,1,0),this.lookAt(this._focus),window.localStorage.setItem("dioramaViewSettings",JSON.stringify({focus:this._focus.toArray(),viewSize:this._viewSize,lookDirection:this._lookDirection.toArray()}))},Object.defineProperties(t.prototype,r),t}(THREE.OrthographicCamera),i=function(e){void 0===e&&(e={});var t=e.bgColor;void 0===t&&(t=11184810);var r=e.gridOffset;void 0===r&&(r=[0,0,0]);var i=e.fullspace;void 0===i&&(i=!1);var s=this;s._cache=o,s.scene=new THREE.Scene,altspace.inClient?(s.renderer=altspace.getThreeJSRenderer(),s._envPromise=Promise.all([altspace.getEnclosure(),altspace.getSpace()]).then(function(e){function t(){s.scene.scale.setScalar(r.pixelsPerMeter),s.env=Object.freeze(Object.assign({},r,o))}var r=e[0],o=e[1];t(),i?(s._fsPromise=r.requestFullspace().catch(function(e){return console.log("Request for fullspace denied")}),r.addEventListener("fullspacechange",t)):s._fsPromise=Promise.resolve()})):(s.renderer=new THREE.WebGLRenderer,s.renderer.setSize(document.body.clientWidth,document.body.clientHeight),s.renderer.setClearColor(t),document.body.appendChild(s.renderer.domElement),s.previewCamera=new n,s.previewCamera.gridHelper.position.fromArray(r),s.scene.add(s.previewCamera,s.previewCamera.gridHelper),s.previewCamera.registerHooks(s.renderer),altspace.utilities.shims.cursor.init(s.scene,s.previewCamera,{renderer:s.renderer}),s.env=Object.freeze({innerWidth:1024,innerHeight:1024,innerDepth:1024,pixelsPerMeter:i?1:1024/3,sid:"browser",name:"browser",templateSid:"browser"}),s._envPromise=Promise.resolve(),s._fsPromise=Promise.resolve())};return i.prototype.start=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this,o={};e.forEach(function(e){function t(e){void 0===o[e]?o[e]=!0:o[e]===!0&&(o[e]=!1)}Object.keys(e.assets.textures||{}).map(function(t){return e.assets.textures[t]}).forEach(t),Object.keys(e.assets.models||{}).map(function(t){return e.assets.models[t]}).forEach(t),Object.keys(e.assets.posters||{}).map(function(t){return e.assets.posters[t]}).forEach(t)});var n=e.reduce(function(e,t){return e||t.needsSkeleton},!1);n&&altspace.inClient?r._skelPromise=altspace.getThreeJSTrackingSkeleton().then(function(e){r.scene.add(e),r.env.skel=e}):r._skelPromise=Promise.resolve(),Promise.all([r._envPromise,r._fsPromise,r._skelPromise]).then(function(){e.forEach(function(e){var t=null;if(e instanceof THREE.Object3D?t=e:(t=new THREE.Object3D,e.transform?(t.matrix.fromArray(e.transform),t.matrix.decompose(t.position,t.quaternion,t.scale)):(e.position&&t.position.fromArray(e.position),e.rotation&&t.rotation.fromArray(e.rotation))),e.verticalAlign){var n=r.env.innerHeight/(2*r.env.pixelsPerMeter);switch(e.verticalAlign){case"top":t.translateY(n);break;case"bottom":t.translateY(-n);break;case"middle":break;default:console.warn('Invalid value for "verticalAlign" - ',e.verticalAlign)}}r.scene.add(t),r.previewCamera&&t.add(new THREE.AxisHelper(1)),r.loadAssets(e.assets,o).then(function(o){e.initialize(r.env,t,o)})})}),window.requestAnimationFrame(function e(t){window.requestAnimationFrame(e),r.scene.updateAllBehaviors(),window.TWEEN&&TWEEN.update(),r.renderer.render(r.scene,r.previewCamera)})},i.prototype.loadAssets=function(n,i){return new Promise(function(s,a){Promise.all(Object.keys(n.models||{}).map(function(t){return e(n.models[t])}).concat(Object.keys(n.textures||{}).map(function(e){return t(n.textures[e])}),Object.keys(n.posters||{}).map(function(e){return r(n.posters[e])}))).then(function(){var e={models:{},textures:{},posters:{}};for(var t in n.models){var r=n.models[t],a=o.models[r];e.models[t]=a?i[r]?a:a.clone():null}for(var c in n.textures){var l=n.textures[c],u=o.textures[l];e.textures[c]=u?i[l]?u:u.clone():null}for(var d in n.posters){var p=n.posters[d],m=o.posters[p];e.posters[d]=m?i[p]?m:m.clone():null}s(e)}).catch(function(e){return console.error(e)})})},i}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9sb2FkZXJzLmpzIiwiLi4vc3JjL2NhbWVyYS5qcyIsIi4uL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmxldCBjYWNoZSA9IHttb2RlbHM6IHt9LCB0ZXh0dXJlczoge30sIHBvc3RlcnM6IHt9fTtcclxuXHJcbmZ1bmN0aW9uIE1vZGVsUHJvbWlzZSh1cmwpXHJcbntcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuXHR7XHJcblx0XHRpZihjYWNoZS5tb2RlbHNbdXJsXSl7XHJcblx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOT1RFOiBnbFRGIGxvYWRlciBkb2VzIG5vdCBjYXRjaCBlcnJvcnNcclxuXHRcdGVsc2UgaWYoL1xcLmdsdGYkL2kudGVzdCh1cmwpKXtcclxuXHRcdFx0aWYoVEhSRUUuZ2xURkxvYWRlcil7XHJcblx0XHRcdFx0bGV0IGxvYWRlciA9IG5ldyBUSFJFRS5nbFRGTG9hZGVyKCk7XHJcblx0XHRcdFx0bG9hZGVyLmxvYWQodXJsLCAocmVzdWx0KSA9PiB7XHJcblx0XHRcdFx0XHRjYWNoZS5tb2RlbHNbdXJsXSA9IHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKFRIUkVFLkdMVEZMb2FkZXIpe1xyXG5cdFx0XHRcdGxldCBsb2FkZXIgPSBuZXcgVEhSRUUuR0xURkxvYWRlcigpO1xyXG5cdFx0XHRcdGxvYWRlci5sb2FkKHVybCwgcmVzdWx0ID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcblx0XHRcdFx0XHRjYWNoZS5tb2RlbHNbdXJsXSA9IHJlc3VsdC5zY2VuZS5jaGlsZHJlblswXTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLm1vZGVsc1t1cmxdKTtcclxuXHRcdFx0XHR9LCBudWxsLCByZWplY3QpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYGdsVEYgbG9hZGVyIG5vdCBmb3VuZC4gXCIke3VybH1cIiBub3QgbG9hZGVkLmApO1xyXG5cdFx0XHRcdHJlamVjdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZWxzZSBpZigvXFwuZGFlJC9pLnRlc3QodXJsKSl7XHJcblx0XHRcdGlmKFRIUkVFLkNvbGxhZGFMb2FkZXIpe1xyXG5cdFx0XHRcdGxldCBsb2FkZXIgPSBuZXcgVEhSRUUuQ29sbGFkYUxvYWRlcigpO1xyXG5cdFx0XHRcdGxvYWRlci5sb2FkKHVybCwgcmVzdWx0ID0+IHtcclxuXHRcdFx0XHRcdGNhY2hlLm1vZGVsc1t1cmxdID0gcmVzdWx0LnNjZW5lLmNoaWxkcmVuWzBdO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc29sdmUocmVzdWx0LnNjZW5lLmNoaWxkcmVuWzBdKVxyXG5cdFx0XHRcdH0sIG51bGwsIHJlamVjdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgQ29sbGFkYSBsb2FkZXIgbm90IGZvdW5kLiBcIiR7dXJsfVwiIG5vdCBsb2FkZWQuYCk7XHJcblx0XHRcdFx0cmVqZWN0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gVGV4dHVyZVByb21pc2UodXJsKXtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuXHR7XHJcblx0XHRpZihjYWNoZS50ZXh0dXJlc1t1cmxdKVxyXG5cdFx0XHRyZXR1cm4gcmVzb2x2ZShjYWNoZS50ZXh0dXJlc1t1cmxdKTtcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRsZXQgbG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuXHRcdFx0bG9hZGVyLmxvYWQodXJsLCB0ZXh0dXJlID0+IHtcclxuXHRcdFx0XHRjYWNoZS50ZXh0dXJlc1t1cmxdID0gdGV4dHVyZTtcclxuXHRcdFx0XHRyZXR1cm4gcmVzb2x2ZSh0ZXh0dXJlKTtcclxuXHRcdFx0fSwgbnVsbCwgcmVqZWN0KTtcclxuXHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuY2xhc3MgVmlkZW9Qcm9taXNlIGV4dGVuZHMgUHJvbWlzZSB7XHJcblx0Y29uc3RydWN0b3IodXJsKVxyXG5cdHtcclxuXHRcdC8vIHN0YXJ0IGxvYWRlclxyXG5cdFx0dmFyIHZpZFNyYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XHJcblx0XHR2aWRTcmMuYXV0b3BsYXkgPSB0cnVlO1xyXG5cdFx0dmlkU3JjLmxvb3AgPSB0cnVlO1xyXG5cdFx0dmlkU3JjLnNyYyA9IHVybDtcclxuXHRcdHZpZFNyYy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2aWRTcmMpO1xyXG5cclxuXHRcdHZhciB0ZXggPSBuZXcgVEhSRUUuVmlkZW9UZXh0dXJlKHZpZFNyYyk7XHJcblx0XHR0ZXgubWluRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xyXG5cdFx0dGV4Lm1hZ0ZpbHRlciA9IFRIUkVFLkxpbmVhckZpbHRlcjtcclxuXHRcdHRleC5mb3JtYXQgPSBUSFJFRS5SR0JGb3JtYXQ7XHJcblxyXG5cdFx0Ly9jYWNoZS52aWRlb3NbdXJsXSA9IHRleDtcclxuXHRcdC8vcGF5bG9hZC52aWRlb3NbaWRdID0gY2FjaGUudmlkZW9zW3VybF07XHJcblxyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0ZXgpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gUG9zdGVyUHJvbWlzZSh1cmwpe1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PlxyXG5cdHtcclxuXHRcdGlmKGNhY2hlLnBvc3RlcnNbdXJsXSlcclxuXHRcdFx0cmV0dXJuIHJlc29sdmUoY2FjaGUucG9zdGVyc1t1cmxdKTtcclxuXHRcdGVsc2UgcmV0dXJuIChuZXcgVGV4dHVyZVByb21pc2UodXJsKSkudGhlbih0ZXggPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxldCByYXRpbyA9IHRleC5pbWFnZS53aWR0aCAvIHRleC5pbWFnZS5oZWlnaHQ7XHJcblx0XHRcdFx0bGV0IGdlbywgbWF0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHttYXA6IHRleCwgc2lkZTogVEhSRUUuRG91YmxlU2lkZX0pO1xyXG5cclxuXHRcdFx0XHRpZihyYXRpbyA+IDEpe1xyXG5cdFx0XHRcdFx0Z2VvID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMSwgMS9yYXRpbyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0Z2VvID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkocmF0aW8sIDEpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y2FjaGUucG9zdGVyc1t1cmxdID0gbmV3IFRIUkVFLk1lc2goZ2VvLCBtYXQpO1xyXG5cdFx0XHRcdHJldHVybiByZXNvbHZlKGNhY2hlLnBvc3RlcnNbdXJsXSk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IE1vZGVsUHJvbWlzZSwgVGV4dHVyZVByb21pc2UsIFZpZGVvUHJvbWlzZSwgUG9zdGVyUHJvbWlzZSwgY2FjaGUgYXMgX2NhY2hlIH07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXZpZXdDYW1lcmEgZXh0ZW5kcyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmFcclxue1xyXG5cdGNvbnN0cnVjdG9yKGZvY3VzLCB2aWV3U2l6ZSwgbG9va0RpcmVjdGlvbilcclxuXHR7XHJcblx0XHRzdXBlcigtMSwgMSwgMSwgLTEsIC4xLCA0MDApO1xyXG5cclxuXHRcdGxldCBzZXR0aW5ncyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGlvcmFtYVZpZXdTZXR0aW5ncycpO1xyXG5cdFx0aWYoc2V0dGluZ3Mpe1xyXG5cdFx0XHRzZXR0aW5ncyA9IEpTT04ucGFyc2Uoc2V0dGluZ3MpO1xyXG5cdFx0XHRpZighZm9jdXMpXHJcblx0XHRcdFx0Zm9jdXMgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheShzZXR0aW5ncy5mb2N1cyk7XHJcblx0XHRcdGlmKCF2aWV3U2l6ZSlcclxuXHRcdFx0XHR2aWV3U2l6ZSA9IHNldHRpbmdzLnZpZXdTaXplO1xyXG5cdFx0XHRpZighbG9va0RpcmVjdGlvbilcclxuXHRcdFx0XHRsb29rRGlyZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoc2V0dGluZ3MubG9va0RpcmVjdGlvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdmlld1NpemUgPSB2aWV3U2l6ZSB8fCA0MDtcclxuXHRcdHRoaXMuX2ZvY3VzID0gZm9jdXMgfHwgbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHRcdHRoaXMuX2xvb2tEaXJlY3Rpb24gPSBsb29rRGlyZWN0aW9uIHx8IG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCk7XHJcblx0XHR0aGlzLmdyaWRIZWxwZXIgPSBuZXcgVEhSRUUuR3JpZEhlbHBlcigzMDAsIDEpO1xyXG5cdFx0Ly90aGlzLmdyaWRIZWxwZXIucXVhdGVybmlvbi5zZXRGcm9tVW5pdFZlY3RvcnMoIG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCksIHRoaXMuX2xvb2tEaXJlY3Rpb24gKTtcclxuXHR9XHJcblxyXG5cdGdldCB2aWV3U2l6ZSgpe1xyXG5cdFx0cmV0dXJuIHRoaXMuX3ZpZXdTaXplO1xyXG5cdH1cclxuXHRzZXQgdmlld1NpemUodmFsKXtcclxuXHRcdHRoaXMuX3ZpZXdTaXplID0gdmFsO1xyXG5cdFx0dGhpcy5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGZvY3VzKCl7XHJcblx0XHRyZXR1cm4gdGhpcy5fZm9jdXM7XHJcblx0fVxyXG5cdHNldCBmb2N1cyh2YWwpe1xyXG5cdFx0dGhpcy5fZm9jdXMuY29weSh2YWwpO1xyXG5cdFx0dGhpcy5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGxvb2tEaXJlY3Rpb24oKXtcclxuXHRcdHJldHVybiB0aGlzLl9sb29rRGlyZWN0aW9uO1xyXG5cdH1cclxuXHRzZXQgbG9va0RpcmVjdGlvbih2YWwpe1xyXG5cdFx0dGhpcy5fbG9va0RpcmVjdGlvbi5jb3B5KHZhbCk7XHJcblx0XHR0aGlzLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0fVxyXG5cclxuXHRyZWdpc3Rlckhvb2tzKHJlbmRlcmVyKVxyXG5cdHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHNlbGYucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcblx0XHQvLyBzZXQgc3R5bGVzIG9uIHRoZSBwYWdlLCBzbyB0aGUgcHJldmlldyB3b3JrcyByaWdodFxyXG5cdFx0ZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuXHRcdGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAnMCc7XHJcblx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcblxyXG5cdFx0dmFyIGluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcblx0XHRpbmZvLmlubmVySFRNTCA9IFsnTWlkZGxlIGNsaWNrIGFuZCBkcmFnIHRvIHBhbicsICdNb3VzZSB3aGVlbCB0byB6b29tJywgJ0Fycm93IGtleXMgdG8gcm90YXRlJ10uam9pbignPGJyLz4nKTtcclxuXHRcdE9iamVjdC5hc3NpZ24oaW5mby5zdHlsZSwge1xyXG5cdFx0XHRwb3NpdGlvbjogJ2ZpeGVkJyxcclxuXHRcdFx0dG9wOiAnMTBweCcsXHJcblx0XHRcdGxlZnQ6ICcxMHB4JyxcclxuXHRcdFx0bWFyZ2luOiAwXHJcblx0XHR9KTtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5mbyk7XHJcblxyXG5cdFx0Ly8gcmVzaXplIHRoZSBwcmV2aWV3IGNhbnZhcyB3aGVuIHdpbmRvdyByZXNpemVzXHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZSA9PiBzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCkpO1xyXG5cdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cclxuXHRcdC8vIG1pZGRsZSBjbGljayBhbmQgZHJhZyB0byBwYW4gdmlld1xyXG5cdFx0dmFyIGRyYWdTdGFydCA9IG51bGwsIGZvY3VzU3RhcnQgPSBudWxsO1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmJ1dHRvbiA9PT0gMSl7XHJcblx0XHRcdFx0ZHJhZ1N0YXJ0ID0ge3g6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZfTtcclxuXHRcdFx0XHRmb2N1c1N0YXJ0ID0gc2VsZi5fZm9jdXMuY2xvbmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmJ1dHRvbiA9PT0gMSl7XHJcblx0XHRcdFx0ZHJhZ1N0YXJ0ID0gbnVsbDtcclxuXHRcdFx0XHRmb2N1c1N0YXJ0ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XHJcblx0XHRcdGlmKGRyYWdTdGFydClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxldCB7Y2xpZW50V2lkdGg6IHcsIGNsaWVudEhlaWdodDogaH0gPSBkb2N1bWVudC5ib2R5O1xyXG5cdFx0XHRcdGxldCBwaXhlbHNQZXJNZXRlciA9IE1hdGguc3FydCh3KncraCpoKSAvIHNlbGYuX3ZpZXdTaXplO1xyXG5cdFx0XHRcdGxldCBkeCA9IGUuY2xpZW50WCAtIGRyYWdTdGFydC54LCBkeSA9IGUuY2xpZW50WSAtIGRyYWdTdGFydC55O1xyXG5cdFx0XHRcdGxldCByaWdodCA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKHNlbGYuX2xvb2tEaXJlY3Rpb24sIHNlbGYudXApO1xyXG5cclxuXHRcdFx0XHRzZWxmLl9mb2N1cy5jb3B5KGZvY3VzU3RhcnQpXHJcblx0XHRcdFx0XHQuYWRkKHNlbGYudXAuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihkeS9waXhlbHNQZXJNZXRlcikpXHJcblx0XHRcdFx0XHQuYWRkKHJpZ2h0Lm11bHRpcGx5U2NhbGFyKC1keC9waXhlbHNQZXJNZXRlcikpO1xyXG5cclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIHdoZWVsIHRvIHpvb21cclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGUgPT4ge1xyXG5cdFx0XHRpZihlLmRlbHRhWSA8IDApe1xyXG5cdFx0XHRcdHNlbGYuX3ZpZXdTaXplICo9IDAuOTA7XHJcblx0XHRcdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYoZS5kZWx0YVkgPiAwKXtcclxuXHRcdFx0XHRzZWxmLl92aWV3U2l6ZSAqPSAxLjE7XHJcblx0XHRcdFx0c2VsZi5yZWNvbXB1dGVWaWV3cG9ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBhcnJvdyBrZXlzIHRvIHJvdGF0ZVxyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcclxuXHRcdFx0aWYoZS5rZXkgPT09ICdBcnJvd0Rvd24nKXtcclxuXHRcdFx0XHRsZXQgcmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhzZWxmLl9sb29rRGlyZWN0aW9uLCBzZWxmLnVwKTtcclxuXHRcdFx0XHRzZWxmLl9sb29rRGlyZWN0aW9uLmFwcGx5QXhpc0FuZ2xlKHJpZ2h0LCBNYXRoLlBJLzIpO1xyXG5cdFx0XHRcdC8vc2VsZi5ncmlkSGVscGVyLnJvdGF0ZU9uQXhpcyhyaWdodCwgTWF0aC5QSS8yKTtcclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlLmtleSA9PT0gJ0Fycm93VXAnKXtcclxuXHRcdFx0XHRsZXQgcmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNyb3NzVmVjdG9ycyhzZWxmLl9sb29rRGlyZWN0aW9uLCBzZWxmLnVwKTtcclxuXHRcdFx0XHRzZWxmLl9sb29rRGlyZWN0aW9uLmFwcGx5QXhpc0FuZ2xlKHJpZ2h0LCAtTWF0aC5QSS8yKTtcclxuXHRcdFx0XHQvL3NlbGYuZ3JpZEhlbHBlci5yb3RhdGVPbkF4aXMocmlnaHQsIC1NYXRoLlBJLzIpO1xyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlLmtleSA9PT0gJ0Fycm93TGVmdCcpe1xyXG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUoc2VsZi51cCwgLU1hdGguUEkvMik7XHJcblx0XHRcdFx0Ly9zZWxmLmdyaWRIZWxwZXIucm90YXRlT25BeGlzKHNlbGYudXAsIC1NYXRoLlBJLzIpO1xyXG5cdFx0XHRcdHNlbGYucmVjb21wdXRlVmlld3BvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKGUua2V5ID09PSAnQXJyb3dSaWdodCcpe1xyXG5cdFx0XHRcdHNlbGYuX2xvb2tEaXJlY3Rpb24uYXBwbHlBeGlzQW5nbGUoc2VsZi51cCwgTWF0aC5QSS8yKTtcclxuXHRcdFx0XHQvL3NlbGYuZ3JpZEhlbHBlci5yb3RhdGVPbkF4aXMoc2VsZi51cCwgTWF0aC5QSS8yKTtcclxuXHRcdFx0XHRzZWxmLnJlY29tcHV0ZVZpZXdwb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVjb21wdXRlVmlld3BvcnQoKVxyXG5cdHtcclxuXHRcdHZhciB7Y2xpZW50V2lkdGg6IHcsIGNsaWVudEhlaWdodDogaH0gPSBkb2N1bWVudC5ib2R5O1xyXG5cclxuXHRcdC8vIHJlc2l6ZSBjYW52YXNcclxuXHRcdHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3LCBoKTtcclxuXHJcblx0XHQvLyBjb21wdXRlIHdpbmRvdyBkaW1lbnNpb25zIGZyb20gdmlldyBzaXplXHJcblx0XHR2YXIgcmF0aW8gPSB3L2g7XHJcblx0XHR2YXIgaGVpZ2h0ID0gTWF0aC5zcXJ0KCAodGhpcy5fdmlld1NpemUqdGhpcy5fdmlld1NpemUpIC8gKHJhdGlvKnJhdGlvICsgMSkgKTtcclxuXHRcdHZhciB3aWR0aCA9IHJhdGlvICogaGVpZ2h0O1xyXG5cclxuXHRcdC8vIHNldCBmcnVzdHJ1bSBlZGdlc1xyXG5cdFx0dGhpcy5sZWZ0ID0gLXdpZHRoLzI7XHJcblx0XHR0aGlzLnJpZ2h0ID0gd2lkdGgvMjtcclxuXHRcdHRoaXMudG9wID0gaGVpZ2h0LzI7XHJcblx0XHR0aGlzLmJvdHRvbSA9IC1oZWlnaHQvMjtcclxuXHJcblx0XHR0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuXHJcblx0XHQvLyB1cGRhdGUgcG9zaXRpb25cclxuXHRcdHRoaXMucG9zaXRpb24uY29weSh0aGlzLl9mb2N1cykuc3ViKCB0aGlzLl9sb29rRGlyZWN0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoMjAwKSApO1xyXG5cdFx0aWYoIE1hdGguYWJzKCB0aGlzLl9sb29rRGlyZWN0aW9uLm5vcm1hbGl6ZSgpLmRvdChuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApKSApID09PSAxIClcclxuXHRcdFx0dGhpcy51cC5zZXQoMCwwLDEpOyAvLyBpZiB3ZSdyZSBsb29raW5nIGRvd24gdGhlIFkgYXhpc1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnVwLnNldCgwLDEsMCk7XHJcblx0XHR0aGlzLmxvb2tBdCggdGhpcy5fZm9jdXMgKTtcclxuXHJcblx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Rpb3JhbWFWaWV3U2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdGZvY3VzOiB0aGlzLl9mb2N1cy50b0FycmF5KCksXHJcblx0XHRcdHZpZXdTaXplOiB0aGlzLl92aWV3U2l6ZSxcclxuXHRcdFx0bG9va0RpcmVjdGlvbjogdGhpcy5fbG9va0RpcmVjdGlvbi50b0FycmF5KClcclxuXHRcdH0pKTtcclxuXHR9XHJcbn1cclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0ICogYXMgTG9hZGVycyBmcm9tICcuL2xvYWRlcnMnO1xyXG5pbXBvcnQgUHJldmlld0NhbWVyYSBmcm9tICcuL2NhbWVyYSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaW9yYW1hXHJcbntcclxuXHRjb25zdHJ1Y3Rvcih7YmdDb2xvcj0weGFhYWFhYSwgZ3JpZE9mZnNldD1bMCwwLDBdLCBmdWxsc3BhY2U9ZmFsc2V9ID0ge30pXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0c2VsZi5fY2FjaGUgPSBMb2FkZXJzLl9jYWNoZTtcclxuXHRcdHNlbGYuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuXHJcblx0XHQvLyBzZXQgdXAgcmVuZGVyZXIgYW5kIHNjYWxlXHJcblx0XHRpZihhbHRzcGFjZS5pbkNsaWVudClcclxuXHRcdHtcclxuXHRcdFx0c2VsZi5yZW5kZXJlciA9IGFsdHNwYWNlLmdldFRocmVlSlNSZW5kZXJlcigpO1xyXG5cdFx0XHRzZWxmLl9lbnZQcm9taXNlID0gUHJvbWlzZS5hbGwoW2FsdHNwYWNlLmdldEVuY2xvc3VyZSgpLCBhbHRzcGFjZS5nZXRTcGFjZSgpXSlcclxuXHRcdFx0LnRoZW4oKFtlLCBzXSkgPT4ge1xyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBhZGp1c3RTY2FsZSgpe1xyXG5cdFx0XHRcdFx0c2VsZi5zY2VuZS5zY2FsZS5zZXRTY2FsYXIoZS5waXhlbHNQZXJNZXRlcik7XHJcblx0XHRcdFx0XHRzZWxmLmVudiA9IE9iamVjdC5mcmVlemUoT2JqZWN0LmFzc2lnbih7fSwgZSwgcykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhZGp1c3RTY2FsZSgpO1xyXG5cclxuXHRcdFx0XHRpZihmdWxsc3BhY2Upe1xyXG5cdFx0XHRcdFx0c2VsZi5fZnNQcm9taXNlID0gZS5yZXF1ZXN0RnVsbHNwYWNlKCkuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKCdSZXF1ZXN0IGZvciBmdWxsc3BhY2UgZGVuaWVkJykpO1xyXG5cdFx0XHRcdFx0ZS5hZGRFdmVudExpc3RlbmVyKCdmdWxsc3BhY2VjaGFuZ2UnLCBhZGp1c3RTY2FsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHNlbGYuX2ZzUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdHtcclxuXHRcdFx0Ly8gc2V0IHVwIHByZXZpZXcgcmVuZGVyZXIsIGluIGNhc2Ugd2UncmUgb3V0IG9mIHdvcmxkXHJcblx0XHRcdHNlbGYucmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xyXG5cdFx0XHRzZWxmLnJlbmRlcmVyLnNldFNpemUoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpO1xyXG5cdFx0XHRzZWxmLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoIGJnQ29sb3IgKTtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZWxmLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG5cclxuXHRcdFx0c2VsZi5wcmV2aWV3Q2FtZXJhID0gbmV3IFByZXZpZXdDYW1lcmEoKTtcclxuXHRcdFx0c2VsZi5wcmV2aWV3Q2FtZXJhLmdyaWRIZWxwZXIucG9zaXRpb24uZnJvbUFycmF5KGdyaWRPZmZzZXQpO1xyXG5cdFx0XHRzZWxmLnNjZW5lLmFkZChzZWxmLnByZXZpZXdDYW1lcmEsIHNlbGYucHJldmlld0NhbWVyYS5ncmlkSGVscGVyKTtcclxuXHRcdFx0c2VsZi5wcmV2aWV3Q2FtZXJhLnJlZ2lzdGVySG9va3Moc2VsZi5yZW5kZXJlcik7XHJcblxyXG5cdFx0XHQvLyBzZXQgdXAgY3Vyc29yIGVtdWxhdGlvblxyXG5cdFx0XHRhbHRzcGFjZS51dGlsaXRpZXMuc2hpbXMuY3Vyc29yLmluaXQoc2VsZi5zY2VuZSwgc2VsZi5wcmV2aWV3Q2FtZXJhLCB7cmVuZGVyZXI6IHNlbGYucmVuZGVyZXJ9KTtcclxuXHJcblx0XHRcdC8vIHN0dWIgZW52aXJvbm1lbnRcclxuXHRcdFx0c2VsZi5lbnYgPSBPYmplY3QuZnJlZXplKHtcclxuXHRcdFx0XHRpbm5lcldpZHRoOiAxMDI0LFxyXG5cdFx0XHRcdGlubmVySGVpZ2h0OiAxMDI0LFxyXG5cdFx0XHRcdGlubmVyRGVwdGg6IDEwMjQsXHJcblx0XHRcdFx0cGl4ZWxzUGVyTWV0ZXI6IGZ1bGxzcGFjZSA/IDEgOiAxMDI0LzMsXHJcblx0XHRcdFx0c2lkOiAnYnJvd3NlcicsXHJcblx0XHRcdFx0bmFtZTogJ2Jyb3dzZXInLFxyXG5cdFx0XHRcdHRlbXBsYXRlU2lkOiAnYnJvd3NlcidcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzZWxmLl9lbnZQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcblx0XHRcdHNlbGYuX2ZzUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdHN0YXJ0KC4uLm1vZHVsZXMpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIGRldGVybWluZSB3aGljaCBhc3NldHMgYXJlbid0IHNoYXJlZFxyXG5cdFx0dmFyIHNpbmdsZXRvbnMgPSB7fTtcclxuXHRcdG1vZHVsZXMuZm9yRWFjaChtb2QgPT5cclxuXHRcdHtcclxuXHRcdFx0ZnVuY3Rpb24gY2hlY2tBc3NldCh1cmwpe1xyXG5cdFx0XHRcdGlmKHNpbmdsZXRvbnNbdXJsXSA9PT0gdW5kZWZpbmVkKSBzaW5nbGV0b25zW3VybF0gPSB0cnVlO1xyXG5cdFx0XHRcdGVsc2UgaWYoc2luZ2xldG9uc1t1cmxdID09PSB0cnVlKSBzaW5nbGV0b25zW3VybF0gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLnRleHR1cmVzIHx8IHt9KS5tYXAoayA9PiBtb2QuYXNzZXRzLnRleHR1cmVzW2tdKS5mb3JFYWNoKGNoZWNrQXNzZXQpO1xyXG5cdFx0XHRPYmplY3Qua2V5cyhtb2QuYXNzZXRzLm1vZGVscyB8fCB7fSkubWFwKGsgPT4gbW9kLmFzc2V0cy5tb2RlbHNba10pLmZvckVhY2goY2hlY2tBc3NldCk7XHJcblx0XHRcdE9iamVjdC5rZXlzKG1vZC5hc3NldHMucG9zdGVycyB8fCB7fSkubWFwKGsgPT4gbW9kLmFzc2V0cy5wb3N0ZXJzW2tdKS5mb3JFYWNoKGNoZWNrQXNzZXQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gZGV0ZXJtaW5lIGlmIHRoZSB0cmFja2luZyBza2VsZXRvbiBpcyBuZWVkZWRcclxuXHRcdGxldCBuZWVkc1NrZWxldG9uID0gbW9kdWxlcy5yZWR1Y2UoKG5zLG0pID0+IG5zIHx8IG0ubmVlZHNTa2VsZXRvbiwgZmFsc2UpO1xyXG5cdFx0aWYobmVlZHNTa2VsZXRvbiAmJiBhbHRzcGFjZS5pbkNsaWVudCl7XHJcblx0XHRcdHNlbGYuX3NrZWxQcm9taXNlID0gYWx0c3BhY2UuZ2V0VGhyZWVKU1RyYWNraW5nU2tlbGV0b24oKS50aGVuKHNrZWwgPT4ge1xyXG5cdFx0XHRcdHNlbGYuc2NlbmUuYWRkKHNrZWwpO1xyXG5cdFx0XHRcdHNlbGYuZW52LnNrZWwgPSBza2VsO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdFx0c2VsZi5fc2tlbFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuXHJcblx0XHRQcm9taXNlLmFsbChbc2VsZi5fZW52UHJvbWlzZSwgc2VsZi5fZnNQcm9taXNlLCBzZWxmLl9za2VsUHJvbWlzZV0pLnRoZW4oKCkgPT5cclxuXHRcdHtcclxuXHRcdFx0Ly8gY29uc3RydWN0IGRpb3JhbWFzXHJcblx0XHRcdG1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbihtb2R1bGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRsZXQgcm9vdCA9IG51bGw7XHJcblxyXG5cdFx0XHRcdGlmKG1vZHVsZSBpbnN0YW5jZW9mIFRIUkVFLk9iamVjdDNEKXtcclxuXHRcdFx0XHRcdHJvb3QgPSBtb2R1bGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyb290ID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gaGFuZGxlIGFic29sdXRlIHBvc2l0aW9uaW5nXHJcblx0XHRcdFx0XHRpZihtb2R1bGUudHJhbnNmb3JtKXtcclxuXHRcdFx0XHRcdFx0cm9vdC5tYXRyaXguZnJvbUFycmF5KG1vZHVsZS50cmFuc2Zvcm0pO1xyXG5cdFx0XHRcdFx0XHRyb290Lm1hdHJpeC5kZWNvbXBvc2Uocm9vdC5wb3NpdGlvbiwgcm9vdC5xdWF0ZXJuaW9uLCByb290LnNjYWxlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpZihtb2R1bGUucG9zaXRpb24pe1xyXG5cdFx0XHRcdFx0XHRcdHJvb3QucG9zaXRpb24uZnJvbUFycmF5KG1vZHVsZS5wb3NpdGlvbik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYobW9kdWxlLnJvdGF0aW9uKXtcclxuXHRcdFx0XHRcdFx0XHRyb290LnJvdGF0aW9uLmZyb21BcnJheShtb2R1bGUucm90YXRpb24pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBoYW5kbGUgcmVsYXRpdmUgcG9zaXRpb25pbmdcclxuXHRcdFx0XHRpZihtb2R1bGUudmVydGljYWxBbGlnbil7XHJcblx0XHRcdFx0XHRsZXQgaGFsZkhlaWdodCA9IHNlbGYuZW52LmlubmVySGVpZ2h0LygyKnNlbGYuZW52LnBpeGVsc1Blck1ldGVyKTtcclxuXHRcdFx0XHRcdHN3aXRjaChtb2R1bGUudmVydGljYWxBbGlnbil7XHJcblx0XHRcdFx0XHRjYXNlICd0b3AnOlxyXG5cdFx0XHRcdFx0XHRyb290LnRyYW5zbGF0ZVkoaGFsZkhlaWdodCk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnYm90dG9tJzpcclxuXHRcdFx0XHRcdFx0cm9vdC50cmFuc2xhdGVZKC1oYWxmSGVpZ2h0KTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdtaWRkbGUnOlxyXG5cdFx0XHRcdFx0XHQvLyBkZWZhdWx0XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCdJbnZhbGlkIHZhbHVlIGZvciBcInZlcnRpY2FsQWxpZ25cIiAtICcsIG1vZHVsZS52ZXJ0aWNhbEFsaWduKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzZWxmLnNjZW5lLmFkZChyb290KTtcclxuXHJcblx0XHRcdFx0aWYoc2VsZi5wcmV2aWV3Q2FtZXJhKXtcclxuXHRcdFx0XHRcdHJvb3QuYWRkKCBuZXcgVEhSRUUuQXhpc0hlbHBlcigxKSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0c2VsZi5sb2FkQXNzZXRzKG1vZHVsZS5hc3NldHMsIHNpbmdsZXRvbnMpLnRoZW4oKHJlc3VsdHMpID0+IHtcclxuXHRcdFx0XHRcdG1vZHVsZS5pbml0aWFsaXplKHNlbGYuZW52LCByb290LCByZXN1bHRzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBzdGFydCBhbmltYXRpbmdcclxuXHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gYW5pbWF0ZSh0aW1lc3RhbXApXHJcblx0XHR7XHJcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcblx0XHRcdHNlbGYuc2NlbmUudXBkYXRlQWxsQmVoYXZpb3JzKCk7XHJcblx0XHRcdGlmKHdpbmRvdy5UV0VFTikgVFdFRU4udXBkYXRlKCk7XHJcblx0XHRcdHNlbGYucmVuZGVyZXIucmVuZGVyKHNlbGYuc2NlbmUsIHNlbGYucHJldmlld0NhbWVyYSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGxvYWRBc3NldHMobWFuaWZlc3QsIHNpbmdsZXRvbnMpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PlxyXG5cdFx0e1xyXG5cdFx0XHQvLyBwb3B1bGF0ZSBjYWNoZVxyXG5cdFx0XHRQcm9taXNlLmFsbChbXHJcblxyXG5cdFx0XHRcdC8vIHBvcHVsYXRlIG1vZGVsIGNhY2hlXHJcblx0XHRcdFx0Li4uT2JqZWN0LmtleXMobWFuaWZlc3QubW9kZWxzIHx8IHt9KS5tYXAoaWQgPT4gTG9hZGVycy5Nb2RlbFByb21pc2UobWFuaWZlc3QubW9kZWxzW2lkXSkpLFxyXG5cclxuXHRcdFx0XHQvLyBwb3B1bGF0ZSBleHBsaWNpdCB0ZXh0dXJlIGNhY2hlXHJcblx0XHRcdFx0Li4uT2JqZWN0LmtleXMobWFuaWZlc3QudGV4dHVyZXMgfHwge30pLm1hcChpZCA9PiBMb2FkZXJzLlRleHR1cmVQcm9taXNlKG1hbmlmZXN0LnRleHR1cmVzW2lkXSkpLFxyXG5cclxuXHRcdFx0XHQvLyBnZW5lcmF0ZSBhbGwgcG9zdGVyc1xyXG5cdFx0XHRcdC4uLk9iamVjdC5rZXlzKG1hbmlmZXN0LnBvc3RlcnMgfHwge30pLm1hcChpZCA9PiBMb2FkZXJzLlBvc3RlclByb21pc2UobWFuaWZlc3QucG9zdGVyc1tpZF0pKVxyXG5cdFx0XHRdKVxyXG5cclxuXHRcdFx0LnRoZW4oKCkgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8vIHBvcHVsYXRlIHBheWxvYWQgZnJvbSBjYWNoZVxyXG5cdFx0XHRcdHZhciBwYXlsb2FkID0ge21vZGVsczoge30sIHRleHR1cmVzOiB7fSwgcG9zdGVyczoge319O1xyXG5cclxuXHRcdFx0XHRmb3IobGV0IGkgaW4gbWFuaWZlc3QubW9kZWxzKXtcclxuXHRcdFx0XHRcdGxldCB1cmwgPSBtYW5pZmVzdC5tb2RlbHNbaV07XHJcblx0XHRcdFx0XHRsZXQgdCA9IExvYWRlcnMuX2NhY2hlLm1vZGVsc1t1cmxdO1xyXG5cdFx0XHRcdFx0cGF5bG9hZC5tb2RlbHNbaV0gPSB0ID8gc2luZ2xldG9uc1t1cmxdID8gdCA6IHQuY2xvbmUoKSA6IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmb3IobGV0IGkgaW4gbWFuaWZlc3QudGV4dHVyZXMpe1xyXG5cdFx0XHRcdFx0bGV0IHVybCA9IG1hbmlmZXN0LnRleHR1cmVzW2ldO1xyXG5cdFx0XHRcdFx0bGV0IHQgPSBMb2FkZXJzLl9jYWNoZS50ZXh0dXJlc1t1cmxdO1xyXG5cdFx0XHRcdFx0cGF5bG9hZC50ZXh0dXJlc1tpXSA9IHQgPyBzaW5nbGV0b25zW3VybF0gPyB0IDogdC5jbG9uZSgpIDogbnVsbDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZvcihsZXQgaSBpbiBtYW5pZmVzdC5wb3N0ZXJzKXtcclxuXHRcdFx0XHRcdGxldCB1cmwgPSBtYW5pZmVzdC5wb3N0ZXJzW2ldO1xyXG5cdFx0XHRcdFx0bGV0IHQgPSBMb2FkZXJzLl9jYWNoZS5wb3N0ZXJzW3VybF07XHJcblx0XHRcdFx0XHRwYXlsb2FkLnBvc3RlcnNbaV0gPSB0ID8gc2luZ2xldG9uc1t1cmxdID8gdCA6IHQuY2xvbmUoKSA6IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXNvbHZlKHBheWxvYWQpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJNb2RlbFByb21pc2UiLCJ1cmwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNhY2hlIiwibW9kZWxzIiwidGVzdCIsIlRIUkVFIiwiZ2xURkxvYWRlciIsImxldCIsImxvYWRlciIsImxvYWQiLCJyZXN1bHQiLCJzY2VuZSIsImNoaWxkcmVuIiwiR0xURkxvYWRlciIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIkNvbGxhZGFMb2FkZXIiLCJUZXh0dXJlUHJvbWlzZSIsInRleHR1cmVzIiwiVGV4dHVyZUxvYWRlciIsInRleHR1cmUiLCJQb3N0ZXJQcm9taXNlIiwicG9zdGVycyIsInRoZW4iLCJ0ZXgiLCJnZW8iLCJyYXRpbyIsImltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXQiLCJNZXNoQmFzaWNNYXRlcmlhbCIsIm1hcCIsInNpZGUiLCJEb3VibGVTaWRlIiwiUGxhbmVHZW9tZXRyeSIsIk1lc2giLCJQcmV2aWV3Q2FtZXJhIiwiZm9jdXMiLCJ2aWV3U2l6ZSIsImxvb2tEaXJlY3Rpb24iLCJzdXBlciIsInRoaXMiLCJzZXR0aW5ncyIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJWZWN0b3IzIiwiZnJvbUFycmF5IiwiX3ZpZXdTaXplIiwiX2ZvY3VzIiwiX2xvb2tEaXJlY3Rpb24iLCJncmlkSGVscGVyIiwiR3JpZEhlbHBlciIsInByb3RvdHlwZUFjY2Vzc29ycyIsInZhbCIsInJlY29tcHV0ZVZpZXdwb3J0IiwiY29weSIsInJlZ2lzdGVySG9va3MiLCJyZW5kZXJlciIsInNlbGYiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJvdmVyZmxvdyIsImluZm8iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiam9pbiIsIk9iamVjdCIsImFzc2lnbiIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJkcmFnU3RhcnQiLCJmb2N1c1N0YXJ0IiwiYnV0dG9uIiwieCIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsImNsb25lIiwidyIsImgiLCJwaXhlbHNQZXJNZXRlciIsIk1hdGgiLCJzcXJ0IiwiZHgiLCJkeSIsInJpZ2h0IiwiY3Jvc3NWZWN0b3JzIiwidXAiLCJhZGQiLCJtdWx0aXBseVNjYWxhciIsImRlbHRhWSIsImtleSIsImFwcGx5QXhpc0FuZ2xlIiwiUEkiLCJzZXRTaXplIiwiYm90dG9tIiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsInN1YiIsImFicyIsIm5vcm1hbGl6ZSIsImRvdCIsInNldCIsImxvb2tBdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ0b0FycmF5IiwiT3J0aG9ncmFwaGljQ2FtZXJhIiwiRGlvcmFtYSIsInJlZiIsIl9jYWNoZSIsIkxvYWRlcnMuX2NhY2hlIiwiU2NlbmUiLCJhbHRzcGFjZSIsImluQ2xpZW50IiwiZ2V0VGhyZWVKU1JlbmRlcmVyIiwiX2VudlByb21pc2UiLCJhbGwiLCJnZXRFbmNsb3N1cmUiLCJnZXRTcGFjZSIsImFkanVzdFNjYWxlIiwic2NhbGUiLCJzZXRTY2FsYXIiLCJlbnYiLCJmcmVlemUiLCJzIiwiZnVsbHNwYWNlIiwiX2ZzUHJvbWlzZSIsInJlcXVlc3RGdWxsc3BhY2UiLCJjYXRjaCIsIldlYkdMUmVuZGVyZXIiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInNldENsZWFyQ29sb3IiLCJiZ0NvbG9yIiwiZG9tRWxlbWVudCIsInByZXZpZXdDYW1lcmEiLCJncmlkT2Zmc2V0IiwidXRpbGl0aWVzIiwic2hpbXMiLCJjdXJzb3IiLCJpbml0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiaW5uZXJEZXB0aCIsInNpZCIsIm5hbWUiLCJ0ZW1wbGF0ZVNpZCIsInN0YXJ0Iiwic2luZ2xldG9ucyIsIm1vZHVsZXMiLCJmb3JFYWNoIiwibW9kIiwiY2hlY2tBc3NldCIsInVuZGVmaW5lZCIsImtleXMiLCJhc3NldHMiLCJrIiwibmVlZHNTa2VsZXRvbiIsInJlZHVjZSIsIm5zIiwibSIsIl9za2VsUHJvbWlzZSIsImdldFRocmVlSlNUcmFja2luZ1NrZWxldG9uIiwic2tlbCIsIm1vZHVsZSIsInJvb3QiLCJPYmplY3QzRCIsInRyYW5zZm9ybSIsIm1hdHJpeCIsImRlY29tcG9zZSIsInF1YXRlcm5pb24iLCJyb3RhdGlvbiIsInZlcnRpY2FsQWxpZ24iLCJoYWxmSGVpZ2h0IiwidHJhbnNsYXRlWSIsIndhcm4iLCJBeGlzSGVscGVyIiwibG9hZEFzc2V0cyIsInJlc3VsdHMiLCJpbml0aWFsaXplIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0ZSIsInRpbWVzdGFtcCIsInVwZGF0ZUFsbEJlaGF2aW9ycyIsIlRXRUVOIiwidXBkYXRlIiwicmVuZGVyIiwibWFuaWZlc3QiLCJpZCIsIkxvYWRlcnMuTW9kZWxQcm9taXNlIiwiTG9hZGVycy5UZXh0dXJlUHJvbWlzZSIsIkxvYWRlcnMuUG9zdGVyUHJvbWlzZSIsInBheWxvYWQiLCJpIiwidCJdLCJtYXBwaW5ncyI6Im1DQUlBLFNBQVNBLEdBQWFDLEdBRXJCLE1BQU8sSUFBSUMsU0FBUSxTQUFDQyxFQUFTQyxHQUU1QixHQUFHQyxFQUFNQyxPQUFPTCxHQUNmLE1BQU9FLEdBQVFFLEVBQU1DLE9BQU9MLEdBSXhCLElB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
