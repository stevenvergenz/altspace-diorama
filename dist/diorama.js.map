{"version":3,"file":null,"sources":["../src/loaders.js","../src/camera.js","../src/main.js"],"sourcesContent":["'use strict';\n\nclass ModelPromise extends Promise {\n\tconstructor(url){\n\t\tsuper((resolve, reject) => {\n\t\t\t// NOTE: glTF loader does not catch errors\n\t\t\tif(/\\.gltf$/i.test(url)){\n\t\t\t\tif(THREE.glTFLoader){\n\t\t\t\t\tlet loader = new THREE.glTFLoader();\n\t\t\t\t\tloader.load(url, (result) => {\n\t\t\t\t\t\tresolve(result.scene.children[0].children[0]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.error(`THREE.glTFLoader not found. \"${url}\" not loaded.`);\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(/\\.dae$/i.test(url)){\n\t\t\t\tif(THREE.ColladaLoader){\n\t\t\t\t\tlet loader = new THREE.ColladaLoader();\n\t\t\t\t\tloader.load(url, result => resolve(result.scene.children[0]), null, reject);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.error(`THREE.ColladaLoader not found. \"${url}\" not loaded.`);\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass TexturePromise extends Promise {\n\tconstructor(url){\n\t\tsuper((resolve, reject) =>\n\t\t{\n\t\t\tvar loader = new THREE.TextureLoader();\n\t\t\tloader.load(url, resolve, null, reject);\n\t\t});\n\t}\n}\n\nclass VideoPromise extends Promise {\n\tconstructor(url)\n\t{\n\t\t// start loader\n\t\tvar vidSrc = document.createElement('video');\n\t\tvidSrc.autoplay = true;\n\t\tvidSrc.loop = true;\n\t\tvidSrc.src = url;\n\t\tvidSrc.style.display = 'none';\n\t\tdocument.body.appendChild(vidSrc);\n\n\t\tvar tex = new THREE.VideoTexture(vidSrc);\n\t\ttex.minFilter = THREE.LinearFilter;\n\t\ttex.magFilter = THREE.LinearFilter;\n\t\ttex.format = THREE.RGBFormat;\n\n\t\t//cache.videos[url] = tex;\n\t\t//payload.videos[id] = cache.videos[url];\n\n\t\treturn Promise.resolve(tex);\n\t}\n}\n\nclass PosterPromise extends Promise {\n\tconstructor(url){\n\t\tsuper((resolve, reject) => \n\t\t{\n\t\t\tfunction onload(img)\n\t\t\t{\n\t\t\t\tlet width = img.width, height = img.height, ratio = img.width/img.height;\n\t\t\t\t\n\t\t\t\tlet tex = new THREE.Texture(img);\n\t\t\t\tlet mat = new THREE.MeshBasicMaterial({map: tex, side: THREE.DoubleSide});\n\t\t\t\tlet geo = new THREE.PlaneGeometry(...(ratio > 1 ? [1, 1/ratio] : [ratio, 1]));\n\t\t\t\tlet mesh = new THREE.Mesh(geo, mat);\n\t\t\t\t\n\t\t\t\tresolve(mesh);\n\t\t\t}\n\t\t\t\n\t\t\tfunction onerror(e){\n\t\t\t\treject(e);\n\t\t\t}\n\t\t\t\n\t\t\tlet loader = new THREE.ImageLoader();\n\t\t\tloader.load(url, onload, null, onerror);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t/*function generatePoster(texture, width, height)\n\t\t\t{\n\t\t\t\tvar p = template.clone();\n\t\t\t\tp.material = new THREE.MeshBasicMaterial({map: texture});\n\t\t\t\tp.material.side = THREE.DoubleSide;\n\t\t\t\t\n\t\t\t\tp.scale.set(width, height, 1);\n\n\t\t\t\tvar ratio = width/height;\n\t\t\t\tif(ratio > 1){\n\t\t\t\t\ttexture.repeat.set(1, 1/ratio);\n\t\t\t\t\ttexture.offset.set(0, 1-1/ratio);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttexture.repeat.set(1/ratio, 1);\n\t\t\t\t\ttexture.offset.set(0, 0);\n\t\t\t\t}\n\n\t\t\t\treturn p;\n\t\t\t}*/\n\t\t});\n\t}\n}\n\nexport { ModelPromise, TexturePromise, VideoPromise, PosterPromise };\n\n","'use strict';\n\nexport default class PreviewCamera extends THREE.OrthographicCamera\n{\n\tconstructor(focus, viewSize, lookDirection)\n\t{\n\t\tsuper(-1, 1, 1, -1, .1, 400);\n\n\t\tlet settings = window.localStorage.getItem('dioramaViewSettings');\n\t\tif(settings){\n\t\t\tsettings = JSON.parse(settings);\n\t\t\tif(!focus)\n\t\t\t\tfocus = new THREE.Vector3().fromArray(settings.focus);\n\t\t\tif(!viewSize)\n\t\t\t\tviewSize = settings.viewSize;\n\t\t\tif(!lookDirection)\n\t\t\t\tlookDirection = new THREE.Vector3().fromArray(settings.lookDirection);\n\t\t}\n\n\t\tthis._viewSize = viewSize || 40;\n\t\tthis._focus = focus || new THREE.Vector3();\n\t\tthis._lookDirection = lookDirection || new THREE.Vector3(0,-1,0);\n\t\tthis.gridHelper = new THREE.GridHelper(300, 1);\n\t\t//this.gridHelper.quaternion.setFromUnitVectors( new THREE.Vector3(0,-1,0), this._lookDirection );\n\t}\n\n\tget viewSize(){\n\t\treturn this._viewSize;\n\t}\n\tset viewSize(val){\n\t\tthis._viewSize = val;\n\t\tthis.recomputeViewport();\n\t}\n\n\tget focus(){\n\t\treturn this._focus;\n\t}\n\tset focus(val){\n\t\tthis._focus.copy(val);\n\t\tthis.recomputeViewport();\n\t}\n\n\tget lookDirection(){\n\t\treturn this._lookDirection;\n\t}\n\tset lookDirection(val){\n\t\tthis._lookDirection.copy(val);\n\t\tthis.recomputeViewport();\n\t}\n\n\tregisterHooks(renderer)\n\t{\n\t\tvar self = this;\n\t\tself.renderer = renderer;\n\n\t\t// set styles on the page, so the preview works right\n\t\tdocument.body.parentElement.style.height = '100%';\n\t\tdocument.body.style.height = '100%';\n\t\tdocument.body.style.margin = '0';\n\t\tdocument.body.style.overflow = 'hidden';\n\n\t\tvar info = document.createElement('p');\n\t\tinfo.innerHTML = ['Middle click and drag to pan', 'Mouse wheel to zoom', 'Arrow keys to rotate'].join('<br/>');\n\t\tObject.assign(info.style, {\n\t\t\tposition: 'fixed',\n\t\t\ttop: '10px',\n\t\t\tleft: '10px',\n\t\t\tmargin: 0\n\t\t});\n\t\tdocument.body.appendChild(info);\n\n\t\t// resize the preview canvas when window resizes\n\t\twindow.addEventListener('resize', e => self.recomputeViewport());\n\t\tself.recomputeViewport();\n\n\t\t// middle click and drag to pan view\n\t\tvar dragStart = null, focusStart = null;\n\t\twindow.addEventListener('mousedown', e => {\n\t\t\tif(e.button === 1){\n\t\t\t\tdragStart = {x: e.clientX, y: e.clientY};\n\t\t\t\tfocusStart = self._focus.clone();\n\t\t\t}\n\t\t});\n\t\twindow.addEventListener('mouseup', e => {\n\t\t\tif(e.button === 1){\n\t\t\t\tdragStart = null;\n\t\t\t\tfocusStart = null;\n\t\t\t}\n\t\t});\n\t\twindow.addEventListener('mousemove', e => {\n\t\t\tif(dragStart)\n\t\t\t{\n\t\t\t\tlet {clientWidth: w, clientHeight: h} = document.body;\n\t\t\t\tlet pixelsPerMeter = Math.sqrt(w*w+h*h) / self._viewSize;\n\t\t\t\tlet dx = e.clientX - dragStart.x, dy = e.clientY - dragStart.y;\n\t\t\t\tlet right = new THREE.Vector3().crossVectors(self._lookDirection, self.up);\n\n\t\t\t\tself._focus.copy(focusStart)\n\t\t\t\t\t.add(self.up.clone().multiplyScalar(dy/pixelsPerMeter))\n\t\t\t\t\t.add(right.multiplyScalar(-dx/pixelsPerMeter));\n\n\t\t\t\tself.recomputeViewport();\n\t\t\t}\n\t\t});\n\n\t\t// wheel to zoom\n\t\twindow.addEventListener('wheel', e => {\n\t\t\tif(e.deltaY < 0){\n\t\t\t\tself._viewSize *= 0.90;\n\t\t\t\tself.recomputeViewport();\n\t\t\t}\n\t\t\telse if(e.deltaY > 0){\n\t\t\t\tself._viewSize *= 1.1;\n\t\t\t\tself.recomputeViewport();\n\t\t\t}\n\t\t});\n\n\t\t// arrow keys to rotate\n\t\twindow.addEventListener('keydown', e => {\n\t\t\tif(e.key === 'ArrowDown'){\n\t\t\t\tlet right = new THREE.Vector3().crossVectors(self._lookDirection, self.up);\n\t\t\t\tself._lookDirection.applyAxisAngle(right, Math.PI/2);\n\t\t\t\t//self.gridHelper.rotateOnAxis(right, Math.PI/2);\n\t\t\t\tself.recomputeViewport();\n\t\t\t}\n\t\t\telse if(e.key === 'ArrowUp'){\n\t\t\t\tlet right = new THREE.Vector3().crossVectors(self._lookDirection, self.up);\n\t\t\t\tself._lookDirection.applyAxisAngle(right, -Math.PI/2);\n\t\t\t\t//self.gridHelper.rotateOnAxis(right, -Math.PI/2);\n\t\t\t\tself.recomputeViewport();\n\n\t\t\t}\n\t\t\telse if(e.key === 'ArrowLeft'){\n\t\t\t\tself._lookDirection.applyAxisAngle(self.up, -Math.PI/2);\n\t\t\t\t//self.gridHelper.rotateOnAxis(self.up, -Math.PI/2);\n\t\t\t\tself.recomputeViewport();\n\t\t\t}\n\t\t\telse if(e.key === 'ArrowRight'){\n\t\t\t\tself._lookDirection.applyAxisAngle(self.up, Math.PI/2);\n\t\t\t\t//self.gridHelper.rotateOnAxis(self.up, Math.PI/2);\n\t\t\t\tself.recomputeViewport();\n\t\t\t}\n\t\t});\n\t}\n\n\trecomputeViewport()\n\t{\n\t\tvar {clientWidth: w, clientHeight: h} = document.body;\n\n\t\t// resize canvas\n\t\tthis.renderer.setSize(w, h);\n\n\t\t// compute window dimensions from view size\n\t\tvar ratio = w/h;\n\t\tvar height = Math.sqrt( (this._viewSize*this._viewSize) / (ratio*ratio + 1) );\n\t\tvar width = ratio * height;\n\n\t\t// set frustrum edges\n\t\tthis.left = -width/2;\n\t\tthis.right = width/2;\n\t\tthis.top = height/2;\n\t\tthis.bottom = -height/2;\n\n\t\tthis.updateProjectionMatrix();\n\n\t\t// update position\n\t\tthis.position.copy(this._focus).sub( this._lookDirection.clone().multiplyScalar(200) );\n\t\tif( Math.abs( this._lookDirection.normalize().dot(new THREE.Vector3(0,-1,0)) ) === 1 )\n\t\t\tthis.up.set(0,0,1); // if we're looking down the Y axis\n\t\telse\n\t\t\tthis.up.set(0,1,0);\n\t\tthis.lookAt( this._focus );\n\n\t\twindow.localStorage.setItem('dioramaViewSettings', JSON.stringify({\n\t\t\tfocus: this._focus.toArray(),\n\t\t\tviewSize: this._viewSize,\n\t\t\tlookDirection: this._lookDirection.toArray()\n\t\t}));\n\t}\n}\n","'use strict';\n\nimport * as Loaders from './loaders';\nimport PreviewCamera from './camera';\n\nexport default class Diorama\n{\n\tconstructor({bgColor=0xaaaaaa, gridOffset=new THREE.Vector3()} = {})\n\t{\n\t\tvar self = this;\n\n\t\tself.assetCache = {\n\t\t\tmodels: {},\n\t\t\ttextures: {},\n\t\t\tvideos: {}\n\t\t};\n\n\t\tself.scene = new THREE.Scene();\n\n\t\t// set up renderer and scale\n\t\tif(altspace.inClient)\n\t\t{\n\t\t\tself.renderer = altspace.getThreeJSRenderer();\n\t\t\tself._envPromise = Promise.all([altspace.getEnclosure(), altspace.getSpace()])\n\t\t\t.then(function([e, s]){\n\t\t\t\tself.env = Object.freeze(Object.assign({}, e, s));\n\t\t\t\tself.scene.scale.multiplyScalar(e.pixelsPerMeter);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// set up preview renderer, in case we're out of world\n\t\t\tself.renderer = new THREE.WebGLRenderer();\n\t\t\tself.renderer.setSize(document.body.clientWidth, document.body.clientHeight);\n\t\t\tself.renderer.setClearColor( bgColor );\n\t\t\tdocument.body.appendChild(self.renderer.domElement);\n\t\t\n\t\t\tself.previewCamera = new PreviewCamera();\n\t\t\tself.previewCamera.gridHelper.position.copy(gridOffset);\n\t\t\tself.scene.add(self.previewCamera, self.previewCamera.gridHelper);\n\t\t\tself.previewCamera.registerHooks(self.renderer);\n\n\t\t\t// set up cursor emulation\n\t\t\taltspace.utilities.shims.cursor.init(self.scene, self.previewCamera, {renderer: self.renderer});\n\t\t\n\t\t\t// stub environment\n\t\t\tself.env = Object.freeze({\n\t\t\t\tinnerWidth: 1024,\n\t\t\t\tinnerHeight: 1024,\n\t\t\t\tinnerDepth: 1024,\n\t\t\t\tpixelsPerMeter: 1024/3,\n\t\t\t\tsid: 'browser',\n\t\t\t\tname: 'browser',\n\t\t\t\ttemplateSid: 'browser'\n\t\t\t});\n\t\t}\n\t}\n\t\t\n\t\t\n\tstart(...modules)\n\t{\n\t\tvar self = this;\n\n\t\t// make sure space info is filled out before initialization\n\t\tif(!self.env){\n\t\t\treturn self._envPromise.then(() => { self.start(...modules); });\n\t\t}\n\n\t\t// determine which assets aren't shared\n\t\tvar singletons = {};\n\t\tmodules.forEach(mod =>\n\t\t{\n\t\t\tfunction checkAsset(url){\n\t\t\t\tif(singletons[url] === undefined) singletons[url] = true;\n\t\t\t\telse if(singletons[url] === true) singletons[url] = false;\n\t\t\t}\n\t\t\tObject.keys(mod.assets.textures || {}).map(k => mod.assets.textures[k]).forEach(checkAsset);\n\t\t\tObject.keys(mod.assets.models || {}).map(k => mod.assets.models[k]).forEach(checkAsset);\n\t\t});\n\n\t\t// determine if the tracking skeleton is needed\n\t\tlet needsSkeleton = modules.reduce((ns,m) => ns || m.needsSkeleton, false);\n\t\tif(needsSkeleton && altspace.inClient){\n\t\t\taltspace.getThreeJSTrackingSkeleton().then(skel => {\n\t\t\t\tself.scene.add(skel);\n\t\t\t\tself.env.skel = skel;\n\t\t\t});\n\t\t}\n\n\t\t// construct dioramas\n\t\tmodules.forEach(function(module)\n\t\t{\n\t\t\tlet root = null;\n\t\t\t\n\t\t\tif(module instanceof THREE.Object3D)\n\t\t\t{\n\t\t\t\troot = module;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\troot = new THREE.Object3D();\n\n\t\t\t\t// handle absolute positioning\n\t\t\t\tif(module.transform){\n\t\t\t\t\troot.matrix.fromArray(module.transform);\n\t\t\t\t\troot.matrix.decompose(root.position, root.quaternion, root.scale);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif(module.position){\n\t\t\t\t\t\troot.position.fromArray(module.position);\n\t\t\t\t\t}\n\t\t\t\t\tif(module.rotation){\n\t\t\t\t\t\troot.rotation.fromArray(module.rotation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// handle relative positioning\n\t\t\tif(module.verticalAlign){\n\t\t\t\tlet halfHeight = self.env.innerHeight/(2*self.env.pixelsPerMeter);\n\t\t\t\tswitch(module.verticalAlign){\n\t\t\t\tcase 'top':\n\t\t\t\t\troot.translateY(halfHeight);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom':\n\t\t\t\t\troot.translateY(-halfHeight);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'middle':\n\t\t\t\t\t// default\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn('Invalid value for \"verticalAlign\" - ', module.verticalAlign);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.scene.add(root);\n\n\t\t\tif(self.previewCamera){\n\t\t\t\troot.add( new THREE.AxisHelper(1) );\n\t\t\t}\n\t\t\n\t\t\tself.loadAssets(module.assets, singletons).then((results) => {\n\t\t\t\tmodule.initialize(self.env, root, results);\n\t\t\t});\n\t\t});\n\t\t\n\t\t// start animating\n\t\twindow.requestAnimationFrame(function animate(timestamp)\n\t\t{\n\t\t\twindow.requestAnimationFrame(animate);\n\t\t\tself.scene.updateAllBehaviors();\n\t\t\tif(window.TWEEN) TWEEN.update();\n\t\t\tself.renderer.render(self.scene, self.previewCamera);\n\t\t});\n\t}\n\n\tloadAssets(manifest, singletons)\n\t{\n\t\tvar self = this;\n\n\t\tclass PromisesFinished extends Promise {\n\t\t\tconstructor(arr){\n\t\t\t\tsuper((resolve, reject) =>\n\t\t\t\t{\n\t\t\t\t\tvar waiting = arr.length;\n\t\t\t\t\n\t\t\t\t\tfunction checkDone(){\n\t\t\t\t\t\tif(--waiting === 0)\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\n\t\t\t\t\tarr.forEach(p => { p.then(checkDone, checkDone); });\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\t// populate cache\n\t\t\tPromisesFinished([\n\n\t\t\t\t// populate model cache\n\t\t\t\tPromise.all(Object.keys(manifest.models || {}).map(id =>\n\t\t\t\t{\n\t\t\t\t\tvar url = manifest.models[id];\n\t\t\t\t\tif(self.assetCache.models[url])\n\t\t\t\t\t\treturn Promise.resolve(self.assetCache.models[url]);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn Loaders.ModelPromise(url).then(model => {\n\t\t\t\t\t\t\tself.assetCache.models[url] = model;\n\t\t\t\t\t\t});\n\t\t\t\t})),\n\n\t\t\t\t// populate explicit texture cache\n\t\t\t\tPromise.all(Object.keys(manifest.textures || {}).map(id =>\n\t\t\t\t{\n\t\t\t\t\tvar url = manifest.textures[id];\n\t\t\t\t\tif(self.assetCache.textures[url])\n\t\t\t\t\t\treturn Promise.resolve(self.assetCache.textures[url]);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn Loaders.TexturePromise(url).then(texture => {\n\t\t\t\t\t\t\tself.assetCache.textures[url] = texture;\n\t\t\t\t\t\t});\t\t\t\n\t\t\t\t}))\n\t\t\t])\n\n\t\t\t.then(() =>\n\t\t\t{\n\t\t\t\t// populate payload from cache\n\t\t\t\tvar payload = {models: {}, textures: {}};\n\n\t\t\t\tfor(let i in manifest.models){\n\t\t\t\t\tlet url = manifest.models[i];\n\t\t\t\t\tlet t = self.assetCache.models[url];\n\t\t\t\t\tpayload.models[i] = t ? singletons[url] ? t : t.clone() : null;\n\t\t\t\t}\n\n\t\t\t\tfor(let i in manifest.textures){\n\t\t\t\t\tlet url = manifest.textures[i];\n\t\t\t\t\tlet t = self.assetCache.textures[url];\n\t\t\t\t\tpayload.textures[i] = t ? singletons[url] ? t : t.clone() : null;\n\t\t\t\t}\n\n\t\t\t\tresolve(payload);\n\t\t\t});\n\t\t});\n\t}\n\n};\n"],"names":["super","let","loader","right","Loaders.ModelPromise","Loaders.TexturePromise","i","url","t"],"mappings":"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"}